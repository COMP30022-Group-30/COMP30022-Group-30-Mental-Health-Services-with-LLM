2025/10/17 13:42:47.348069 [INFO] Starting...
2025/10/17 13:42:47.348110 [INFO] Starting EBPlatform-PlatformEngine
2025/10/17 13:42:47.348199 [INFO] reading event message file
2025/10/17 13:42:47.348585 [INFO] Engine received EB command userdata-exec

2025/10/17 13:42:47.356064 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 13:42:47.668786 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 13:42:48.040846 [INFO] This is a workflow controlled instance.
2025/10/17 13:42:48.040983 [INFO] Engine command: (env-launch)

2025/10/17 13:42:48.041350 [INFO] Executing instruction: SyncClock
2025/10/17 13:42:48.041355 [INFO] Starting SyncClock
2025/10/17 13:42:48.041363 [INFO] Running command: /usr/bin/chronyc tracking
2025/10/17 13:42:48.058525 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Oct 17 13:42:44 2025
System time     : 0.060970280 seconds slow of NTP time
Last offset     : -0.000024743 seconds
RMS offset      : 0.000024743 seconds
Frequency       : 2.529 ppm fast
Residual freq   : -12.017 ppm
Skew            : 0.162 ppm
Root delay      : 0.000355036 seconds
Root dispersion : 0.000208624 seconds
Update interval : 2.0 seconds
Leap status     : Normal

2025/10/17 13:42:48.058556 [INFO] Running command: /usr/bin/chronyc -a makestep
2025/10/17 13:42:48.122667 [INFO] 200 OK

2025/10/17 13:42:48.123272 [INFO] Skipping Configure OS
2025/10/17 13:42:48.123283 [INFO] Skipping LockRepo
2025/10/17 13:42:48.123287 [INFO] Skipping GenerateEBBanner
2025/10/17 13:42:48.123291 [INFO] Skipping Install Process Manager
2025/10/17 13:42:48.123295 [INFO] Skipping install syslog
2025/10/17 13:42:48.123298 [INFO] Skipping install cron
2025/10/17 13:42:48.123302 [INFO] Skipping install proxy
2025/10/17 13:42:48.123305 [INFO] Skipping installhealthd
2025/10/17 13:42:48.123309 [INFO] Skipping Install Log Streaming Manager
2025/10/17 13:42:48.123313 [INFO] Skipping install X-Ray
2025/10/17 13:42:48.123317 [INFO] Skipping install Third Party License
2025/10/17 13:42:48.123321 [INFO] Skipping install httpd
2025/10/17 13:42:48.123326 [INFO] Instance has NOT been bootstrapped
2025/10/17 13:42:48.123328 [INFO] Executing instruction: installSqsd
2025/10/17 13:42:48.123331 [INFO] This is a web server environment instance, skip install sqsd daemon ...
2025/10/17 13:42:48.123334 [INFO] Instance has NOT been bootstrapped
2025/10/17 13:42:48.123336 [INFO] Executing instruction: bootstraphealthd
2025/10/17 13:42:48.123339 [INFO] this is an enhanced health env ...
2025/10/17 13:42:48.123350 [INFO] bootstrap healthd....
2025/10/17 13:42:48.123361 [INFO] Running command: /usr/bin/id -u healthd || /usr/sbin/useradd --user-group healthd -s /sbin/nologin --create-home
2025/10/17 13:42:48.395195 [INFO] /usr/bin/id: ‘healthd’: no such user

2025/10/17 13:42:48.395601 [INFO] bootstrap healthd....
2025/10/17 13:42:48.395615 [INFO] Running command: /usr/bin/id -u healthd || /usr/sbin/useradd --user-group healthd -s /sbin/nologin --create-home
2025/10/17 13:42:48.398564 [INFO] 1001

2025/10/17 13:42:48.398859 [INFO] configure bundle log for healthd...
2025/10/17 13:42:48.398916 [INFO] Executing instruction: GetSetupProxyLog
2025/10/17 13:42:48.398980 [INFO] Skipping Install yum packages
2025/10/17 13:42:48.398985 [INFO] Skipping Install Python Bundle
2025/10/17 13:42:48.398988 [INFO] Skipping Configure Python site-packages
2025/10/17 13:42:48.398992 [INFO] Skipping Install Python Modules
2025/10/17 13:42:48.398996 [INFO] Skipping MarkBaked
2025/10/17 13:42:48.399001 [INFO] Instance has NOT been bootstrapped
2025/10/17 13:42:48.399003 [INFO] Executing instruction: TuneSystemSettings
2025/10/17 13:42:48.399005 [INFO] Starting TuneSystemSettings
2025/10/17 13:42:48.399008 [INFO] Instance has NOT been bootstrapped
2025/10/17 13:42:48.401235 [INFO] Executing instruction: GetSetupLogRotate
2025/10/17 13:42:48.401241 [INFO] Initialize LogRotate files and directories
2025/10/17 13:42:48.419427 [INFO] Instance has NOT been bootstrapped
2025/10/17 13:42:48.419441 [INFO] Executing instruction: BootstrapCFNHup
2025/10/17 13:42:48.419444 [INFO] Bootstrap cfn-hup
2025/10/17 13:42:48.421740 [INFO] Copying file /opt/elasticbeanstalk/config/private/aws-eb-command-handler.conf to /etc/cfn/hooks.d/aws-eb-command-handler.conf
2025/10/17 13:42:48.424002 [INFO] Executing instruction: StartCFNHup
2025/10/17 13:42:48.424013 [INFO] Start cfn-hup
2025/10/17 13:42:48.424035 [INFO] Running command: systemctl show -p PartOf cfn-hup.service
2025/10/17 13:42:48.438460 [INFO] cfn-hup is not registered with EB yet, registering it now
2025/10/17 13:42:48.438489 [INFO] Running command: systemctl show -p PartOf cfn-hup.service
2025/10/17 13:42:48.454132 [INFO] Running command: systemctl daemon-reload
2025/10/17 13:42:48.702394 [INFO] Running command: systemctl reset-failed
2025/10/17 13:42:48.711293 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/17 13:42:48.719244 [INFO] Running command: systemctl enable aws-eb.target
2025/10/17 13:42:48.958677 [INFO] Running command: systemctl start aws-eb.target
2025/10/17 13:42:48.968192 [INFO] Running command: systemctl enable cfn-hup.service
2025/10/17 13:42:49.206519 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/cfn-hup.service → /etc/systemd/system/cfn-hup.service.

2025/10/17 13:42:49.206551 [INFO] Running command: systemctl is-active cfn-hup.service
2025/10/17 13:42:49.215078 [INFO] cfn-hup process is not running, starting it now
2025/10/17 13:42:49.215108 [INFO] Running command: systemctl show -p PartOf cfn-hup.service
2025/10/17 13:42:49.225350 [INFO] Running command: systemctl is-active cfn-hup.service
2025/10/17 13:42:49.232909 [INFO] Running command: systemctl start cfn-hup.service
2025/10/17 13:42:49.317284 [INFO] Instance has NOT been bootstrapped
2025/10/17 13:42:49.317305 [INFO] Executing instruction: SetupPublishLogCronjob
2025/10/17 13:42:49.317309 [INFO] Setup publish logs cron job...
2025/10/17 13:42:49.317314 [INFO] Copying file /opt/elasticbeanstalk/config/private/logtasks/cron/publishlogs to /etc/cron.d/publishlogs
2025/10/17 13:42:49.319843 [INFO] Instance has NOT been bootstrapped
2025/10/17 13:42:49.319857 [INFO] Executing instruction: MarkBootstrapped
2025/10/17 13:42:49.319861 [INFO] Starting MarkBootstrapped
2025/10/17 13:42:49.319872 [INFO] Instance has NOT been bootstrapped
2025/10/17 13:42:49.319966 [INFO] Marked instance as Bootstrapped
2025/10/17 13:42:49.319970 [INFO] Executing instruction: Save CFN Stack Info
2025/10/17 13:42:49.320024 [INFO] Executing cleanup logic
2025/10/17 13:42:49.320034 [INFO] Platform Engine finished execution on command: env-launch

2025/10/17 13:45:21.930477 [INFO] Starting...
2025/10/17 13:45:21.930522 [INFO] Starting EBPlatform-PlatformEngine
2025/10/17 13:45:21.930541 [INFO] reading event message file
2025/10/17 13:45:21.930849 [INFO] Engine received EB command cfn-hup-exec

2025/10/17 13:45:21.992854 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 13:45:22.286565 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 13:45:22.568529 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/17 13:45:22.568547 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/17 13:45:22.568553 [INFO] Engine command: (app-deploy)

2025/10/17 13:45:22.568559 [INFO] Downloading EB Application...
2025/10/17 13:45:22.568562 [INFO] Region: us-east-1
2025/10/17 13:45:22.568564 [INFO] envID: e-bp8pq6exat
2025/10/17 13:45:22.568571 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/17 13:45:22.568574 [INFO] accountID: 433676943793
2025/10/17 13:45:22.568576 [INFO] Using manifest file name from command request
2025/10/17 13:45:22.568581 [INFO] Unable to get version manifest file.
2025/10/17 13:45:22.568583 [INFO] Downloading latest manifest available.
2025/10/17 13:45:22.568586 [INFO] Download latest app version manifest
2025/10/17 13:45:22.568726 [INFO] resources/environments/e-bp8pq6exat/_runtime/versions/manifest
2025/10/17 13:45:22.610566 [INFO] latestManifest key *: resources/environments/e-bp8pq6exat/_runtime/versions/manifest_1760708501031

2025/10/17 13:45:22.610996 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/versions/manifest_1760708501031, expected bucket owner: 433676943793
2025/10/17 13:45:22.645886 [INFO] Download successful150bytes downloaded
2025/10/17 13:45:22.645975 [INFO] Trying to read and parse version manifest...
2025/10/17 13:45:22.646055 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/_versions/mental-health-llm/app-251018_004129466973, expected bucket owner: 433676943793
2025/10/17 13:45:22.673482 [INFO] Download successful31282bytes downloaded
2025/10/17 13:45:22.673844 [INFO] Executing instruction: ElectLeader
2025/10/17 13:45:22.673850 [INFO] Running leader election for instance i-0d445e9a3d91a5047...
2025/10/17 13:45:22.673853 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/17 13:45:22.673864 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id f15f60f2-b893-426a-ad28-766c6cd656fe --listener-id i-0d445e9a3d91a5047 --region us-east-1
2025/10/17 13:45:22.972790 [INFO] Instance is Leader.
2025/10/17 13:45:22.972834 [INFO] Executing instruction: stopSqsd
2025/10/17 13:45:22.972838 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/17 13:45:22.972840 [INFO] Executing instruction: PreBuildEbExtension
2025/10/17 13:45:22.972843 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/17 13:45:22.972853 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/17 13:45:23.292002 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/17 13:45:23.292028 [INFO] Executing instruction: StageApplication
2025/10/17 13:45:23.292031 [INFO] Recreating /var/app/staging/
2025/10/17 13:45:23.292170 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/17 13:45:23.292182 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/17 13:45:23.297497 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/17 13:45:23.298504 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/17 13:45:23.298562 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/17 13:45:23.298577 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/17 13:45:23.298579 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/17 13:45:23.298584 [INFO] Executing instruction: InstallDependency
2025/10/17 13:45:23.298588 [INFO] checking dependencies file
2025/10/17 13:45:23.298599 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/17 13:45:23.298608 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/17 13:45:27.981442 [INFO] Collecting fastapi==0.104.1 (from -r requirements.txt (line 1))
  Downloading fastapi-0.104.1-py3-none-any.whl.metadata (24 kB)
Collecting uvicorn==0.24.0 (from -r requirements.txt (line 2))
  Downloading uvicorn-0.24.0-py3-none-any.whl.metadata (6.4 kB)
Collecting pydantic==2.5.0 (from -r requirements.txt (line 3))
  Downloading pydantic-2.5.0-py3-none-any.whl.metadata (174 kB)
Collecting pydantic-settings==2.1.0 (from -r requirements.txt (line 4))
  Downloading pydantic_settings-2.1.0-py3-none-any.whl.metadata (2.9 kB)
Collecting python-dotenv==1.0.0 (from -r requirements.txt (line 5))
  Downloading python_dotenv-1.0.0-py3-none-any.whl.metadata (21 kB)
Collecting httpx==0.25.2 (from -r requirements.txt (line 8))
  Downloading httpx-0.25.2-py3-none-any.whl.metadata (6.9 kB)
Collecting openai==1.12.0 (from -r requirements.txt (line 11))
  Downloading openai-1.12.0-py3-none-any.whl.metadata (18 kB)
Collecting structlog==24.1.0 (from -r requirements.txt (line 14))
  Downloading structlog-24.1.0-py3-none-any.whl.metadata (6.9 kB)
Collecting anyio<4.0.0,>=3.7.1 (from fastapi==0.104.1->-r requirements.txt (line 1))
  Downloading anyio-3.7.1-py3-none-any.whl.metadata (4.7 kB)
Collecting starlette<0.28.0,>=0.27.0 (from fastapi==0.104.1->-r requirements.txt (line 1))
  Downloading starlette-0.27.0-py3-none-any.whl.metadata (5.8 kB)
Collecting typing-extensions>=4.8.0 (from fastapi==0.104.1->-r requirements.txt (line 1))
  Downloading typing_extensions-4.15.0-py3-none-any.whl.metadata (3.3 kB)
Collecting annotated-types>=0.4.0 (from pydantic==2.5.0->-r requirements.txt (line 3))
  Downloading annotated_types-0.7.0-py3-none-any.whl.metadata (15 kB)
Collecting pydantic-core==2.14.1 (from pydantic==2.5.0->-r requirements.txt (line 3))
  Downloading pydantic_core-2.14.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (6.5 kB)
Collecting click>=7.0 (from uvicorn==0.24.0->-r requirements.txt (line 2))
  Downloading click-8.3.0-py3-none-any.whl.metadata (2.6 kB)
Collecting h11>=0.8 (from uvicorn==0.24.0->-r requirements.txt (line 2))
  Downloading h11-0.16.0-py3-none-any.whl.metadata (8.3 kB)
Collecting certifi (from httpx==0.25.2->-r requirements.txt (line 8))
  Downloading certifi-2025.10.5-py3-none-any.whl.metadata (2.5 kB)
Collecting httpcore==1.* (from httpx==0.25.2->-r requirements.txt (line 8))
  Downloading httpcore-1.0.9-py3-none-any.whl.metadata (21 kB)
Collecting idna (from httpx==0.25.2->-r requirements.txt (line 8))
  Downloading idna-3.11-py3-none-any.whl.metadata (8.4 kB)
Collecting sniffio (from httpx==0.25.2->-r requirements.txt (line 8))
  Downloading sniffio-1.3.1-py3-none-any.whl.metadata (3.9 kB)
Collecting distro<2,>=1.7.0 (from openai==1.12.0->-r requirements.txt (line 11))
  Downloading distro-1.9.0-py3-none-any.whl.metadata (6.8 kB)
Collecting tqdm>4 (from openai==1.12.0->-r requirements.txt (line 11))
  Downloading tqdm-4.67.1-py3-none-any.whl.metadata (57 kB)
Downloading fastapi-0.104.1-py3-none-any.whl (92 kB)
Downloading pydantic-2.5.0-py3-none-any.whl (407 kB)
Downloading uvicorn-0.24.0-py3-none-any.whl (59 kB)
Downloading pydantic_settings-2.1.0-py3-none-any.whl (11 kB)
Downloading python_dotenv-1.0.0-py3-none-any.whl (19 kB)
Downloading httpx-0.25.2-py3-none-any.whl (74 kB)
Downloading openai-1.12.0-py3-none-any.whl (226 kB)
Downloading structlog-24.1.0-py3-none-any.whl (65 kB)
Downloading pydantic_core-2.14.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.1 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.1/2.1 MB 123.6 MB/s  0:00:00
Downloading anyio-3.7.1-py3-none-any.whl (80 kB)
Downloading distro-1.9.0-py3-none-any.whl (20 kB)
Downloading httpcore-1.0.9-py3-none-any.whl (78 kB)
Downloading starlette-0.27.0-py3-none-any.whl (66 kB)
Downloading typing_extensions-4.15.0-py3-none-any.whl (44 kB)
Downloading annotated_types-0.7.0-py3-none-any.whl (13 kB)
Downloading click-8.3.0-py3-none-any.whl (107 kB)
Downloading h11-0.16.0-py3-none-any.whl (37 kB)
Downloading idna-3.11-py3-none-any.whl (71 kB)
Downloading sniffio-1.3.1-py3-none-any.whl (10 kB)
Downloading tqdm-4.67.1-py3-none-any.whl (78 kB)
Downloading certifi-2025.10.5-py3-none-any.whl (163 kB)
Installing collected packages: typing-extensions, tqdm, structlog, sniffio, python-dotenv, idna, h11, distro, click, certifi, annotated-types, uvicorn, pydantic-core, httpcore, anyio, starlette, pydantic, httpx, pydantic-settings, openai, fastapi

Successfully installed annotated-types-0.7.0 anyio-3.7.1 certifi-2025.10.5 click-8.3.0 distro-1.9.0 fastapi-0.104.1 h11-0.16.0 httpcore-1.0.9 httpx-0.25.2 idna-3.11 openai-1.12.0 pydantic-2.5.0 pydantic-core-2.14.1 pydantic-settings-2.1.0 python-dotenv-1.0.0 sniffio-1.3.1 starlette-0.27.0 structlog-24.1.0 tqdm-4.67.1 typing-extensions-4.15.0 uvicorn-0.24.0

2025/10/17 13:45:27.981476 [INFO] Executing instruction: check Procfile
2025/10/17 13:45:27.981517 [INFO] detected Procfile in application source bundle ...
2025/10/17 13:45:27.981522 [INFO] Executing instruction: configure X-Ray
2025/10/17 13:45:27.981526 [INFO] X-Ray is not enabled.
2025/10/17 13:45:27.981529 [INFO] Executing instruction: configure proxy server
2025/10/17 13:45:27.981546 [INFO] Recreating /var/proxy/staging/nginx
2025/10/17 13:45:27.990645 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/17 13:45:27.992840 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 13:45:28.060311 [INFO] Running command: systemctl daemon-reload
2025/10/17 13:45:28.327618 [INFO] Running command: systemctl reset-failed
2025/10/17 13:45:28.357259 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/17 13:45:28.364980 [INFO] Running command: systemctl enable aws-eb.target
2025/10/17 13:45:28.580568 [INFO] Running command: systemctl start aws-eb.target
2025/10/17 13:45:28.589136 [INFO] Running command: systemctl enable healthd.service
2025/10/17 13:45:28.839979 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/17 13:45:28.840005 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 13:45:28.850339 [INFO] Running command: systemctl is-active healthd.service
2025/10/17 13:45:28.857372 [INFO] Running command: systemctl start healthd.service
2025/10/17 13:45:28.937824 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/17 13:45:28.939030 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/17 13:45:28.940159 [INFO] Executing instruction: configure log streaming
2025/10/17 13:45:28.940167 [INFO] log streaming is not enabled
2025/10/17 13:45:28.940170 [INFO] disable log stream
2025/10/17 13:45:28.940179 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/17 13:45:28.953885 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/17 13:45:28.966823 [INFO] Executing instruction: GetToggleForceRotate
2025/10/17 13:45:28.966843 [INFO] Checking if logs need forced rotation
2025/10/17 13:45:28.966855 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 13:45:29.303903 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 13:45:29.666853 [INFO] Generating rsyslog config from Procfile
2025/10/17 13:45:29.669200 [INFO] Running command: systemctl restart rsyslog.service
2025/10/17 13:45:30.257076 [INFO] Executing instruction: PostBuildEbExtension
2025/10/17 13:45:30.257098 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/17 13:45:30.257108 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/17 13:45:30.627326 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/17 13:45:30.627348 [INFO] Executing instruction: CleanEbExtensions
2025/10/17 13:45:30.627455 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/17 13:45:30.627461 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/17 13:45:30.627478 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/17 13:45:30.627491 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/17 13:45:30.627493 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/17 13:45:30.627497 [INFO] Executing instruction: stop X-Ray
2025/10/17 13:45:30.627499 [INFO] stop X-Ray ...
2025/10/17 13:45:30.627507 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/17 13:45:30.640800 [WARN] stopProcess Warning: process xray is not registered 
2025/10/17 13:45:30.640831 [INFO] Running command: systemctl stop xray.service
2025/10/17 13:45:30.655089 [INFO] Executing instruction: stop proxy
2025/10/17 13:45:30.655121 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/17 13:45:30.669986 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/17 13:45:30.670018 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 13:45:30.683363 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2025/10/17 13:45:30.683382 [INFO] Executing instruction: FlipApplication
2025/10/17 13:45:30.683385 [INFO] Fetching environment variables...
2025/10/17 13:45:30.683501 [INFO] Purge old process...
2025/10/17 13:45:30.683514 [INFO] Removing /var/app/current/ if it exists
2025/10/17 13:45:30.683521 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/17 13:45:30.683535 [INFO] Register application processes...
2025/10/17 13:45:30.683538 [INFO] Registering the proc: web

2025/10/17 13:45:30.683545 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 13:45:30.695251 [INFO] Running command: systemctl daemon-reload
2025/10/17 13:45:30.939346 [INFO] Running command: systemctl reset-failed
2025/10/17 13:45:30.947868 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/17 13:45:30.955391 [INFO] Copying file /opt/elasticbeanstalk/config/private/aws-eb.target to /etc/systemd/system/eb-app.target
2025/10/17 13:45:30.956850 [INFO] Running command: systemctl enable eb-app.target
2025/10/17 13:45:31.207170 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/eb-app.target → /etc/systemd/system/eb-app.target.

2025/10/17 13:45:31.207216 [INFO] Running command: systemctl start eb-app.target
2025/10/17 13:45:31.216567 [INFO] Running command: systemctl enable web.service
2025/10/17 13:45:31.455498 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/17 13:45:31.455529 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 13:45:31.466626 [INFO] Running command: systemctl is-active web.service
2025/10/17 13:45:31.475063 [INFO] Running command: systemctl start web.service
2025/10/17 13:45:31.573520 [INFO] Executing instruction: start X-Ray
2025/10/17 13:45:31.573541 [INFO] X-Ray is not enabled.
2025/10/17 13:45:31.573546 [INFO] Executing instruction: start proxy with new configuration
2025/10/17 13:45:31.573649 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/17 13:45:31.628862 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/17 13:45:31.629069 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/17 13:45:31.635202 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 13:45:31.656234 [INFO] Running command: systemctl daemon-reload
2025/10/17 13:45:31.942035 [INFO] Running command: systemctl reset-failed
2025/10/17 13:45:31.951349 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 13:45:31.965284 [INFO] Running command: systemctl is-active nginx.service
2025/10/17 13:45:31.975506 [INFO] Running command: systemctl start nginx.service
2025/10/17 13:45:32.089187 [INFO] Executing instruction: configureSqsd
2025/10/17 13:45:32.089206 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/17 13:45:32.089209 [INFO] Executing instruction: startSqsd
2025/10/17 13:45:32.089211 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/17 13:45:32.089214 [INFO] Executing instruction: Track pids in healthd
2025/10/17 13:45:32.089217 [INFO] This is an enhanced health env...
2025/10/17 13:45:32.089226 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/17 13:45:32.101705 [INFO] healthd.service nginx.service cfn-hup.service

2025/10/17 13:45:32.101733 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/17 13:45:32.113096 [INFO] web.service

2025/10/17 13:45:32.113313 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/17 13:45:32.113380 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/17 13:45:32.113394 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/17 13:45:32.113396 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/17 13:45:32.113400 [INFO] Executing cleanup logic
2025/10/17 13:45:32.113466 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760708727981,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760708732113,"severity":"INFO"}]}]}

2025/10/17 13:45:32.113601 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/17 14:13:14.327746 [INFO] Starting...
2025/10/17 14:13:14.327798 [INFO] Starting EBPlatform-PlatformEngine
2025/10/17 14:13:14.327819 [INFO] reading event message file
2025/10/17 14:13:14.328180 [INFO] Engine received EB command cfn-hup-exec

2025/10/17 14:13:14.394811 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 14:13:14.685125 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 14:13:14.971385 [INFO] checking whether command config-deploy is applicable to this instance...
2025/10/17 14:13:14.971398 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/17 14:13:14.971400 [INFO] Engine command: (config-deploy)

2025/10/17 14:13:14.971403 [INFO] Using manifest file name from command request
2025/10/17 14:13:14.971408 [INFO] Unable to get version manifest file.
2025/10/17 14:13:14.971410 [INFO] Downloading latest manifest available.
2025/10/17 14:13:14.971412 [INFO] Download latest app version manifest
2025/10/17 14:13:14.971544 [INFO] resources/environments/e-bp8pq6exat/_runtime/versions/manifest
2025/10/17 14:13:15.016950 [INFO] latestManifest key *: resources/environments/e-bp8pq6exat/_runtime/versions/manifest_1760710373749

2025/10/17 14:13:15.017266 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/versions/manifest_1760710373749, expected bucket owner: 433676943793
2025/10/17 14:13:15.063207 [INFO] Download successful150bytes downloaded
2025/10/17 14:13:15.063364 [INFO] Trying to read and parse version manifest...
2025/10/17 14:13:15.063533 [INFO] Executing instruction: stopSqsd
2025/10/17 14:13:15.063537 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/17 14:13:15.063539 [INFO] Executing instruction: StageApplication
2025/10/17 14:13:15.063542 [INFO] Recreating /var/app/staging/
2025/10/17 14:13:15.063602 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/17 14:13:15.063612 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/17 14:13:15.069405 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/17 14:13:15.070507 [INFO] Executing instruction: RunConfigDeployPreBuildHooks
2025/10/17 14:13:15.070526 [INFO] Executing platform hooks in .platform/confighooks/prebuild/
2025/10/17 14:13:15.070541 [INFO] The dir .platform/confighooks/prebuild/ does not exist
2025/10/17 14:13:15.070544 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/prebuild
2025/10/17 14:13:15.070548 [INFO] Executing instruction: InstallDependency
2025/10/17 14:13:15.070553 [INFO] checking dependencies file
2025/10/17 14:13:15.070564 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/17 14:13:15.070573 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/17 14:13:15.522894 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.25.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.25.2)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.16.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.0.9)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (3.11)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (4.67.1)

2025/10/17 14:13:15.522933 [INFO] Executing instruction: check Procfile
2025/10/17 14:13:15.522978 [INFO] detected Procfile in application source bundle ...
2025/10/17 14:13:15.522985 [INFO] Executing instruction: configure X-Ray
2025/10/17 14:13:15.522989 [INFO] X-Ray is not enabled.
2025/10/17 14:13:15.522992 [INFO] Executing instruction: configure proxy server
2025/10/17 14:13:15.523011 [INFO] Recreating /var/proxy/staging/nginx
2025/10/17 14:13:15.531612 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/17 14:13:15.533647 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 14:13:15.544852 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/17 14:13:15.544884 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 14:13:15.553834 [INFO] Running command: systemctl is-active healthd.service
2025/10/17 14:13:15.561737 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 14:13:15.571081 [INFO] Running command: systemctl stop healthd.service
2025/10/17 14:13:15.694637 [INFO] Running command: systemctl disable healthd.service
2025/10/17 14:13:15.942641 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/17 14:13:15.942804 [INFO] Running command: systemctl daemon-reload
2025/10/17 14:13:16.183492 [INFO] Running command: systemctl reset-failed
2025/10/17 14:13:16.245432 [INFO] Running command: systemctl daemon-reload
2025/10/17 14:13:16.526706 [INFO] Running command: systemctl reset-failed
2025/10/17 14:13:16.577281 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/17 14:13:16.586383 [INFO] Running command: systemctl enable aws-eb.target
2025/10/17 14:13:16.830511 [INFO] Running command: systemctl start aws-eb.target
2025/10/17 14:13:16.839578 [INFO] Running command: systemctl enable healthd.service
2025/10/17 14:13:17.124024 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/17 14:13:17.124059 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 14:13:17.135134 [INFO] Running command: systemctl is-active healthd.service
2025/10/17 14:13:17.142700 [INFO] Running command: systemctl start healthd.service
2025/10/17 14:13:17.238117 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/17 14:13:17.239299 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/17 14:13:17.240482 [INFO] Executing instruction: GetSetupProxyLog
2025/10/17 14:13:17.240635 [INFO] Executing instruction: configure log streaming
2025/10/17 14:13:17.240642 [INFO] log streaming is not enabled
2025/10/17 14:13:17.240646 [INFO] disable log stream
2025/10/17 14:13:17.240659 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/17 14:13:17.257866 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/17 14:13:17.274807 [INFO] Executing instruction: GetToggleForceRotate
2025/10/17 14:13:17.274830 [INFO] Checking if logs need forced rotation
2025/10/17 14:13:17.274849 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 14:13:17.713740 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 14:13:18.104579 [INFO] Generating rsyslog config from Procfile
2025/10/17 14:13:18.106813 [INFO] Running command: systemctl restart rsyslog.service
2025/10/17 14:13:18.268998 [INFO] Executing instruction: CleanEbExtensions
2025/10/17 14:13:18.269128 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/17 14:13:18.269134 [INFO] Executing instruction: RunConfigDeployPreDeployHooks
2025/10/17 14:13:18.269151 [INFO] Executing platform hooks in .platform/confighooks/predeploy/
2025/10/17 14:13:18.269171 [INFO] The dir .platform/confighooks/predeploy/ does not exist
2025/10/17 14:13:18.269175 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/predeploy
2025/10/17 14:13:18.269180 [INFO] Executing instruction: stop X-Ray
2025/10/17 14:13:18.269183 [INFO] stop X-Ray ...
2025/10/17 14:13:18.269195 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/17 14:13:18.289404 [WARN] stopProcess Warning: process xray is not registered 
2025/10/17 14:13:18.289439 [INFO] Running command: systemctl stop xray.service
2025/10/17 14:13:18.304719 [INFO] Executing instruction: stop proxy
2025/10/17 14:13:18.304747 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/17 14:13:18.318956 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/17 14:13:18.318988 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 14:13:18.330817 [INFO] Running command: systemctl is-active nginx.service
2025/10/17 14:13:18.338939 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 14:13:18.347665 [INFO] Running command: systemctl stop nginx.service
2025/10/17 14:13:18.527596 [INFO] Running command: systemctl disable nginx.service
2025/10/17 14:13:18.809473 [INFO] Running command: systemctl daemon-reload
2025/10/17 14:13:19.051165 [INFO] Running command: systemctl reset-failed
2025/10/17 14:13:19.059369 [INFO] Executing instruction: FlipApplication
2025/10/17 14:13:19.059394 [INFO] Fetching environment variables...
2025/10/17 14:13:19.059649 [INFO] Purge old process...
2025/10/17 14:13:19.059669 [INFO] Running command: systemctl stop eb-app.target
2025/10/17 14:13:19.068625 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/17 14:13:19.078615 [INFO] web.service

2025/10/17 14:13:19.078637 [INFO] deregistering process: web
2025/10/17 14:13:19.078646 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 14:13:19.089510 [INFO] Running command: systemctl is-active web.service
2025/10/17 14:13:19.097004 [INFO] Running command: systemctl disable web.service
2025/10/17 14:13:19.444197 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/17 14:13:19.444277 [INFO] Running command: systemctl daemon-reload
2025/10/17 14:13:19.816064 [INFO] Running command: systemctl reset-failed
2025/10/17 14:13:19.824349 [INFO] Running command: systemctl is-active web.service
2025/10/17 14:13:19.832104 [INFO] Process web has been fully terminated
2025/10/17 14:13:19.832118 [INFO] All processes have been fully terminated
2025/10/17 14:13:19.832122 [INFO] Removing /var/app/current/ if it exists
2025/10/17 14:13:19.833297 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/17 14:13:19.833321 [INFO] Register application processes...
2025/10/17 14:13:19.833325 [INFO] Registering the proc: web

2025/10/17 14:13:19.833337 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 14:13:19.844930 [INFO] Running command: systemctl daemon-reload
2025/10/17 14:13:20.088211 [INFO] Running command: systemctl reset-failed
2025/10/17 14:13:20.096741 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/17 14:13:20.104642 [INFO] Running command: systemctl enable eb-app.target
2025/10/17 14:13:20.347432 [INFO] Running command: systemctl start eb-app.target
2025/10/17 14:13:20.356274 [INFO] Running command: systemctl enable web.service
2025/10/17 14:13:20.609165 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/17 14:13:20.609200 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 14:13:20.619983 [INFO] Running command: systemctl is-active web.service
2025/10/17 14:13:20.627246 [INFO] Running command: systemctl start web.service
2025/10/17 14:13:20.675151 [INFO] Executing instruction: start X-Ray
2025/10/17 14:13:20.675170 [INFO] X-Ray is not enabled.
2025/10/17 14:13:20.675173 [INFO] Executing instruction: start proxy with new configuration
2025/10/17 14:13:20.675192 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/17 14:13:20.693762 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/17 14:13:20.693987 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/17 14:13:20.697074 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 14:13:20.713481 [INFO] Running command: systemctl daemon-reload
2025/10/17 14:13:20.972330 [INFO] Running command: systemctl reset-failed
2025/10/17 14:13:20.980424 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 14:13:20.994559 [INFO] Running command: systemctl is-active nginx.service
2025/10/17 14:13:21.004745 [INFO] Running command: systemctl start nginx.service
2025/10/17 14:13:21.130811 [INFO] Executing instruction: configureSqsd
2025/10/17 14:13:21.130826 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/17 14:13:21.130829 [INFO] Executing instruction: startSqsd
2025/10/17 14:13:21.130831 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/17 14:13:21.130834 [INFO] Executing instruction: Track pids in healthd
2025/10/17 14:13:21.130837 [INFO] This is an enhanced health env...
2025/10/17 14:13:21.130846 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/17 14:13:21.141369 [INFO] nginx.service cfn-hup.service healthd.service

2025/10/17 14:13:21.141400 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/17 14:13:21.151821 [INFO] web.service

2025/10/17 14:13:21.152050 [INFO] Executing instruction: RunConfigDeployPostDeployHooks
2025/10/17 14:13:21.152094 [INFO] Executing platform hooks in .platform/confighooks/postdeploy/
2025/10/17 14:13:21.152109 [INFO] The dir .platform/confighooks/postdeploy/ does not exist
2025/10/17 14:13:21.152111 [INFO] Finished running scripts in /var/app/current/.platform/confighooks/postdeploy
2025/10/17 14:13:21.152116 [INFO] Executing cleanup logic
2025/10/17 14:13:21.152185 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760710395522,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760710401152,"severity":"INFO"}]}]}

2025/10/17 14:13:21.152313 [INFO] Platform Engine finished execution on command: config-deploy

2025/10/17 14:28:25.584383 [INFO] Starting...
2025/10/17 14:28:25.584437 [INFO] Starting EBPlatform-PlatformEngine
2025/10/17 14:28:25.584458 [INFO] reading event message file
2025/10/17 14:28:25.584800 [INFO] Engine received EB command cfn-hup-exec

2025/10/17 14:28:25.653103 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 14:28:25.953352 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 14:28:26.252174 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/17 14:28:26.252196 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/17 14:28:26.252200 [INFO] Engine command: (app-deploy)

2025/10/17 14:28:26.252204 [INFO] Downloading EB Application...
2025/10/17 14:28:26.252206 [INFO] Region: us-east-1
2025/10/17 14:28:26.252208 [INFO] envID: e-bp8pq6exat
2025/10/17 14:28:26.252210 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/17 14:28:26.252212 [INFO] accountID: 433676943793
2025/10/17 14:28:26.252214 [INFO] Using manifest file name from command request
2025/10/17 14:28:26.252220 [INFO] Manifest name is : manifest_1760711302443
2025/10/17 14:28:26.252222 [INFO] Download app version manifest
2025/10/17 14:28:26.252424 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/versions/manifest_1760711302443, expected bucket owner: 433676943793
2025/10/17 14:28:26.291534 [INFO] Download successful109bytes downloaded
2025/10/17 14:28:26.291699 [INFO] Trying to read and parse version manifest...
2025/10/17 14:28:26.291772 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/_versions/mental-health-llm/app-251018_012815171242, expected bucket owner: 433676943793
2025/10/17 14:28:26.314042 [INFO] Download successful30017bytes downloaded
2025/10/17 14:28:26.314386 [INFO] Executing instruction: ElectLeader
2025/10/17 14:28:26.314393 [INFO] Running leader election for instance i-0d445e9a3d91a5047...
2025/10/17 14:28:26.314396 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/17 14:28:26.314407 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id e4d925e2-46fc-4036-8ecd-6686fc5565c1 --listener-id i-0d445e9a3d91a5047 --region us-east-1
2025/10/17 14:28:26.656624 [INFO] Instance is Leader.
2025/10/17 14:28:26.656686 [INFO] Executing instruction: stopSqsd
2025/10/17 14:28:26.656692 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/17 14:28:26.656697 [INFO] Executing instruction: PreBuildEbExtension
2025/10/17 14:28:26.656700 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/17 14:28:26.656716 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/17 14:28:26.971206 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/17 14:28:26.971229 [INFO] Executing instruction: StageApplication
2025/10/17 14:28:26.971233 [INFO] Recreating /var/app/staging/
2025/10/17 14:28:26.971343 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/17 14:28:26.971354 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/17 14:28:26.977095 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/17 14:28:26.978322 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/17 14:28:26.978343 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/17 14:28:26.978361 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/17 14:28:26.978365 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/17 14:28:26.978371 [INFO] Executing instruction: InstallDependency
2025/10/17 14:28:26.978376 [INFO] checking dependencies file
2025/10/17 14:28:26.978387 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/17 14:28:26.978395 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/17 14:28:27.430670 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.25.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.25.2)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.16.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.0.9)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (3.11)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (4.67.1)

2025/10/17 14:28:27.430704 [INFO] Executing instruction: check Procfile
2025/10/17 14:28:27.430749 [INFO] detected Procfile in application source bundle ...
2025/10/17 14:28:27.430755 [INFO] Executing instruction: configure X-Ray
2025/10/17 14:28:27.430759 [INFO] X-Ray is not enabled.
2025/10/17 14:28:27.430762 [INFO] Executing instruction: configure proxy server
2025/10/17 14:28:27.430779 [INFO] Recreating /var/proxy/staging/nginx
2025/10/17 14:28:27.441450 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/17 14:28:27.443864 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 14:28:27.455698 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/17 14:28:27.455730 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 14:28:27.465413 [INFO] Running command: systemctl is-active healthd.service
2025/10/17 14:28:27.473494 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 14:28:27.482849 [INFO] Running command: systemctl stop healthd.service
2025/10/17 14:28:27.584134 [INFO] Running command: systemctl disable healthd.service
2025/10/17 14:28:27.860672 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/17 14:28:27.860867 [INFO] Running command: systemctl daemon-reload
2025/10/17 14:28:28.091842 [INFO] Running command: systemctl reset-failed
2025/10/17 14:28:28.102933 [INFO] Running command: systemctl daemon-reload
2025/10/17 14:28:28.341337 [INFO] Running command: systemctl reset-failed
2025/10/17 14:28:28.349968 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/17 14:28:28.357742 [INFO] Running command: systemctl enable aws-eb.target
2025/10/17 14:28:28.598288 [INFO] Running command: systemctl start aws-eb.target
2025/10/17 14:28:28.607273 [INFO] Running command: systemctl enable healthd.service
2025/10/17 14:28:28.860981 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/17 14:28:28.861015 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 14:28:28.872364 [INFO] Running command: systemctl is-active healthd.service
2025/10/17 14:28:28.879949 [INFO] Running command: systemctl start healthd.service
2025/10/17 14:28:28.953865 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/17 14:28:28.955394 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/17 14:28:28.956615 [INFO] Executing instruction: configure log streaming
2025/10/17 14:28:28.956626 [INFO] log streaming is not enabled
2025/10/17 14:28:28.956630 [INFO] disable log stream
2025/10/17 14:28:28.956643 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/17 14:28:28.968938 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/17 14:28:28.981224 [INFO] Executing instruction: GetToggleForceRotate
2025/10/17 14:28:28.981245 [INFO] Checking if logs need forced rotation
2025/10/17 14:28:28.981262 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 14:28:29.317087 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 14:28:29.706842 [INFO] Generating rsyslog config from Procfile
2025/10/17 14:28:29.709158 [INFO] Running command: systemctl restart rsyslog.service
2025/10/17 14:28:29.827700 [INFO] Executing instruction: PostBuildEbExtension
2025/10/17 14:28:29.827765 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/17 14:28:29.827778 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/17 14:28:30.275128 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/17 14:28:30.275164 [INFO] Executing instruction: CleanEbExtensions
2025/10/17 14:28:30.275289 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/17 14:28:30.275294 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/17 14:28:30.275310 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/17 14:28:30.275328 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/17 14:28:30.275332 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/17 14:28:30.275337 [INFO] Executing instruction: stop X-Ray
2025/10/17 14:28:30.275340 [INFO] stop X-Ray ...
2025/10/17 14:28:30.275350 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/17 14:28:30.289010 [WARN] stopProcess Warning: process xray is not registered 
2025/10/17 14:28:30.289041 [INFO] Running command: systemctl stop xray.service
2025/10/17 14:28:30.304111 [INFO] Executing instruction: stop proxy
2025/10/17 14:28:30.304144 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/17 14:28:30.318742 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/17 14:28:30.318774 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 14:28:30.330613 [INFO] Running command: systemctl is-active nginx.service
2025/10/17 14:28:30.338686 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 14:28:30.348395 [INFO] Running command: systemctl stop nginx.service
2025/10/17 14:28:30.577460 [INFO] Running command: systemctl disable nginx.service
2025/10/17 14:28:30.823175 [INFO] Running command: systemctl daemon-reload
2025/10/17 14:28:31.059195 [INFO] Running command: systemctl reset-failed
2025/10/17 14:28:31.067360 [INFO] Executing instruction: FlipApplication
2025/10/17 14:28:31.067384 [INFO] Fetching environment variables...
2025/10/17 14:28:31.067578 [INFO] Purge old process...
2025/10/17 14:28:31.067599 [INFO] Running command: systemctl stop eb-app.target
2025/10/17 14:28:31.079364 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/17 14:28:31.090284 [INFO] web.service

2025/10/17 14:28:31.090308 [INFO] deregistering process: web
2025/10/17 14:28:31.090320 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 14:28:31.100592 [INFO] Running command: systemctl is-active web.service
2025/10/17 14:28:31.108009 [INFO] Running command: systemctl disable web.service
2025/10/17 14:28:31.408897 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/17 14:28:31.408982 [INFO] Running command: systemctl daemon-reload
2025/10/17 14:28:31.695228 [INFO] Running command: systemctl reset-failed
2025/10/17 14:28:31.727328 [INFO] Running command: systemctl is-active web.service
2025/10/17 14:28:31.735683 [INFO] Process web has been fully terminated
2025/10/17 14:28:31.735705 [INFO] All processes have been fully terminated
2025/10/17 14:28:31.735709 [INFO] Removing /var/app/current/ if it exists
2025/10/17 14:28:31.736724 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/17 14:28:31.736744 [INFO] Register application processes...
2025/10/17 14:28:31.736747 [INFO] Registering the proc: web

2025/10/17 14:28:31.736755 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 14:28:31.748746 [INFO] Running command: systemctl daemon-reload
2025/10/17 14:28:31.964995 [INFO] Running command: systemctl reset-failed
2025/10/17 14:28:31.972422 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/17 14:28:31.980038 [INFO] Running command: systemctl enable eb-app.target
2025/10/17 14:28:32.247780 [INFO] Running command: systemctl start eb-app.target
2025/10/17 14:28:32.256931 [INFO] Running command: systemctl enable web.service
2025/10/17 14:28:32.477254 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/17 14:28:32.477298 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 14:28:32.490025 [INFO] Running command: systemctl is-active web.service
2025/10/17 14:28:32.497210 [INFO] Running command: systemctl start web.service
2025/10/17 14:28:32.575772 [INFO] Executing instruction: start X-Ray
2025/10/17 14:28:32.575793 [INFO] X-Ray is not enabled.
2025/10/17 14:28:32.575797 [INFO] Executing instruction: start proxy with new configuration
2025/10/17 14:28:32.575821 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/17 14:28:32.601525 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/17 14:28:32.601866 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/17 14:28:32.606009 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 14:28:32.627919 [INFO] Running command: systemctl daemon-reload
2025/10/17 14:28:33.033709 [INFO] Running command: systemctl reset-failed
2025/10/17 14:28:33.045335 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 14:28:33.067043 [INFO] Running command: systemctl is-active nginx.service
2025/10/17 14:28:33.081578 [INFO] Running command: systemctl start nginx.service
2025/10/17 14:28:33.230267 [INFO] Executing instruction: configureSqsd
2025/10/17 14:28:33.230285 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/17 14:28:33.230289 [INFO] Executing instruction: startSqsd
2025/10/17 14:28:33.230292 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/17 14:28:33.230296 [INFO] Executing instruction: Track pids in healthd
2025/10/17 14:28:33.230300 [INFO] This is an enhanced health env...
2025/10/17 14:28:33.230327 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/17 14:28:33.246421 [INFO] cfn-hup.service healthd.service nginx.service

2025/10/17 14:28:33.246455 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/17 14:28:33.263012 [INFO] web.service

2025/10/17 14:28:33.263351 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/17 14:28:33.263372 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/17 14:28:33.263393 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/17 14:28:33.263396 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/17 14:28:33.263403 [INFO] Executing cleanup logic
2025/10/17 14:28:33.263493 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760711307430,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760711313263,"severity":"INFO"}]}]}

2025/10/17 14:28:33.264395 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/17 22:10:06.786957 [INFO] Starting...
2025/10/17 22:10:06.787004 [INFO] Starting EBPlatform-PlatformEngine
2025/10/17 22:10:06.787024 [INFO] reading event message file
2025/10/17 22:10:06.787352 [INFO] Engine received EB command cfn-hup-exec

2025/10/17 22:10:06.855926 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 22:10:07.152346 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 22:10:07.450277 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/17 22:10:07.450289 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/17 22:10:07.450292 [INFO] Engine command: (app-deploy)

2025/10/17 22:10:07.450295 [INFO] Downloading EB Application...
2025/10/17 22:10:07.450298 [INFO] Region: us-east-1
2025/10/17 22:10:07.450300 [INFO] envID: e-bp8pq6exat
2025/10/17 22:10:07.450302 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/17 22:10:07.450304 [INFO] accountID: 433676943793
2025/10/17 22:10:07.450306 [INFO] Using manifest file name from command request
2025/10/17 22:10:07.450312 [INFO] Manifest name is : manifest_1760739004181
2025/10/17 22:10:07.450314 [INFO] Download app version manifest
2025/10/17 22:10:07.450485 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/versions/manifest_1760739004181, expected bucket owner: 433676943793
2025/10/17 22:10:07.491896 [INFO] Download successful109bytes downloaded
2025/10/17 22:10:07.492026 [INFO] Trying to read and parse version manifest...
2025/10/17 22:10:07.492093 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/_versions/mental-health-llm/app-251018_090957163243, expected bucket owner: 433676943793
2025/10/17 22:10:07.512058 [INFO] Download successful30051bytes downloaded
2025/10/17 22:10:07.512334 [INFO] Executing instruction: ElectLeader
2025/10/17 22:10:07.512340 [INFO] Running leader election for instance i-0d445e9a3d91a5047...
2025/10/17 22:10:07.512343 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/17 22:10:07.512354 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 6d03ab43-9ff0-4ba3-a9d6-14835a52bced --listener-id i-0d445e9a3d91a5047 --region us-east-1
2025/10/17 22:10:07.864398 [INFO] Instance is Leader.
2025/10/17 22:10:07.864443 [INFO] Executing instruction: stopSqsd
2025/10/17 22:10:07.864459 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/17 22:10:07.864462 [INFO] Executing instruction: PreBuildEbExtension
2025/10/17 22:10:07.864465 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/17 22:10:07.864478 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/17 22:10:08.200415 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/17 22:10:08.200439 [INFO] Executing instruction: StageApplication
2025/10/17 22:10:08.200443 [INFO] Recreating /var/app/staging/
2025/10/17 22:10:08.200553 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/17 22:10:08.200564 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/17 22:10:08.206218 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/17 22:10:08.207188 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/17 22:10:08.207207 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/17 22:10:08.207223 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/17 22:10:08.207225 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/17 22:10:08.207233 [INFO] Executing instruction: InstallDependency
2025/10/17 22:10:08.207237 [INFO] checking dependencies file
2025/10/17 22:10:08.207249 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/17 22:10:08.207259 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/17 22:10:08.675065 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.25.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.25.2)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.16.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.0.9)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (3.11)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (4.67.1)

2025/10/17 22:10:08.675092 [INFO] Executing instruction: check Procfile
2025/10/17 22:10:08.675133 [INFO] detected Procfile in application source bundle ...
2025/10/17 22:10:08.675148 [INFO] Executing instruction: configure X-Ray
2025/10/17 22:10:08.675152 [INFO] X-Ray is not enabled.
2025/10/17 22:10:08.675155 [INFO] Executing instruction: configure proxy server
2025/10/17 22:10:08.675171 [INFO] Recreating /var/proxy/staging/nginx
2025/10/17 22:10:08.684970 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/17 22:10:08.687044 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:10:08.800640 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/17 22:10:08.800675 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:10:08.815345 [INFO] Running command: systemctl is-active healthd.service
2025/10/17 22:10:08.826468 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:10:08.840544 [INFO] Running command: systemctl stop healthd.service
2025/10/17 22:10:08.984628 [INFO] Running command: systemctl disable healthd.service
2025/10/17 22:10:09.250044 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/17 22:10:09.250234 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:10:09.489170 [INFO] Running command: systemctl reset-failed
2025/10/17 22:10:09.500693 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:10:09.718628 [INFO] Running command: systemctl reset-failed
2025/10/17 22:10:09.726268 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/17 22:10:09.733919 [INFO] Running command: systemctl enable aws-eb.target
2025/10/17 22:10:09.968358 [INFO] Running command: systemctl start aws-eb.target
2025/10/17 22:10:09.977430 [INFO] Running command: systemctl enable healthd.service
2025/10/17 22:10:10.199600 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/17 22:10:10.199627 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:10:10.210541 [INFO] Running command: systemctl is-active healthd.service
2025/10/17 22:10:10.217891 [INFO] Running command: systemctl start healthd.service
2025/10/17 22:10:10.267983 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/17 22:10:10.269003 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/17 22:10:10.270079 [INFO] Executing instruction: configure log streaming
2025/10/17 22:10:10.270087 [INFO] log streaming is not enabled
2025/10/17 22:10:10.270089 [INFO] disable log stream
2025/10/17 22:10:10.270097 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/17 22:10:10.288559 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/17 22:10:10.304357 [INFO] Executing instruction: GetToggleForceRotate
2025/10/17 22:10:10.304381 [INFO] Checking if logs need forced rotation
2025/10/17 22:10:10.304396 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 22:10:10.744678 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 22:10:11.119920 [INFO] Generating rsyslog config from Procfile
2025/10/17 22:10:11.122100 [INFO] Running command: systemctl restart rsyslog.service
2025/10/17 22:10:11.229247 [INFO] Executing instruction: PostBuildEbExtension
2025/10/17 22:10:11.229273 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/17 22:10:11.229283 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/17 22:10:11.624529 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/17 22:10:11.624553 [INFO] Executing instruction: CleanEbExtensions
2025/10/17 22:10:11.624671 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/17 22:10:11.624675 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/17 22:10:11.624689 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/17 22:10:11.624705 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/17 22:10:11.624708 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/17 22:10:11.624712 [INFO] Executing instruction: stop X-Ray
2025/10/17 22:10:11.624714 [INFO] stop X-Ray ...
2025/10/17 22:10:11.624723 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/17 22:10:11.637516 [WARN] stopProcess Warning: process xray is not registered 
2025/10/17 22:10:11.637542 [INFO] Running command: systemctl stop xray.service
2025/10/17 22:10:11.649233 [INFO] Executing instruction: stop proxy
2025/10/17 22:10:11.649259 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/17 22:10:11.661141 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/17 22:10:11.661169 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:10:11.672405 [INFO] Running command: systemctl is-active nginx.service
2025/10/17 22:10:11.679848 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:10:11.688650 [INFO] Running command: systemctl stop nginx.service
2025/10/17 22:10:11.866883 [INFO] Running command: systemctl disable nginx.service
2025/10/17 22:10:12.087815 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:10:12.301353 [INFO] Running command: systemctl reset-failed
2025/10/17 22:10:12.309156 [INFO] Executing instruction: FlipApplication
2025/10/17 22:10:12.309176 [INFO] Fetching environment variables...
2025/10/17 22:10:12.309352 [INFO] Purge old process...
2025/10/17 22:10:12.309372 [INFO] Running command: systemctl stop eb-app.target
2025/10/17 22:10:12.318651 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/17 22:10:12.328454 [INFO] web.service

2025/10/17 22:10:12.328474 [INFO] deregistering process: web
2025/10/17 22:10:12.328484 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 22:10:12.338517 [INFO] Running command: systemctl is-active web.service
2025/10/17 22:10:12.346516 [INFO] Running command: systemctl disable web.service
2025/10/17 22:10:12.624651 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/17 22:10:12.624740 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:10:12.888628 [INFO] Running command: systemctl reset-failed
2025/10/17 22:10:12.938279 [INFO] Running command: systemctl is-active web.service
2025/10/17 22:10:12.946430 [INFO] Process web has been fully terminated
2025/10/17 22:10:12.946453 [INFO] All processes have been fully terminated
2025/10/17 22:10:12.946457 [INFO] Removing /var/app/current/ if it exists
2025/10/17 22:10:12.947626 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/17 22:10:12.947647 [INFO] Register application processes...
2025/10/17 22:10:12.947650 [INFO] Registering the proc: web

2025/10/17 22:10:12.947658 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 22:10:12.959470 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:10:13.196622 [INFO] Running command: systemctl reset-failed
2025/10/17 22:10:13.204910 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/17 22:10:13.212443 [INFO] Running command: systemctl enable eb-app.target
2025/10/17 22:10:13.447169 [INFO] Running command: systemctl start eb-app.target
2025/10/17 22:10:13.456279 [INFO] Running command: systemctl enable web.service
2025/10/17 22:10:13.696656 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/17 22:10:13.696692 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 22:10:13.707471 [INFO] Running command: systemctl is-active web.service
2025/10/17 22:10:13.714929 [INFO] Running command: systemctl start web.service
2025/10/17 22:10:13.787461 [INFO] Executing instruction: start X-Ray
2025/10/17 22:10:13.787478 [INFO] X-Ray is not enabled.
2025/10/17 22:10:13.787481 [INFO] Executing instruction: start proxy with new configuration
2025/10/17 22:10:13.787498 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/17 22:10:13.804577 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/17 22:10:13.804826 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/17 22:10:13.807544 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:10:13.823445 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:10:14.198973 [INFO] Running command: systemctl reset-failed
2025/10/17 22:10:14.211641 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:10:14.234244 [INFO] Running command: systemctl is-active nginx.service
2025/10/17 22:10:14.249845 [INFO] Running command: systemctl start nginx.service
2025/10/17 22:10:14.406442 [INFO] Executing instruction: configureSqsd
2025/10/17 22:10:14.406465 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/17 22:10:14.406473 [INFO] Executing instruction: startSqsd
2025/10/17 22:10:14.406476 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/17 22:10:14.406479 [INFO] Executing instruction: Track pids in healthd
2025/10/17 22:10:14.406482 [INFO] This is an enhanced health env...
2025/10/17 22:10:14.406495 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/17 22:10:14.423472 [INFO] nginx.service healthd.service cfn-hup.service

2025/10/17 22:10:14.423506 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/17 22:10:14.438318 [INFO] web.service

2025/10/17 22:10:14.438651 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/17 22:10:14.438673 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/17 22:10:14.438696 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/17 22:10:14.438699 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/17 22:10:14.438705 [INFO] Executing cleanup logic
2025/10/17 22:10:14.438796 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760739008675,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760739014438,"severity":"INFO"}]}]}

2025/10/17 22:10:14.439934 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/17 22:17:39.550324 [INFO] Starting...
2025/10/17 22:17:39.550381 [INFO] Starting EBPlatform-PlatformEngine
2025/10/17 22:17:39.550405 [INFO] reading event message file
2025/10/17 22:17:39.550882 [INFO] Engine received EB command cfn-hup-exec

2025/10/17 22:17:39.613243 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 22:17:39.910596 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 22:17:40.209553 [INFO] checking whether command tail-log is applicable to this instance...
2025/10/17 22:17:40.209677 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/17 22:17:40.209680 [INFO] Engine command: (tail-log)

2025/10/17 22:17:40.209729 [INFO] Executing instruction: GetTailLogs
2025/10/17 22:17:40.209732 [INFO] Tail Logs...
2025/10/17 22:17:40.210229 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2025/10/17 22:17:40.212320 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2025/10/17 22:17:40.214199 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2025/10/17 22:17:40.215895 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2025/10/17 22:17:40.217720 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2025/10/17 22:17:40.294220 [INFO] Executing cleanup logic
2025/10/17 22:17:40.294299 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1760739460294,"severity":"INFO"}]}]}

2025/10/17 22:17:40.294316 [INFO] Platform Engine finished execution on command: tail-log

2025/10/17 22:23:04.408096 [INFO] Starting...
2025/10/17 22:23:04.408150 [INFO] Starting EBPlatform-PlatformEngine
2025/10/17 22:23:04.408171 [INFO] reading event message file
2025/10/17 22:23:04.408926 [INFO] Engine received EB command cfn-hup-exec

2025/10/17 22:23:04.486197 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 22:23:04.792006 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 22:23:05.096919 [INFO] checking whether command config-deploy is applicable to this instance...
2025/10/17 22:23:05.096929 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/17 22:23:05.096932 [INFO] Engine command: (config-deploy)

2025/10/17 22:23:05.096935 [INFO] Using manifest file name from command request
2025/10/17 22:23:05.096940 [INFO] Unable to get version manifest file.
2025/10/17 22:23:05.096951 [INFO] Downloading latest manifest available.
2025/10/17 22:23:05.096953 [INFO] Download latest app version manifest
2025/10/17 22:23:05.097089 [INFO] resources/environments/e-bp8pq6exat/_runtime/versions/manifest
2025/10/17 22:23:05.140762 [INFO] latestManifest key *: resources/environments/e-bp8pq6exat/_runtime/versions/manifest_1760739763212

2025/10/17 22:23:05.140969 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/versions/manifest_1760739763212, expected bucket owner: 433676943793
2025/10/17 22:23:05.183011 [INFO] Download successful150bytes downloaded
2025/10/17 22:23:05.183153 [INFO] Trying to read and parse version manifest...
2025/10/17 22:23:05.183317 [INFO] Executing instruction: stopSqsd
2025/10/17 22:23:05.183321 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/17 22:23:05.183324 [INFO] Executing instruction: StageApplication
2025/10/17 22:23:05.183326 [INFO] Recreating /var/app/staging/
2025/10/17 22:23:05.183387 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/17 22:23:05.183399 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/17 22:23:05.189186 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/17 22:23:05.190377 [INFO] Executing instruction: RunConfigDeployPreBuildHooks
2025/10/17 22:23:05.190397 [INFO] Executing platform hooks in .platform/confighooks/prebuild/
2025/10/17 22:23:05.190418 [INFO] The dir .platform/confighooks/prebuild/ does not exist
2025/10/17 22:23:05.190420 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/prebuild
2025/10/17 22:23:05.190424 [INFO] Executing instruction: InstallDependency
2025/10/17 22:23:05.190429 [INFO] checking dependencies file
2025/10/17 22:23:05.190440 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/17 22:23:05.190448 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/17 22:23:05.639533 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.25.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.25.2)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.16.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.0.9)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (3.11)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (4.67.1)

2025/10/17 22:23:05.639567 [INFO] Executing instruction: check Procfile
2025/10/17 22:23:05.639610 [INFO] detected Procfile in application source bundle ...
2025/10/17 22:23:05.639617 [INFO] Executing instruction: configure X-Ray
2025/10/17 22:23:05.639621 [INFO] X-Ray is not enabled.
2025/10/17 22:23:05.639623 [INFO] Executing instruction: configure proxy server
2025/10/17 22:23:05.639638 [INFO] Recreating /var/proxy/staging/nginx
2025/10/17 22:23:05.648393 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/17 22:23:05.650493 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:23:05.662765 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/17 22:23:05.662799 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:23:05.671675 [INFO] Running command: systemctl is-active healthd.service
2025/10/17 22:23:05.679768 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:23:05.688944 [INFO] Running command: systemctl stop healthd.service
2025/10/17 22:23:05.824455 [INFO] Running command: systemctl disable healthd.service
2025/10/17 22:23:06.075658 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/17 22:23:06.075884 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:23:06.322220 [INFO] Running command: systemctl reset-failed
2025/10/17 22:23:06.332927 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:23:06.568234 [INFO] Running command: systemctl reset-failed
2025/10/17 22:23:06.576755 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/17 22:23:06.584491 [INFO] Running command: systemctl enable aws-eb.target
2025/10/17 22:23:06.850243 [INFO] Running command: systemctl start aws-eb.target
2025/10/17 22:23:06.859241 [INFO] Running command: systemctl enable healthd.service
2025/10/17 22:23:07.111265 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/17 22:23:07.111301 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:23:07.122664 [INFO] Running command: systemctl is-active healthd.service
2025/10/17 22:23:07.130681 [INFO] Running command: systemctl start healthd.service
2025/10/17 22:23:07.191663 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/17 22:23:07.192856 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/17 22:23:07.193984 [INFO] Executing instruction: GetSetupProxyLog
2025/10/17 22:23:07.194137 [INFO] Executing instruction: configure log streaming
2025/10/17 22:23:07.194144 [INFO] log streaming is not enabled
2025/10/17 22:23:07.194148 [INFO] disable log stream
2025/10/17 22:23:07.194162 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/17 22:23:07.208996 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/17 22:23:07.226093 [INFO] Executing instruction: GetToggleForceRotate
2025/10/17 22:23:07.226118 [INFO] Checking if logs need forced rotation
2025/10/17 22:23:07.226132 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 22:23:07.659080 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 22:23:08.061069 [INFO] Generating rsyslog config from Procfile
2025/10/17 22:23:08.063325 [INFO] Running command: systemctl restart rsyslog.service
2025/10/17 22:23:08.188797 [INFO] Executing instruction: CleanEbExtensions
2025/10/17 22:23:08.188938 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/17 22:23:08.188948 [INFO] Executing instruction: RunConfigDeployPreDeployHooks
2025/10/17 22:23:08.188961 [INFO] Executing platform hooks in .platform/confighooks/predeploy/
2025/10/17 22:23:08.188977 [INFO] The dir .platform/confighooks/predeploy/ does not exist
2025/10/17 22:23:08.188980 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/predeploy
2025/10/17 22:23:08.188984 [INFO] Executing instruction: stop X-Ray
2025/10/17 22:23:08.188986 [INFO] stop X-Ray ...
2025/10/17 22:23:08.188998 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/17 22:23:08.201604 [WARN] stopProcess Warning: process xray is not registered 
2025/10/17 22:23:08.201642 [INFO] Running command: systemctl stop xray.service
2025/10/17 22:23:08.213882 [INFO] Executing instruction: stop proxy
2025/10/17 22:23:08.213907 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/17 22:23:08.225969 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/17 22:23:08.225994 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:23:08.237349 [INFO] Running command: systemctl is-active nginx.service
2025/10/17 22:23:08.244694 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:23:08.253681 [INFO] Running command: systemctl stop nginx.service
2025/10/17 22:23:08.416993 [INFO] Running command: systemctl disable nginx.service
2025/10/17 22:23:08.639517 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:23:08.858956 [INFO] Running command: systemctl reset-failed
2025/10/17 22:23:08.867529 [INFO] Executing instruction: FlipApplication
2025/10/17 22:23:08.867553 [INFO] Fetching environment variables...
2025/10/17 22:23:08.867759 [INFO] Purge old process...
2025/10/17 22:23:08.867782 [INFO] Running command: systemctl stop eb-app.target
2025/10/17 22:23:08.877234 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/17 22:23:08.887759 [INFO] web.service

2025/10/17 22:23:08.887778 [INFO] deregistering process: web
2025/10/17 22:23:08.887788 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 22:23:08.898458 [INFO] Running command: systemctl is-active web.service
2025/10/17 22:23:08.905508 [INFO] Running command: systemctl disable web.service
2025/10/17 22:23:09.192132 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/17 22:23:09.192225 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:23:09.458149 [INFO] Running command: systemctl reset-failed
2025/10/17 22:23:09.508277 [INFO] Running command: systemctl is-active web.service
2025/10/17 22:23:09.516285 [INFO] Process web has been fully terminated
2025/10/17 22:23:09.516309 [INFO] All processes have been fully terminated
2025/10/17 22:23:09.516314 [INFO] Removing /var/app/current/ if it exists
2025/10/17 22:23:09.517359 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/17 22:23:09.517382 [INFO] Register application processes...
2025/10/17 22:23:09.517386 [INFO] Registering the proc: web

2025/10/17 22:23:09.517393 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 22:23:09.528998 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:23:09.768322 [INFO] Running command: systemctl reset-failed
2025/10/17 22:23:09.776874 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/17 22:23:09.784598 [INFO] Running command: systemctl enable eb-app.target
2025/10/17 22:23:10.019314 [INFO] Running command: systemctl start eb-app.target
2025/10/17 22:23:10.028520 [INFO] Running command: systemctl enable web.service
2025/10/17 22:23:10.267151 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/17 22:23:10.267178 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 22:23:10.277991 [INFO] Running command: systemctl is-active web.service
2025/10/17 22:23:10.285124 [INFO] Running command: systemctl start web.service
2025/10/17 22:23:10.382423 [INFO] Executing instruction: start X-Ray
2025/10/17 22:23:10.382452 [INFO] X-Ray is not enabled.
2025/10/17 22:23:10.382456 [INFO] Executing instruction: start proxy with new configuration
2025/10/17 22:23:10.382499 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/17 22:23:10.408929 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/17 22:23:10.409244 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/17 22:23:10.412976 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:23:10.434848 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:23:10.844977 [INFO] Running command: systemctl reset-failed
2025/10/17 22:23:10.858274 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:23:10.878816 [INFO] Running command: systemctl is-active nginx.service
2025/10/17 22:23:10.892875 [INFO] Running command: systemctl start nginx.service
2025/10/17 22:23:11.049674 [INFO] Executing instruction: configureSqsd
2025/10/17 22:23:11.049695 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/17 22:23:11.049699 [INFO] Executing instruction: startSqsd
2025/10/17 22:23:11.049703 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/17 22:23:11.049706 [INFO] Executing instruction: Track pids in healthd
2025/10/17 22:23:11.049710 [INFO] This is an enhanced health env...
2025/10/17 22:23:11.049722 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/17 22:23:11.065460 [INFO] nginx.service cfn-hup.service healthd.service

2025/10/17 22:23:11.065494 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/17 22:23:11.081463 [INFO] web.service

2025/10/17 22:23:11.081817 [INFO] Executing instruction: RunConfigDeployPostDeployHooks
2025/10/17 22:23:11.081879 [INFO] Executing platform hooks in .platform/confighooks/postdeploy/
2025/10/17 22:23:11.081903 [INFO] The dir .platform/confighooks/postdeploy/ does not exist
2025/10/17 22:23:11.081908 [INFO] Finished running scripts in /var/app/current/.platform/confighooks/postdeploy
2025/10/17 22:23:11.081915 [INFO] Executing cleanup logic
2025/10/17 22:23:11.082008 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760739785639,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760739791081,"severity":"INFO"}]}]}

2025/10/17 22:23:11.082940 [INFO] Platform Engine finished execution on command: config-deploy

2025/10/17 22:30:14.830194 [INFO] Starting...
2025/10/17 22:30:14.830238 [INFO] Starting EBPlatform-PlatformEngine
2025/10/17 22:30:14.830257 [INFO] reading event message file
2025/10/17 22:30:14.830574 [INFO] Engine received EB command cfn-hup-exec

2025/10/17 22:30:14.901864 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 22:30:15.207354 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 22:30:15.504751 [INFO] checking whether command config-deploy is applicable to this instance...
2025/10/17 22:30:15.504763 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/17 22:30:15.504766 [INFO] Engine command: (config-deploy)

2025/10/17 22:30:15.504775 [INFO] Using manifest file name from command request
2025/10/17 22:30:15.504781 [INFO] Unable to get version manifest file.
2025/10/17 22:30:15.504784 [INFO] Downloading latest manifest available.
2025/10/17 22:30:15.504787 [INFO] Download latest app version manifest
2025/10/17 22:30:15.504924 [INFO] resources/environments/e-bp8pq6exat/_runtime/versions/manifest
2025/10/17 22:30:15.546267 [INFO] latestManifest key *: resources/environments/e-bp8pq6exat/_runtime/versions/manifest_1760740193805

2025/10/17 22:30:15.546476 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/versions/manifest_1760740193805, expected bucket owner: 433676943793
2025/10/17 22:30:15.586048 [INFO] Download successful150bytes downloaded
2025/10/17 22:30:15.586187 [INFO] Trying to read and parse version manifest...
2025/10/17 22:30:15.586351 [INFO] Executing instruction: stopSqsd
2025/10/17 22:30:15.586357 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/17 22:30:15.586361 [INFO] Executing instruction: StageApplication
2025/10/17 22:30:15.586364 [INFO] Recreating /var/app/staging/
2025/10/17 22:30:15.586425 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/17 22:30:15.586434 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/17 22:30:15.592365 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/17 22:30:15.593437 [INFO] Executing instruction: RunConfigDeployPreBuildHooks
2025/10/17 22:30:15.593459 [INFO] Executing platform hooks in .platform/confighooks/prebuild/
2025/10/17 22:30:15.593476 [INFO] The dir .platform/confighooks/prebuild/ does not exist
2025/10/17 22:30:15.593479 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/prebuild
2025/10/17 22:30:15.593483 [INFO] Executing instruction: InstallDependency
2025/10/17 22:30:15.593487 [INFO] checking dependencies file
2025/10/17 22:30:15.593497 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/17 22:30:15.593506 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/17 22:30:16.041176 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.25.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.25.2)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.16.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.0.9)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (3.11)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (4.67.1)

2025/10/17 22:30:16.041222 [INFO] Executing instruction: check Procfile
2025/10/17 22:30:16.041526 [INFO] detected Procfile in application source bundle ...
2025/10/17 22:30:16.041534 [INFO] Executing instruction: configure X-Ray
2025/10/17 22:30:16.041539 [INFO] X-Ray is not enabled.
2025/10/17 22:30:16.041542 [INFO] Executing instruction: configure proxy server
2025/10/17 22:30:16.041601 [INFO] Recreating /var/proxy/staging/nginx
2025/10/17 22:30:16.051950 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/17 22:30:16.054214 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:30:16.065108 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/17 22:30:16.065132 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:30:16.073638 [INFO] Running command: systemctl is-active healthd.service
2025/10/17 22:30:16.080901 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:30:16.089498 [INFO] Running command: systemctl stop healthd.service
2025/10/17 22:30:16.163987 [INFO] Running command: systemctl disable healthd.service
2025/10/17 22:30:16.481239 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/17 22:30:16.481412 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:30:16.719808 [INFO] Running command: systemctl reset-failed
2025/10/17 22:30:16.730715 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:30:16.970504 [INFO] Running command: systemctl reset-failed
2025/10/17 22:30:16.978714 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/17 22:30:16.986838 [INFO] Running command: systemctl enable aws-eb.target
2025/10/17 22:30:17.231201 [INFO] Running command: systemctl start aws-eb.target
2025/10/17 22:30:17.240090 [INFO] Running command: systemctl enable healthd.service
2025/10/17 22:30:17.478565 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/17 22:30:17.478598 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:30:17.489327 [INFO] Running command: systemctl is-active healthd.service
2025/10/17 22:30:17.497355 [INFO] Running command: systemctl start healthd.service
2025/10/17 22:30:17.554291 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/17 22:30:17.555387 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/17 22:30:17.556461 [INFO] Executing instruction: GetSetupProxyLog
2025/10/17 22:30:17.556570 [INFO] Executing instruction: configure log streaming
2025/10/17 22:30:17.556574 [INFO] log streaming is not enabled
2025/10/17 22:30:17.556577 [INFO] disable log stream
2025/10/17 22:30:17.556586 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/17 22:30:17.570244 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/17 22:30:17.582187 [INFO] Executing instruction: GetToggleForceRotate
2025/10/17 22:30:17.582209 [INFO] Checking if logs need forced rotation
2025/10/17 22:30:17.582223 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 22:30:17.907339 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 22:30:18.281139 [INFO] Generating rsyslog config from Procfile
2025/10/17 22:30:18.283221 [INFO] Running command: systemctl restart rsyslog.service
2025/10/17 22:30:18.409297 [INFO] Executing instruction: CleanEbExtensions
2025/10/17 22:30:18.409848 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/17 22:30:18.409857 [INFO] Executing instruction: RunConfigDeployPreDeployHooks
2025/10/17 22:30:18.409874 [INFO] Executing platform hooks in .platform/confighooks/predeploy/
2025/10/17 22:30:18.409898 [INFO] The dir .platform/confighooks/predeploy/ does not exist
2025/10/17 22:30:18.409902 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/predeploy
2025/10/17 22:30:18.409906 [INFO] Executing instruction: stop X-Ray
2025/10/17 22:30:18.409908 [INFO] stop X-Ray ...
2025/10/17 22:30:18.409918 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/17 22:30:18.422119 [WARN] stopProcess Warning: process xray is not registered 
2025/10/17 22:30:18.422145 [INFO] Running command: systemctl stop xray.service
2025/10/17 22:30:18.434293 [INFO] Executing instruction: stop proxy
2025/10/17 22:30:18.434316 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/17 22:30:18.447266 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/17 22:30:18.447295 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:30:18.458848 [INFO] Running command: systemctl is-active nginx.service
2025/10/17 22:30:18.466070 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:30:18.475397 [INFO] Running command: systemctl stop nginx.service
2025/10/17 22:30:18.740221 [INFO] Running command: systemctl disable nginx.service
2025/10/17 22:30:18.991995 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:30:19.229293 [INFO] Running command: systemctl reset-failed
2025/10/17 22:30:19.237464 [INFO] Executing instruction: FlipApplication
2025/10/17 22:30:19.237490 [INFO] Fetching environment variables...
2025/10/17 22:30:19.237744 [INFO] Purge old process...
2025/10/17 22:30:19.237769 [INFO] Running command: systemctl stop eb-app.target
2025/10/17 22:30:19.247857 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/17 22:30:19.258785 [INFO] web.service

2025/10/17 22:30:19.258805 [INFO] deregistering process: web
2025/10/17 22:30:19.258814 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 22:30:19.268645 [INFO] Running command: systemctl is-active web.service
2025/10/17 22:30:19.276277 [INFO] Running command: systemctl disable web.service
2025/10/17 22:30:19.602058 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/17 22:30:19.602137 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:30:19.928809 [INFO] Running command: systemctl reset-failed
2025/10/17 22:30:19.936581 [INFO] Running command: systemctl is-active web.service
2025/10/17 22:30:19.944527 [INFO] Process web has been fully terminated
2025/10/17 22:30:19.944552 [INFO] All processes have been fully terminated
2025/10/17 22:30:19.944556 [INFO] Removing /var/app/current/ if it exists
2025/10/17 22:30:19.945704 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/17 22:30:19.945728 [INFO] Register application processes...
2025/10/17 22:30:19.945732 [INFO] Registering the proc: web

2025/10/17 22:30:19.945740 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 22:30:19.957443 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:30:20.198824 [INFO] Running command: systemctl reset-failed
2025/10/17 22:30:20.207366 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/17 22:30:20.215336 [INFO] Running command: systemctl enable eb-app.target
2025/10/17 22:30:20.446227 [INFO] Running command: systemctl start eb-app.target
2025/10/17 22:30:20.455556 [INFO] Running command: systemctl enable web.service
2025/10/17 22:30:20.690725 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/17 22:30:20.690761 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 22:30:20.701951 [INFO] Running command: systemctl is-active web.service
2025/10/17 22:30:20.709342 [INFO] Running command: systemctl start web.service
2025/10/17 22:30:20.764430 [INFO] Executing instruction: start X-Ray
2025/10/17 22:30:20.764467 [INFO] X-Ray is not enabled.
2025/10/17 22:30:20.764472 [INFO] Executing instruction: start proxy with new configuration
2025/10/17 22:30:20.764498 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/17 22:30:20.790735 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/17 22:30:20.790987 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/17 22:30:20.794793 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:30:20.816729 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:30:21.225685 [INFO] Running command: systemctl reset-failed
2025/10/17 22:30:21.237391 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:30:21.260861 [INFO] Running command: systemctl is-active nginx.service
2025/10/17 22:30:21.276811 [INFO] Running command: systemctl start nginx.service
2025/10/17 22:30:21.407792 [INFO] Executing instruction: configureSqsd
2025/10/17 22:30:21.407810 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/17 22:30:21.407814 [INFO] Executing instruction: startSqsd
2025/10/17 22:30:21.407817 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/17 22:30:21.407821 [INFO] Executing instruction: Track pids in healthd
2025/10/17 22:30:21.407825 [INFO] This is an enhanced health env...
2025/10/17 22:30:21.407838 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/17 22:30:21.425483 [INFO] cfn-hup.service nginx.service healthd.service

2025/10/17 22:30:21.425519 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/17 22:30:21.441941 [INFO] web.service

2025/10/17 22:30:21.442284 [INFO] Executing instruction: RunConfigDeployPostDeployHooks
2025/10/17 22:30:21.442308 [INFO] Executing platform hooks in .platform/confighooks/postdeploy/
2025/10/17 22:30:21.442336 [INFO] The dir .platform/confighooks/postdeploy/ does not exist
2025/10/17 22:30:21.442341 [INFO] Finished running scripts in /var/app/current/.platform/confighooks/postdeploy
2025/10/17 22:30:21.442348 [INFO] Executing cleanup logic
2025/10/17 22:30:21.442441 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760740216041,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760740221442,"severity":"INFO"}]}]}

2025/10/17 22:30:21.442626 [INFO] Platform Engine finished execution on command: config-deploy

2025/10/17 22:32:13.290820 [INFO] Starting...
2025/10/17 22:32:13.290873 [INFO] Starting EBPlatform-PlatformEngine
2025/10/17 22:32:13.290895 [INFO] reading event message file
2025/10/17 22:32:13.291295 [INFO] Engine received EB command cfn-hup-exec

2025/10/17 22:32:13.361405 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 22:32:13.655239 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 22:32:13.971241 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/17 22:32:13.971257 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/17 22:32:13.971262 [INFO] Engine command: (app-deploy)

2025/10/17 22:32:13.971266 [INFO] Downloading EB Application...
2025/10/17 22:32:13.971268 [INFO] Region: us-east-1
2025/10/17 22:32:13.971270 [INFO] envID: e-bp8pq6exat
2025/10/17 22:32:13.971272 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/17 22:32:13.971274 [INFO] accountID: 433676943793
2025/10/17 22:32:13.971277 [INFO] Using manifest file name from command request
2025/10/17 22:32:13.971282 [INFO] Manifest name is : manifest_1760740330650
2025/10/17 22:32:13.971284 [INFO] Download app version manifest
2025/10/17 22:32:13.971474 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/versions/manifest_1760740330650, expected bucket owner: 433676943793
2025/10/17 22:32:14.009374 [INFO] Download successful109bytes downloaded
2025/10/17 22:32:14.009502 [INFO] Trying to read and parse version manifest...
2025/10/17 22:32:14.009642 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/_versions/mental-health-llm/app-251018_093203481292, expected bucket owner: 433676943793
2025/10/17 22:32:14.031673 [INFO] Download successful30050bytes downloaded
2025/10/17 22:32:14.031953 [INFO] Executing instruction: ElectLeader
2025/10/17 22:32:14.031959 [INFO] Running leader election for instance i-0d445e9a3d91a5047...
2025/10/17 22:32:14.031962 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/17 22:32:14.031972 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 45cbae44-1750-4dbf-a6e9-b5222ec7e5aa --listener-id i-0d445e9a3d91a5047 --region us-east-1
2025/10/17 22:32:14.323609 [INFO] Instance is Leader.
2025/10/17 22:32:14.323663 [INFO] Executing instruction: stopSqsd
2025/10/17 22:32:14.323669 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/17 22:32:14.323672 [INFO] Executing instruction: PreBuildEbExtension
2025/10/17 22:32:14.323675 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/17 22:32:14.323691 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/17 22:32:14.639900 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/17 22:32:14.639925 [INFO] Executing instruction: StageApplication
2025/10/17 22:32:14.639928 [INFO] Recreating /var/app/staging/
2025/10/17 22:32:14.640036 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/17 22:32:14.640050 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/17 22:32:14.646134 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/17 22:32:14.647162 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/17 22:32:14.647183 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/17 22:32:14.647197 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/17 22:32:14.647200 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/17 22:32:14.647204 [INFO] Executing instruction: InstallDependency
2025/10/17 22:32:14.647208 [INFO] checking dependencies file
2025/10/17 22:32:14.647218 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/17 22:32:14.647228 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/17 22:32:15.110850 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.25.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.25.2)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.16.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.0.9)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (3.11)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (4.67.1)

2025/10/17 22:32:15.110884 [INFO] Executing instruction: check Procfile
2025/10/17 22:32:15.110933 [INFO] detected Procfile in application source bundle ...
2025/10/17 22:32:15.110939 [INFO] Executing instruction: configure X-Ray
2025/10/17 22:32:15.110943 [INFO] X-Ray is not enabled.
2025/10/17 22:32:15.110946 [INFO] Executing instruction: configure proxy server
2025/10/17 22:32:15.110960 [INFO] Recreating /var/proxy/staging/nginx
2025/10/17 22:32:15.120943 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/17 22:32:15.123217 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:32:15.169649 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/17 22:32:15.169681 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:32:15.184884 [INFO] Running command: systemctl is-active healthd.service
2025/10/17 22:32:15.195035 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:32:15.207523 [INFO] Running command: systemctl stop healthd.service
2025/10/17 22:32:15.264648 [INFO] Running command: systemctl disable healthd.service
2025/10/17 22:32:15.521454 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/17 22:32:15.521626 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:32:15.803772 [INFO] Running command: systemctl reset-failed
2025/10/17 22:32:15.814908 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:32:16.038829 [INFO] Running command: systemctl reset-failed
2025/10/17 22:32:16.046516 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/17 22:32:16.054900 [INFO] Running command: systemctl enable aws-eb.target
2025/10/17 22:32:16.298091 [INFO] Running command: systemctl start aws-eb.target
2025/10/17 22:32:16.307317 [INFO] Running command: systemctl enable healthd.service
2025/10/17 22:32:16.540754 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/17 22:32:16.540782 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:32:16.551664 [INFO] Running command: systemctl is-active healthd.service
2025/10/17 22:32:16.559151 [INFO] Running command: systemctl start healthd.service
2025/10/17 22:32:16.651678 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/17 22:32:16.652898 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/17 22:32:16.654107 [INFO] Executing instruction: configure log streaming
2025/10/17 22:32:16.654118 [INFO] log streaming is not enabled
2025/10/17 22:32:16.654122 [INFO] disable log stream
2025/10/17 22:32:16.654135 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/17 22:32:16.672368 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/17 22:32:16.687995 [INFO] Executing instruction: GetToggleForceRotate
2025/10/17 22:32:16.688020 [INFO] Checking if logs need forced rotation
2025/10/17 22:32:16.688042 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 22:32:17.167193 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 22:32:17.517695 [INFO] Generating rsyslog config from Procfile
2025/10/17 22:32:17.519939 [INFO] Running command: systemctl restart rsyslog.service
2025/10/17 22:32:17.659127 [INFO] Executing instruction: PostBuildEbExtension
2025/10/17 22:32:17.659154 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/17 22:32:17.659165 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/17 22:32:18.063350 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/17 22:32:18.063377 [INFO] Executing instruction: CleanEbExtensions
2025/10/17 22:32:18.063798 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/17 22:32:18.063805 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/17 22:32:18.063823 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/17 22:32:18.063841 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/17 22:32:18.063843 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/17 22:32:18.063847 [INFO] Executing instruction: stop X-Ray
2025/10/17 22:32:18.063850 [INFO] stop X-Ray ...
2025/10/17 22:32:18.063859 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/17 22:32:18.077344 [WARN] stopProcess Warning: process xray is not registered 
2025/10/17 22:32:18.077379 [INFO] Running command: systemctl stop xray.service
2025/10/17 22:32:18.091835 [INFO] Executing instruction: stop proxy
2025/10/17 22:32:18.091868 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/17 22:32:18.106310 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/17 22:32:18.106342 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:32:18.117785 [INFO] Running command: systemctl is-active nginx.service
2025/10/17 22:32:18.125354 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:32:18.134125 [INFO] Running command: systemctl stop nginx.service
2025/10/17 22:32:18.378208 [INFO] Running command: systemctl disable nginx.service
2025/10/17 22:32:18.620655 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:32:18.861855 [INFO] Running command: systemctl reset-failed
2025/10/17 22:32:18.869898 [INFO] Executing instruction: FlipApplication
2025/10/17 22:32:18.869922 [INFO] Fetching environment variables...
2025/10/17 22:32:18.870109 [INFO] Purge old process...
2025/10/17 22:32:18.870130 [INFO] Running command: systemctl stop eb-app.target
2025/10/17 22:32:18.879624 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/17 22:32:18.889753 [INFO] web.service

2025/10/17 22:32:18.889775 [INFO] deregistering process: web
2025/10/17 22:32:18.889785 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 22:32:18.900391 [INFO] Running command: systemctl is-active web.service
2025/10/17 22:32:18.908095 [INFO] Running command: systemctl disable web.service
2025/10/17 22:32:19.137734 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/17 22:32:19.137806 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:32:19.421351 [INFO] Running command: systemctl reset-failed
2025/10/17 22:32:19.457386 [INFO] Running command: systemctl is-active web.service
2025/10/17 22:32:19.464666 [INFO] Process web has been fully terminated
2025/10/17 22:32:19.464686 [INFO] All processes have been fully terminated
2025/10/17 22:32:19.464689 [INFO] Removing /var/app/current/ if it exists
2025/10/17 22:32:19.465786 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/17 22:32:19.465807 [INFO] Register application processes...
2025/10/17 22:32:19.465810 [INFO] Registering the proc: web

2025/10/17 22:32:19.465818 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 22:32:19.477353 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:32:19.731024 [INFO] Running command: systemctl reset-failed
2025/10/17 22:32:19.738579 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/17 22:32:19.746342 [INFO] Running command: systemctl enable eb-app.target
2025/10/17 22:32:19.979523 [INFO] Running command: systemctl start eb-app.target
2025/10/17 22:32:19.988871 [INFO] Running command: systemctl enable web.service
2025/10/17 22:32:20.238848 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/17 22:32:20.238880 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 22:32:20.249982 [INFO] Running command: systemctl is-active web.service
2025/10/17 22:32:20.257379 [INFO] Running command: systemctl start web.service
2025/10/17 22:32:20.299089 [INFO] Executing instruction: start X-Ray
2025/10/17 22:32:20.299106 [INFO] X-Ray is not enabled.
2025/10/17 22:32:20.299109 [INFO] Executing instruction: start proxy with new configuration
2025/10/17 22:32:20.299127 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/17 22:32:20.317670 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/17 22:32:20.317896 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/17 22:32:20.321037 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:32:20.337737 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:32:20.698723 [INFO] Running command: systemctl reset-failed
2025/10/17 22:32:20.712581 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:32:20.734143 [INFO] Running command: systemctl is-active nginx.service
2025/10/17 22:32:20.751196 [INFO] Running command: systemctl start nginx.service
2025/10/17 22:32:20.925575 [INFO] Executing instruction: configureSqsd
2025/10/17 22:32:20.925603 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/17 22:32:20.925607 [INFO] Executing instruction: startSqsd
2025/10/17 22:32:20.925610 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/17 22:32:20.925614 [INFO] Executing instruction: Track pids in healthd
2025/10/17 22:32:20.925618 [INFO] This is an enhanced health env...
2025/10/17 22:32:20.925631 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/17 22:32:20.943183 [INFO] cfn-hup.service healthd.service nginx.service

2025/10/17 22:32:20.943231 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/17 22:32:20.958967 [INFO] web.service

2025/10/17 22:32:20.959368 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/17 22:32:20.959393 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/17 22:32:20.959421 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/17 22:32:20.959424 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/17 22:32:20.959431 [INFO] Executing cleanup logic
2025/10/17 22:32:20.959532 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760740335110,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760740340959,"severity":"INFO"}]}]}

2025/10/17 22:32:20.960709 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/17 22:33:34.221836 [INFO] Starting...
2025/10/17 22:33:34.221882 [INFO] Starting EBPlatform-PlatformEngine
2025/10/17 22:33:34.221903 [INFO] reading event message file
2025/10/17 22:33:34.222217 [INFO] Engine received EB command cfn-hup-exec

2025/10/17 22:33:34.286793 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 22:33:34.592916 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 22:33:34.879625 [INFO] checking whether command tail-log is applicable to this instance...
2025/10/17 22:33:34.879643 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/17 22:33:34.879646 [INFO] Engine command: (tail-log)

2025/10/17 22:33:34.879691 [INFO] Executing instruction: GetTailLogs
2025/10/17 22:33:34.879694 [INFO] Tail Logs...
2025/10/17 22:33:34.880171 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2025/10/17 22:33:34.882525 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2025/10/17 22:33:34.884378 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2025/10/17 22:33:34.886270 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2025/10/17 22:33:34.888984 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2025/10/17 22:33:34.985703 [INFO] Executing cleanup logic
2025/10/17 22:33:34.985781 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1760740414985,"severity":"INFO"}]}]}

2025/10/17 22:33:34.985797 [INFO] Platform Engine finished execution on command: tail-log

2025/10/17 22:39:11.357841 [INFO] Starting...
2025/10/17 22:39:11.357883 [INFO] Starting EBPlatform-PlatformEngine
2025/10/17 22:39:11.357902 [INFO] reading event message file
2025/10/17 22:39:11.358214 [INFO] Engine received EB command cfn-hup-exec

2025/10/17 22:39:11.425903 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 22:39:11.716703 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 22:39:12.008488 [INFO] checking whether command config-deploy is applicable to this instance...
2025/10/17 22:39:12.008504 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/17 22:39:12.008507 [INFO] Engine command: (config-deploy)

2025/10/17 22:39:12.008511 [INFO] Using manifest file name from command request
2025/10/17 22:39:12.008516 [INFO] Unable to get version manifest file.
2025/10/17 22:39:12.008518 [INFO] Downloading latest manifest available.
2025/10/17 22:39:12.008520 [INFO] Download latest app version manifest
2025/10/17 22:39:12.008669 [INFO] resources/environments/e-bp8pq6exat/_runtime/versions/manifest
2025/10/17 22:39:12.061199 [INFO] latestManifest key *: resources/environments/e-bp8pq6exat/_runtime/versions/manifest_1760740730314

2025/10/17 22:39:12.061431 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/versions/manifest_1760740730314, expected bucket owner: 433676943793
2025/10/17 22:39:12.130787 [INFO] Download successful150bytes downloaded
2025/10/17 22:39:12.130943 [INFO] Trying to read and parse version manifest...
2025/10/17 22:39:12.131091 [INFO] Executing instruction: stopSqsd
2025/10/17 22:39:12.131095 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/17 22:39:12.131098 [INFO] Executing instruction: StageApplication
2025/10/17 22:39:12.131100 [INFO] Recreating /var/app/staging/
2025/10/17 22:39:12.131155 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/17 22:39:12.131165 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/17 22:39:12.136446 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/17 22:39:12.137439 [INFO] Executing instruction: RunConfigDeployPreBuildHooks
2025/10/17 22:39:12.137475 [INFO] Executing platform hooks in .platform/confighooks/prebuild/
2025/10/17 22:39:12.137491 [INFO] The dir .platform/confighooks/prebuild/ does not exist
2025/10/17 22:39:12.137493 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/prebuild
2025/10/17 22:39:12.137498 [INFO] Executing instruction: InstallDependency
2025/10/17 22:39:12.137502 [INFO] checking dependencies file
2025/10/17 22:39:12.137512 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/17 22:39:12.137520 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/17 22:39:12.578451 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.25.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.25.2)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.16.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.0.9)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (3.11)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (4.67.1)

2025/10/17 22:39:12.578484 [INFO] Executing instruction: check Procfile
2025/10/17 22:39:12.578522 [INFO] detected Procfile in application source bundle ...
2025/10/17 22:39:12.578527 [INFO] Executing instruction: configure X-Ray
2025/10/17 22:39:12.578531 [INFO] X-Ray is not enabled.
2025/10/17 22:39:12.578533 [INFO] Executing instruction: configure proxy server
2025/10/17 22:39:12.578549 [INFO] Recreating /var/proxy/staging/nginx
2025/10/17 22:39:12.587511 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/17 22:39:12.589677 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:39:12.637434 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/17 22:39:12.637463 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:39:12.647830 [INFO] Running command: systemctl is-active healthd.service
2025/10/17 22:39:12.655045 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:39:12.664783 [INFO] Running command: systemctl stop healthd.service
2025/10/17 22:39:12.735550 [INFO] Running command: systemctl disable healthd.service
2025/10/17 22:39:13.014590 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/17 22:39:13.014659 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:39:13.268578 [INFO] Running command: systemctl reset-failed
2025/10/17 22:39:13.278869 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:39:13.503367 [INFO] Running command: systemctl reset-failed
2025/10/17 22:39:13.511955 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/17 22:39:13.519812 [INFO] Running command: systemctl enable aws-eb.target
2025/10/17 22:39:13.760492 [INFO] Running command: systemctl start aws-eb.target
2025/10/17 22:39:13.769830 [INFO] Running command: systemctl enable healthd.service
2025/10/17 22:39:14.006846 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/17 22:39:14.006881 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/17 22:39:14.018178 [INFO] Running command: systemctl is-active healthd.service
2025/10/17 22:39:14.025755 [INFO] Running command: systemctl start healthd.service
2025/10/17 22:39:14.120094 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/17 22:39:14.121315 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/17 22:39:14.122440 [INFO] Executing instruction: GetSetupProxyLog
2025/10/17 22:39:14.122626 [INFO] Executing instruction: configure log streaming
2025/10/17 22:39:14.122637 [INFO] log streaming is not enabled
2025/10/17 22:39:14.122640 [INFO] disable log stream
2025/10/17 22:39:14.122661 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/17 22:39:14.143244 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/17 22:39:14.163189 [INFO] Executing instruction: GetToggleForceRotate
2025/10/17 22:39:14.163217 [INFO] Checking if logs need forced rotation
2025/10/17 22:39:14.163234 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/17 22:39:14.597166 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/17 22:39:14.978154 [INFO] Generating rsyslog config from Procfile
2025/10/17 22:39:14.980262 [INFO] Running command: systemctl restart rsyslog.service
2025/10/17 22:39:15.160358 [INFO] Executing instruction: CleanEbExtensions
2025/10/17 22:39:15.160749 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/17 22:39:15.160758 [INFO] Executing instruction: RunConfigDeployPreDeployHooks
2025/10/17 22:39:15.160793 [INFO] Executing platform hooks in .platform/confighooks/predeploy/
2025/10/17 22:39:15.160818 [INFO] The dir .platform/confighooks/predeploy/ does not exist
2025/10/17 22:39:15.160822 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/predeploy
2025/10/17 22:39:15.160828 [INFO] Executing instruction: stop X-Ray
2025/10/17 22:39:15.160832 [INFO] stop X-Ray ...
2025/10/17 22:39:15.160844 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/17 22:39:15.179487 [WARN] stopProcess Warning: process xray is not registered 
2025/10/17 22:39:15.179512 [INFO] Running command: systemctl stop xray.service
2025/10/17 22:39:15.194607 [INFO] Executing instruction: stop proxy
2025/10/17 22:39:15.194634 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/17 22:39:15.209097 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/17 22:39:15.209129 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:39:15.221487 [INFO] Running command: systemctl is-active nginx.service
2025/10/17 22:39:15.229521 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:39:15.238878 [INFO] Running command: systemctl stop nginx.service
2025/10/17 22:39:15.478520 [INFO] Running command: systemctl disable nginx.service
2025/10/17 22:39:15.750655 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:39:15.989659 [INFO] Running command: systemctl reset-failed
2025/10/17 22:39:15.998505 [INFO] Executing instruction: FlipApplication
2025/10/17 22:39:15.998530 [INFO] Fetching environment variables...
2025/10/17 22:39:15.998720 [INFO] Purge old process...
2025/10/17 22:39:15.998797 [INFO] Running command: systemctl stop eb-app.target
2025/10/17 22:39:16.008768 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/17 22:39:16.018968 [INFO] web.service

2025/10/17 22:39:16.018990 [INFO] deregistering process: web
2025/10/17 22:39:16.019000 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 22:39:16.029817 [INFO] Running command: systemctl is-active web.service
2025/10/17 22:39:16.037065 [INFO] Running command: systemctl disable web.service
2025/10/17 22:39:16.264778 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/17 22:39:16.264845 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:39:16.517002 [INFO] Running command: systemctl reset-failed
2025/10/17 22:39:16.557311 [INFO] Running command: systemctl is-active web.service
2025/10/17 22:39:16.566581 [INFO] Process web has been fully terminated
2025/10/17 22:39:16.566606 [INFO] All processes have been fully terminated
2025/10/17 22:39:16.566611 [INFO] Removing /var/app/current/ if it exists
2025/10/17 22:39:16.567750 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/17 22:39:16.567773 [INFO] Register application processes...
2025/10/17 22:39:16.567776 [INFO] Registering the proc: web

2025/10/17 22:39:16.567784 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 22:39:16.579299 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:39:16.818343 [INFO] Running command: systemctl reset-failed
2025/10/17 22:39:16.826746 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/17 22:39:16.834553 [INFO] Running command: systemctl enable eb-app.target
2025/10/17 22:39:17.045570 [INFO] Running command: systemctl start eb-app.target
2025/10/17 22:39:17.057553 [INFO] Running command: systemctl enable web.service
2025/10/17 22:39:17.294952 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/17 22:39:17.294994 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/17 22:39:17.305988 [INFO] Running command: systemctl is-active web.service
2025/10/17 22:39:17.313258 [INFO] Running command: systemctl start web.service
2025/10/17 22:39:17.388250 [INFO] Executing instruction: start X-Ray
2025/10/17 22:39:17.388267 [INFO] X-Ray is not enabled.
2025/10/17 22:39:17.388270 [INFO] Executing instruction: start proxy with new configuration
2025/10/17 22:39:17.388288 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/17 22:39:17.405689 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/17 22:39:17.405961 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/17 22:39:17.408658 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:39:17.424486 [INFO] Running command: systemctl daemon-reload
2025/10/17 22:39:17.683838 [INFO] Running command: systemctl reset-failed
2025/10/17 22:39:17.692107 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/17 22:39:17.704972 [INFO] Running command: systemctl is-active nginx.service
2025/10/17 22:39:17.714771 [INFO] Running command: systemctl start nginx.service
2025/10/17 22:39:17.819830 [INFO] Executing instruction: configureSqsd
2025/10/17 22:39:17.819844 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/17 22:39:17.819847 [INFO] Executing instruction: startSqsd
2025/10/17 22:39:17.819850 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/17 22:39:17.819852 [INFO] Executing instruction: Track pids in healthd
2025/10/17 22:39:17.819855 [INFO] This is an enhanced health env...
2025/10/17 22:39:17.819865 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/17 22:39:17.831249 [INFO] healthd.service cfn-hup.service nginx.service

2025/10/17 22:39:17.831276 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/17 22:39:17.843564 [INFO] web.service

2025/10/17 22:39:17.843795 [INFO] Executing instruction: RunConfigDeployPostDeployHooks
2025/10/17 22:39:17.843810 [INFO] Executing platform hooks in .platform/confighooks/postdeploy/
2025/10/17 22:39:17.843825 [INFO] The dir .platform/confighooks/postdeploy/ does not exist
2025/10/17 22:39:17.843828 [INFO] Finished running scripts in /var/app/current/.platform/confighooks/postdeploy
2025/10/17 22:39:17.843832 [INFO] Executing cleanup logic
2025/10/17 22:39:17.843906 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760740752578,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760740757843,"severity":"INFO"}]}]}

2025/10/17 22:39:17.844940 [INFO] Platform Engine finished execution on command: config-deploy

2025/10/18 03:10:50.513926 [INFO] Starting...
2025/10/18 03:10:50.513978 [INFO] Starting EBPlatform-PlatformEngine
2025/10/18 03:10:50.513999 [INFO] reading event message file
2025/10/18 03:10:50.514311 [INFO] Engine received EB command cfn-hup-exec

2025/10/18 03:10:50.582686 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/18 03:10:50.868037 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/18 03:10:51.188774 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/18 03:10:51.188786 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/18 03:10:51.188788 [INFO] Engine command: (app-deploy)

2025/10/18 03:10:51.188792 [INFO] Downloading EB Application...
2025/10/18 03:10:51.188795 [INFO] Region: us-east-1
2025/10/18 03:10:51.188796 [INFO] envID: e-bp8pq6exat
2025/10/18 03:10:51.188799 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/18 03:10:51.188801 [INFO] accountID: 433676943793
2025/10/18 03:10:51.188803 [INFO] Using manifest file name from command request
2025/10/18 03:10:51.188808 [INFO] Manifest name is : manifest_1760757047805
2025/10/18 03:10:51.188811 [INFO] Download app version manifest
2025/10/18 03:10:51.188988 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/versions/manifest_1760757047805, expected bucket owner: 433676943793
2025/10/18 03:10:51.228661 [INFO] Download successful109bytes downloaded
2025/10/18 03:10:51.228791 [INFO] Trying to read and parse version manifest...
2025/10/18 03:10:51.228866 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/_versions/mental-health-llm/app-251018_141040469162, expected bucket owner: 433676943793
2025/10/18 03:10:51.247209 [INFO] Download successful30050bytes downloaded
2025/10/18 03:10:51.247493 [INFO] Executing instruction: ElectLeader
2025/10/18 03:10:51.247500 [INFO] Running leader election for instance i-0d445e9a3d91a5047...
2025/10/18 03:10:51.247502 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/18 03:10:51.247514 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 1f20144f-24e9-4336-805a-811caa0439b2 --listener-id i-0d445e9a3d91a5047 --region us-east-1
2025/10/18 03:10:51.544108 [INFO] Instance is Leader.
2025/10/18 03:10:51.544169 [INFO] Executing instruction: stopSqsd
2025/10/18 03:10:51.544173 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/18 03:10:51.544176 [INFO] Executing instruction: PreBuildEbExtension
2025/10/18 03:10:51.544179 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/18 03:10:51.544196 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/18 03:10:51.857321 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/18 03:10:51.857345 [INFO] Executing instruction: StageApplication
2025/10/18 03:10:51.857348 [INFO] Recreating /var/app/staging/
2025/10/18 03:10:51.857446 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/18 03:10:51.857457 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/18 03:10:51.862446 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/18 03:10:51.863371 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/18 03:10:51.863392 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/18 03:10:51.863407 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/18 03:10:51.863409 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/18 03:10:51.863413 [INFO] Executing instruction: InstallDependency
2025/10/18 03:10:51.863419 [INFO] checking dependencies file
2025/10/18 03:10:51.863430 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/18 03:10:51.863438 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/18 03:10:52.308172 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.25.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.25.2)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.16.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.0.9)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (3.11)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (4.67.1)

2025/10/18 03:10:52.308207 [INFO] Executing instruction: check Procfile
2025/10/18 03:10:52.308255 [INFO] detected Procfile in application source bundle ...
2025/10/18 03:10:52.308262 [INFO] Executing instruction: configure X-Ray
2025/10/18 03:10:52.308266 [INFO] X-Ray is not enabled.
2025/10/18 03:10:52.308270 [INFO] Executing instruction: configure proxy server
2025/10/18 03:10:52.308289 [INFO] Recreating /var/proxy/staging/nginx
2025/10/18 03:10:52.318477 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/18 03:10:52.320640 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 03:10:52.331992 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/18 03:10:52.332019 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 03:10:52.340563 [INFO] Running command: systemctl is-active healthd.service
2025/10/18 03:10:52.347630 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 03:10:52.356348 [INFO] Running command: systemctl stop healthd.service
2025/10/18 03:10:52.484123 [INFO] Running command: systemctl disable healthd.service
2025/10/18 03:10:52.727752 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/18 03:10:52.727873 [INFO] Running command: systemctl daemon-reload
2025/10/18 03:10:52.940452 [INFO] Running command: systemctl reset-failed
2025/10/18 03:10:52.950916 [INFO] Running command: systemctl daemon-reload
2025/10/18 03:10:53.190367 [INFO] Running command: systemctl reset-failed
2025/10/18 03:10:53.198930 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/18 03:10:53.206778 [INFO] Running command: systemctl enable aws-eb.target
2025/10/18 03:10:53.436596 [INFO] Running command: systemctl start aws-eb.target
2025/10/18 03:10:53.446159 [INFO] Running command: systemctl enable healthd.service
2025/10/18 03:10:53.678531 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/18 03:10:53.678565 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 03:10:53.689907 [INFO] Running command: systemctl is-active healthd.service
2025/10/18 03:10:53.697325 [INFO] Running command: systemctl start healthd.service
2025/10/18 03:10:53.782132 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/18 03:10:53.783352 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/18 03:10:53.784483 [INFO] Executing instruction: configure log streaming
2025/10/18 03:10:53.784493 [INFO] log streaming is not enabled
2025/10/18 03:10:53.784496 [INFO] disable log stream
2025/10/18 03:10:53.784510 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/18 03:10:53.803491 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/18 03:10:53.819123 [INFO] Executing instruction: GetToggleForceRotate
2025/10/18 03:10:53.819147 [INFO] Checking if logs need forced rotation
2025/10/18 03:10:53.819166 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/18 03:10:54.245465 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/18 03:10:54.635836 [INFO] Generating rsyslog config from Procfile
2025/10/18 03:10:54.638079 [INFO] Running command: systemctl restart rsyslog.service
2025/10/18 03:10:54.820149 [INFO] Executing instruction: PostBuildEbExtension
2025/10/18 03:10:54.820181 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/18 03:10:54.820194 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/18 03:10:55.227271 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/18 03:10:55.227302 [INFO] Executing instruction: CleanEbExtensions
2025/10/18 03:10:55.227407 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/18 03:10:55.227411 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/18 03:10:55.227424 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/18 03:10:55.227439 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/18 03:10:55.227441 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/18 03:10:55.227446 [INFO] Executing instruction: stop X-Ray
2025/10/18 03:10:55.227448 [INFO] stop X-Ray ...
2025/10/18 03:10:55.227458 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/18 03:10:55.240232 [WARN] stopProcess Warning: process xray is not registered 
2025/10/18 03:10:55.240260 [INFO] Running command: systemctl stop xray.service
2025/10/18 03:10:55.252949 [INFO] Executing instruction: stop proxy
2025/10/18 03:10:55.252971 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/18 03:10:55.267482 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/18 03:10:55.267523 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 03:10:55.279275 [INFO] Running command: systemctl is-active nginx.service
2025/10/18 03:10:55.287664 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 03:10:55.296731 [INFO] Running command: systemctl stop nginx.service
2025/10/18 03:10:55.528526 [INFO] Running command: systemctl disable nginx.service
2025/10/18 03:10:55.771142 [INFO] Running command: systemctl daemon-reload
2025/10/18 03:10:56.006133 [INFO] Running command: systemctl reset-failed
2025/10/18 03:10:56.014442 [INFO] Executing instruction: FlipApplication
2025/10/18 03:10:56.014466 [INFO] Fetching environment variables...
2025/10/18 03:10:56.014764 [INFO] Purge old process...
2025/10/18 03:10:56.014782 [INFO] Running command: systemctl stop eb-app.target
2025/10/18 03:10:56.026357 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/18 03:10:56.036584 [INFO] web.service

2025/10/18 03:10:56.036606 [INFO] deregistering process: web
2025/10/18 03:10:56.036615 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/18 03:10:56.046351 [INFO] Running command: systemctl is-active web.service
2025/10/18 03:10:56.053235 [INFO] Running command: systemctl disable web.service
2025/10/18 03:10:56.369054 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/18 03:10:56.369139 [INFO] Running command: systemctl daemon-reload
2025/10/18 03:10:56.638018 [INFO] Running command: systemctl reset-failed
2025/10/18 03:10:56.668245 [INFO] Running command: systemctl is-active web.service
2025/10/18 03:10:56.676524 [INFO] Process web has been fully terminated
2025/10/18 03:10:56.676546 [INFO] All processes have been fully terminated
2025/10/18 03:10:56.676549 [INFO] Removing /var/app/current/ if it exists
2025/10/18 03:10:56.677707 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/18 03:10:56.677730 [INFO] Register application processes...
2025/10/18 03:10:56.677733 [INFO] Registering the proc: web

2025/10/18 03:10:56.677741 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/18 03:10:56.689519 [INFO] Running command: systemctl daemon-reload
2025/10/18 03:10:56.927214 [INFO] Running command: systemctl reset-failed
2025/10/18 03:10:56.934984 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/18 03:10:56.943316 [INFO] Running command: systemctl enable eb-app.target
2025/10/18 03:10:57.218455 [INFO] Running command: systemctl start eb-app.target
2025/10/18 03:10:57.227638 [INFO] Running command: systemctl enable web.service
2025/10/18 03:10:57.468714 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/18 03:10:57.468756 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/18 03:10:57.479853 [INFO] Running command: systemctl is-active web.service
2025/10/18 03:10:57.487211 [INFO] Running command: systemctl start web.service
2025/10/18 03:10:57.537312 [INFO] Executing instruction: start X-Ray
2025/10/18 03:10:57.537327 [INFO] X-Ray is not enabled.
2025/10/18 03:10:57.537330 [INFO] Executing instruction: start proxy with new configuration
2025/10/18 03:10:57.537357 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/18 03:10:57.554619 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/18 03:10:57.554863 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/18 03:10:57.557489 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 03:10:57.573007 [INFO] Running command: systemctl daemon-reload
2025/10/18 03:10:57.841501 [INFO] Running command: systemctl reset-failed
2025/10/18 03:10:57.849476 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 03:10:57.863204 [INFO] Running command: systemctl is-active nginx.service
2025/10/18 03:10:57.873126 [INFO] Running command: systemctl start nginx.service
2025/10/18 03:10:58.012871 [INFO] Executing instruction: configureSqsd
2025/10/18 03:10:58.012885 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/18 03:10:58.012888 [INFO] Executing instruction: startSqsd
2025/10/18 03:10:58.012890 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/18 03:10:58.012892 [INFO] Executing instruction: Track pids in healthd
2025/10/18 03:10:58.012895 [INFO] This is an enhanced health env...
2025/10/18 03:10:58.012905 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/18 03:10:58.024820 [INFO] nginx.service healthd.service cfn-hup.service

2025/10/18 03:10:58.024856 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/18 03:10:58.036139 [INFO] web.service

2025/10/18 03:10:58.036382 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/18 03:10:58.036399 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/18 03:10:58.036415 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/18 03:10:58.036418 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/18 03:10:58.036422 [INFO] Executing cleanup logic
2025/10/18 03:10:58.036486 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760757052308,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760757058036,"severity":"INFO"}]}]}

2025/10/18 03:10:58.037339 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/18 05:32:51.247317 [INFO] Starting...
2025/10/18 05:32:51.247360 [INFO] Starting EBPlatform-PlatformEngine
2025/10/18 05:32:51.247380 [INFO] reading event message file
2025/10/18 05:32:51.247692 [INFO] Engine received EB command cfn-hup-exec

2025/10/18 05:32:51.331485 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/18 05:32:51.621207 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/18 05:32:51.906496 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/18 05:32:51.906508 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/18 05:32:51.906511 [INFO] Engine command: (app-deploy)

2025/10/18 05:32:51.906515 [INFO] Downloading EB Application...
2025/10/18 05:32:51.906517 [INFO] Region: us-east-1
2025/10/18 05:32:51.906519 [INFO] envID: e-bp8pq6exat
2025/10/18 05:32:51.906522 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/18 05:32:51.906524 [INFO] accountID: 433676943793
2025/10/18 05:32:51.906526 [INFO] Using manifest file name from command request
2025/10/18 05:32:51.906531 [INFO] Manifest name is : manifest_1760765568749
2025/10/18 05:32:51.906533 [INFO] Download app version manifest
2025/10/18 05:32:51.906698 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/versions/manifest_1760765568749, expected bucket owner: 433676943793
2025/10/18 05:32:51.945903 [INFO] Download successful111bytes downloaded
2025/10/18 05:32:51.946032 [INFO] Trying to read and parse version manifest...
2025/10/18 05:32:51.946101 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/_versions/mental-health-llm/app-251018_163241680057, expected bucket owner: 433676943793
2025/10/18 05:32:51.966779 [INFO] Download successful30043bytes downloaded
2025/10/18 05:32:51.967071 [INFO] Executing instruction: ElectLeader
2025/10/18 05:32:51.967077 [INFO] Running leader election for instance i-0d445e9a3d91a5047...
2025/10/18 05:32:51.967079 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/18 05:32:51.967089 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 45125d2d-a300-4398-9329-ef6a524f910a --listener-id i-0d445e9a3d91a5047 --region us-east-1
2025/10/18 05:32:52.481085 [INFO] Instance is Leader.
2025/10/18 05:32:52.481145 [INFO] Executing instruction: stopSqsd
2025/10/18 05:32:52.481150 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/18 05:32:52.481154 [INFO] Executing instruction: PreBuildEbExtension
2025/10/18 05:32:52.481158 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/18 05:32:52.481176 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/18 05:32:52.791020 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/18 05:32:52.791056 [INFO] Executing instruction: StageApplication
2025/10/18 05:32:52.791061 [INFO] Recreating /var/app/staging/
2025/10/18 05:32:52.791184 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/18 05:32:52.791198 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/18 05:32:52.796899 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/18 05:32:52.797914 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/18 05:32:52.797934 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/18 05:32:52.797954 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/18 05:32:52.797956 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/18 05:32:52.797960 [INFO] Executing instruction: InstallDependency
2025/10/18 05:32:52.797965 [INFO] checking dependencies file
2025/10/18 05:32:52.797976 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/18 05:32:52.797985 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/18 05:32:53.241954 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.25.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.25.2)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.16.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.0.9)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (3.11)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (4.67.1)

2025/10/18 05:32:53.241985 [INFO] Executing instruction: check Procfile
2025/10/18 05:32:53.242030 [INFO] detected Procfile in application source bundle ...
2025/10/18 05:32:53.242037 [INFO] Executing instruction: configure X-Ray
2025/10/18 05:32:53.242041 [INFO] X-Ray is not enabled.
2025/10/18 05:32:53.242043 [INFO] Executing instruction: configure proxy server
2025/10/18 05:32:53.242059 [INFO] Recreating /var/proxy/staging/nginx
2025/10/18 05:32:53.252159 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/18 05:32:53.254533 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 05:32:53.266722 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/18 05:32:53.266765 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 05:32:53.276344 [INFO] Running command: systemctl is-active healthd.service
2025/10/18 05:32:53.283922 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 05:32:53.292774 [INFO] Running command: systemctl stop healthd.service
2025/10/18 05:32:53.404569 [INFO] Running command: systemctl disable healthd.service
2025/10/18 05:32:53.655515 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/18 05:32:53.655677 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:32:53.902249 [INFO] Running command: systemctl reset-failed
2025/10/18 05:32:53.913173 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:32:54.159836 [INFO] Running command: systemctl reset-failed
2025/10/18 05:32:54.168297 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/18 05:32:54.176532 [INFO] Running command: systemctl enable aws-eb.target
2025/10/18 05:32:54.408934 [INFO] Running command: systemctl start aws-eb.target
2025/10/18 05:32:54.417294 [INFO] Running command: systemctl enable healthd.service
2025/10/18 05:32:54.669426 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/18 05:32:54.669463 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 05:32:54.680429 [INFO] Running command: systemctl is-active healthd.service
2025/10/18 05:32:54.688054 [INFO] Running command: systemctl start healthd.service
2025/10/18 05:32:54.744145 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/18 05:32:54.745316 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/18 05:32:54.746475 [INFO] Executing instruction: configure log streaming
2025/10/18 05:32:54.746483 [INFO] log streaming is not enabled
2025/10/18 05:32:54.746485 [INFO] disable log stream
2025/10/18 05:32:54.746494 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/18 05:32:54.758973 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/18 05:32:54.769687 [INFO] Executing instruction: GetToggleForceRotate
2025/10/18 05:32:54.769706 [INFO] Checking if logs need forced rotation
2025/10/18 05:32:54.769721 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/18 05:32:55.114014 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/18 05:32:55.478107 [INFO] Generating rsyslog config from Procfile
2025/10/18 05:32:55.480387 [INFO] Running command: systemctl restart rsyslog.service
2025/10/18 05:32:55.568061 [INFO] Executing instruction: PostBuildEbExtension
2025/10/18 05:32:55.568086 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/18 05:32:55.568095 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/18 05:32:55.977173 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/18 05:32:55.977198 [INFO] Executing instruction: CleanEbExtensions
2025/10/18 05:32:55.977315 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/18 05:32:55.977319 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/18 05:32:55.977335 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/18 05:32:55.977349 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/18 05:32:55.977352 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/18 05:32:55.977356 [INFO] Executing instruction: stop X-Ray
2025/10/18 05:32:55.977358 [INFO] stop X-Ray ...
2025/10/18 05:32:55.977367 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/18 05:32:55.989158 [WARN] stopProcess Warning: process xray is not registered 
2025/10/18 05:32:55.989184 [INFO] Running command: systemctl stop xray.service
2025/10/18 05:32:56.000710 [INFO] Executing instruction: stop proxy
2025/10/18 05:32:56.000738 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/18 05:32:56.015971 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/18 05:32:56.016003 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 05:32:56.029169 [INFO] Running command: systemctl is-active nginx.service
2025/10/18 05:32:56.036780 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 05:32:56.046208 [INFO] Running command: systemctl stop nginx.service
2025/10/18 05:32:56.239303 [INFO] Running command: systemctl disable nginx.service
2025/10/18 05:32:56.491566 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:32:56.729764 [INFO] Running command: systemctl reset-failed
2025/10/18 05:32:56.737768 [INFO] Executing instruction: FlipApplication
2025/10/18 05:32:56.737792 [INFO] Fetching environment variables...
2025/10/18 05:32:56.738058 [INFO] Purge old process...
2025/10/18 05:32:56.738080 [INFO] Running command: systemctl stop eb-app.target
2025/10/18 05:32:56.748192 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/18 05:32:56.758492 [INFO] web.service

2025/10/18 05:32:56.758513 [INFO] deregistering process: web
2025/10/18 05:32:56.758523 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/18 05:32:56.769017 [INFO] Running command: systemctl is-active web.service
2025/10/18 05:32:56.776109 [INFO] Running command: systemctl disable web.service
2025/10/18 05:32:57.080915 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/18 05:32:57.081008 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:32:57.357097 [INFO] Running command: systemctl reset-failed
2025/10/18 05:32:57.387313 [INFO] Running command: systemctl is-active web.service
2025/10/18 05:32:57.394756 [INFO] Process web has been fully terminated
2025/10/18 05:32:57.394777 [INFO] All processes have been fully terminated
2025/10/18 05:32:57.394780 [INFO] Removing /var/app/current/ if it exists
2025/10/18 05:32:57.395525 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/18 05:32:57.395543 [INFO] Register application processes...
2025/10/18 05:32:57.395547 [INFO] Registering the proc: web

2025/10/18 05:32:57.395554 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/18 05:32:57.406998 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:32:57.618417 [INFO] Running command: systemctl reset-failed
2025/10/18 05:32:57.625609 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/18 05:32:57.633183 [INFO] Running command: systemctl enable eb-app.target
2025/10/18 05:32:57.898904 [INFO] Running command: systemctl start eb-app.target
2025/10/18 05:32:57.907773 [INFO] Running command: systemctl enable web.service
2025/10/18 05:32:58.138349 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/18 05:32:58.138376 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/18 05:32:58.149481 [INFO] Running command: systemctl is-active web.service
2025/10/18 05:32:58.156777 [INFO] Running command: systemctl start web.service
2025/10/18 05:32:58.204891 [INFO] Executing instruction: start X-Ray
2025/10/18 05:32:58.204911 [INFO] X-Ray is not enabled.
2025/10/18 05:32:58.204915 [INFO] Executing instruction: start proxy with new configuration
2025/10/18 05:32:58.204937 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/18 05:32:58.230591 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/18 05:32:58.230915 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/18 05:32:58.234628 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 05:32:58.256425 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:32:58.654009 [INFO] Running command: systemctl reset-failed
2025/10/18 05:32:58.666844 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 05:32:58.685774 [INFO] Running command: systemctl is-active nginx.service
2025/10/18 05:32:58.700421 [INFO] Running command: systemctl start nginx.service
2025/10/18 05:32:58.856649 [INFO] Executing instruction: configureSqsd
2025/10/18 05:32:58.856670 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/18 05:32:58.856673 [INFO] Executing instruction: startSqsd
2025/10/18 05:32:58.856677 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/18 05:32:58.856681 [INFO] Executing instruction: Track pids in healthd
2025/10/18 05:32:58.856684 [INFO] This is an enhanced health env...
2025/10/18 05:32:58.856696 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/18 05:32:58.873087 [INFO] healthd.service nginx.service cfn-hup.service

2025/10/18 05:32:58.873132 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/18 05:32:58.888174 [INFO] web.service

2025/10/18 05:32:58.888521 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/18 05:32:58.888544 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/18 05:32:58.888565 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/18 05:32:58.888569 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/18 05:32:58.888576 [INFO] Executing cleanup logic
2025/10/18 05:32:58.888662 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760765573242,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760765578888,"severity":"INFO"}]}]}

2025/10/18 05:32:58.889779 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/18 05:37:17.629447 [INFO] Starting...
2025/10/18 05:37:17.629492 [INFO] Starting EBPlatform-PlatformEngine
2025/10/18 05:37:17.629512 [INFO] reading event message file
2025/10/18 05:37:17.629927 [INFO] Engine received EB command cfn-hup-exec

2025/10/18 05:37:17.684676 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/18 05:37:17.974973 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/18 05:37:18.260280 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/18 05:37:18.260300 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/18 05:37:18.260304 [INFO] Engine command: (app-deploy)

2025/10/18 05:37:18.260307 [INFO] Downloading EB Application...
2025/10/18 05:37:18.260310 [INFO] Region: us-east-1
2025/10/18 05:37:18.260312 [INFO] envID: e-bp8pq6exat
2025/10/18 05:37:18.260314 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/18 05:37:18.260316 [INFO] accountID: 433676943793
2025/10/18 05:37:18.260318 [INFO] Using manifest file name from command request
2025/10/18 05:37:18.260324 [INFO] Manifest name is : manifest_1760765835117
2025/10/18 05:37:18.260326 [INFO] Download app version manifest
2025/10/18 05:37:18.260511 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/versions/manifest_1760765835117, expected bucket owner: 433676943793
2025/10/18 05:37:18.301424 [INFO] Download successful111bytes downloaded
2025/10/18 05:37:18.301641 [INFO] Trying to read and parse version manifest...
2025/10/18 05:37:18.301726 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/_versions/mental-health-llm/app-251018_163708590012, expected bucket owner: 433676943793
2025/10/18 05:37:18.321824 [INFO] Download successful30481bytes downloaded
2025/10/18 05:37:18.322052 [INFO] Executing instruction: ElectLeader
2025/10/18 05:37:18.322063 [INFO] Running leader election for instance i-0d445e9a3d91a5047...
2025/10/18 05:37:18.322066 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/18 05:37:18.322075 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 412e7ae7-d295-4737-b6f6-9813e073b125 --listener-id i-0d445e9a3d91a5047 --region us-east-1
2025/10/18 05:37:18.609317 [INFO] Instance is Leader.
2025/10/18 05:37:18.609362 [INFO] Executing instruction: stopSqsd
2025/10/18 05:37:18.609367 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/18 05:37:18.609370 [INFO] Executing instruction: PreBuildEbExtension
2025/10/18 05:37:18.609373 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/18 05:37:18.609385 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/18 05:37:18.939601 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/18 05:37:18.939623 [INFO] Executing instruction: StageApplication
2025/10/18 05:37:18.939626 [INFO] Recreating /var/app/staging/
2025/10/18 05:37:18.939728 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/18 05:37:18.939743 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/18 05:37:18.945345 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/18 05:37:18.946402 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/18 05:37:18.946423 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/18 05:37:18.946439 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/18 05:37:18.946441 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/18 05:37:18.946445 [INFO] Executing instruction: InstallDependency
2025/10/18 05:37:18.946449 [INFO] checking dependencies file
2025/10/18 05:37:18.946463 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/18 05:37:18.946472 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/18 05:37:19.397135 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.25.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.25.2)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.16.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.0.9)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (3.11)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (4.67.1)

2025/10/18 05:37:19.397174 [INFO] Executing instruction: check Procfile
2025/10/18 05:37:19.397219 [INFO] detected Procfile in application source bundle ...
2025/10/18 05:37:19.397226 [INFO] Executing instruction: configure X-Ray
2025/10/18 05:37:19.397231 [INFO] X-Ray is not enabled.
2025/10/18 05:37:19.397234 [INFO] Executing instruction: configure proxy server
2025/10/18 05:37:19.397259 [INFO] Recreating /var/proxy/staging/nginx
2025/10/18 05:37:19.407405 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/18 05:37:19.409641 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 05:37:19.471141 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/18 05:37:19.471175 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 05:37:19.485018 [INFO] Running command: systemctl is-active healthd.service
2025/10/18 05:37:19.495274 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 05:37:19.508397 [INFO] Running command: systemctl stop healthd.service
2025/10/18 05:37:19.554651 [INFO] Running command: systemctl disable healthd.service
2025/10/18 05:37:19.853150 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/18 05:37:19.853275 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:37:20.103929 [INFO] Running command: systemctl reset-failed
2025/10/18 05:37:20.115222 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:37:20.350932 [INFO] Running command: systemctl reset-failed
2025/10/18 05:37:20.358875 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/18 05:37:20.367263 [INFO] Running command: systemctl enable aws-eb.target
2025/10/18 05:37:20.610589 [INFO] Running command: systemctl start aws-eb.target
2025/10/18 05:37:20.619419 [INFO] Running command: systemctl enable healthd.service
2025/10/18 05:37:20.859194 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/18 05:37:20.859232 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 05:37:20.869952 [INFO] Running command: systemctl is-active healthd.service
2025/10/18 05:37:20.876993 [INFO] Running command: systemctl start healthd.service
2025/10/18 05:37:20.964220 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/18 05:37:20.965464 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/18 05:37:20.966657 [INFO] Executing instruction: configure log streaming
2025/10/18 05:37:20.966665 [INFO] log streaming is not enabled
2025/10/18 05:37:20.966668 [INFO] disable log stream
2025/10/18 05:37:20.966677 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/18 05:37:20.979667 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/18 05:37:20.990871 [INFO] Executing instruction: GetToggleForceRotate
2025/10/18 05:37:20.990891 [INFO] Checking if logs need forced rotation
2025/10/18 05:37:20.990907 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/18 05:37:21.312072 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/18 05:37:21.681882 [INFO] Generating rsyslog config from Procfile
2025/10/18 05:37:21.684033 [INFO] Running command: systemctl restart rsyslog.service
2025/10/18 05:37:21.849289 [INFO] Executing instruction: PostBuildEbExtension
2025/10/18 05:37:21.849333 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/18 05:37:21.849349 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/18 05:37:22.278406 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/18 05:37:22.278432 [INFO] Executing instruction: CleanEbExtensions
2025/10/18 05:37:22.278531 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/18 05:37:22.278535 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/18 05:37:22.278611 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/18 05:37:22.278626 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/18 05:37:22.278628 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/18 05:37:22.278633 [INFO] Executing instruction: stop X-Ray
2025/10/18 05:37:22.278635 [INFO] stop X-Ray ...
2025/10/18 05:37:22.278643 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/18 05:37:22.290792 [WARN] stopProcess Warning: process xray is not registered 
2025/10/18 05:37:22.290819 [INFO] Running command: systemctl stop xray.service
2025/10/18 05:37:22.302496 [INFO] Executing instruction: stop proxy
2025/10/18 05:37:22.302522 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/18 05:37:22.314423 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/18 05:37:22.314451 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 05:37:22.325626 [INFO] Running command: systemctl is-active nginx.service
2025/10/18 05:37:22.332360 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 05:37:22.341126 [INFO] Running command: systemctl stop nginx.service
2025/10/18 05:37:22.576490 [INFO] Running command: systemctl disable nginx.service
2025/10/18 05:37:22.800879 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:37:23.064676 [INFO] Running command: systemctl reset-failed
2025/10/18 05:37:23.072969 [INFO] Executing instruction: FlipApplication
2025/10/18 05:37:23.072994 [INFO] Fetching environment variables...
2025/10/18 05:37:23.073178 [INFO] Purge old process...
2025/10/18 05:37:23.073198 [INFO] Running command: systemctl stop eb-app.target
2025/10/18 05:37:23.082372 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/18 05:37:23.093359 [INFO] web.service

2025/10/18 05:37:23.093382 [INFO] deregistering process: web
2025/10/18 05:37:23.093392 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/18 05:37:23.103415 [INFO] Running command: systemctl is-active web.service
2025/10/18 05:37:23.110839 [INFO] Running command: systemctl disable web.service
2025/10/18 05:37:23.424397 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/18 05:37:23.424588 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:37:23.699346 [INFO] Running command: systemctl reset-failed
2025/10/18 05:37:23.738139 [INFO] Running command: systemctl is-active web.service
2025/10/18 05:37:23.746186 [INFO] Process web has been fully terminated
2025/10/18 05:37:23.746206 [INFO] All processes have been fully terminated
2025/10/18 05:37:23.746209 [INFO] Removing /var/app/current/ if it exists
2025/10/18 05:37:23.747248 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/18 05:37:23.747268 [INFO] Register application processes...
2025/10/18 05:37:23.747272 [INFO] Registering the proc: web

2025/10/18 05:37:23.747279 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/18 05:37:23.759013 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:37:24.000232 [INFO] Running command: systemctl reset-failed
2025/10/18 05:37:24.008787 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/18 05:37:24.016776 [INFO] Running command: systemctl enable eb-app.target
2025/10/18 05:37:24.248530 [INFO] Running command: systemctl start eb-app.target
2025/10/18 05:37:24.257692 [INFO] Running command: systemctl enable web.service
2025/10/18 05:37:24.501654 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/18 05:37:24.501686 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/18 05:37:24.512930 [INFO] Running command: systemctl is-active web.service
2025/10/18 05:37:24.520072 [INFO] Running command: systemctl start web.service
2025/10/18 05:37:24.576366 [INFO] Executing instruction: start X-Ray
2025/10/18 05:37:24.576382 [INFO] X-Ray is not enabled.
2025/10/18 05:37:24.576386 [INFO] Executing instruction: start proxy with new configuration
2025/10/18 05:37:24.576403 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/18 05:37:24.594605 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/18 05:37:24.594848 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/18 05:37:24.598194 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 05:37:24.614558 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:37:24.873849 [INFO] Running command: systemctl reset-failed
2025/10/18 05:37:24.882704 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 05:37:24.896395 [INFO] Running command: systemctl is-active nginx.service
2025/10/18 05:37:24.906162 [INFO] Running command: systemctl start nginx.service
2025/10/18 05:37:25.021117 [INFO] Executing instruction: configureSqsd
2025/10/18 05:37:25.021137 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/18 05:37:25.021140 [INFO] Executing instruction: startSqsd
2025/10/18 05:37:25.021142 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/18 05:37:25.021145 [INFO] Executing instruction: Track pids in healthd
2025/10/18 05:37:25.021148 [INFO] This is an enhanced health env...
2025/10/18 05:37:25.021158 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/18 05:37:25.031598 [INFO] healthd.service nginx.service cfn-hup.service

2025/10/18 05:37:25.031625 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/18 05:37:25.041769 [INFO] web.service

2025/10/18 05:37:25.042000 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/18 05:37:25.042042 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/18 05:37:25.042058 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/18 05:37:25.042060 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/18 05:37:25.042065 [INFO] Executing cleanup logic
2025/10/18 05:37:25.042133 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760765839397,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760765845042,"severity":"INFO"}]}]}

2025/10/18 05:37:25.043230 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/18 05:39:23.467870 [INFO] Starting...
2025/10/18 05:39:23.467918 [INFO] Starting EBPlatform-PlatformEngine
2025/10/18 05:39:23.467942 [INFO] reading event message file
2025/10/18 05:39:23.468301 [INFO] Engine received EB command cfn-hup-exec

2025/10/18 05:39:23.534591 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/18 05:39:23.834204 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/18 05:39:24.129099 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/18 05:39:24.129110 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/18 05:39:24.129117 [INFO] Engine command: (app-deploy)

2025/10/18 05:39:24.129120 [INFO] Downloading EB Application...
2025/10/18 05:39:24.129122 [INFO] Region: us-east-1
2025/10/18 05:39:24.129124 [INFO] envID: e-bp8pq6exat
2025/10/18 05:39:24.129127 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/18 05:39:24.129129 [INFO] accountID: 433676943793
2025/10/18 05:39:24.129131 [INFO] Using manifest file name from command request
2025/10/18 05:39:24.129136 [INFO] Manifest name is : manifest_1760765961047
2025/10/18 05:39:24.129138 [INFO] Download app version manifest
2025/10/18 05:39:24.129295 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/versions/manifest_1760765961047, expected bucket owner: 433676943793
2025/10/18 05:39:24.162847 [INFO] Download successful111bytes downloaded
2025/10/18 05:39:24.162983 [INFO] Trying to read and parse version manifest...
2025/10/18 05:39:24.163051 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/_versions/mental-health-llm/app-251018_163914488163, expected bucket owner: 433676943793
2025/10/18 05:39:24.181390 [INFO] Download successful29268bytes downloaded
2025/10/18 05:39:24.181693 [INFO] Executing instruction: ElectLeader
2025/10/18 05:39:24.181700 [INFO] Running leader election for instance i-0d445e9a3d91a5047...
2025/10/18 05:39:24.181703 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/18 05:39:24.181714 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 33dcde54-3a0a-4aea-8bbc-28c8ae01b59c --listener-id i-0d445e9a3d91a5047 --region us-east-1
2025/10/18 05:39:24.487111 [INFO] Instance is Leader.
2025/10/18 05:39:24.487171 [INFO] Executing instruction: stopSqsd
2025/10/18 05:39:24.487177 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/18 05:39:24.487180 [INFO] Executing instruction: PreBuildEbExtension
2025/10/18 05:39:24.487183 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/18 05:39:24.487193 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/18 05:39:24.793931 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/18 05:39:24.793964 [INFO] Executing instruction: StageApplication
2025/10/18 05:39:24.793968 [INFO] Recreating /var/app/staging/
2025/10/18 05:39:24.794069 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/18 05:39:24.794079 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/18 05:39:24.799277 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/18 05:39:24.800220 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/18 05:39:24.800241 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/18 05:39:24.800257 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/18 05:39:24.800260 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/18 05:39:24.800264 [INFO] Executing instruction: InstallDependency
2025/10/18 05:39:24.800268 [INFO] checking dependencies file
2025/10/18 05:39:24.800279 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/18 05:39:24.800287 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/18 05:39:25.245185 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.25.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.25.2)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.16.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.0.9)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (3.11)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (4.67.1)

2025/10/18 05:39:25.245226 [INFO] Executing instruction: check Procfile
2025/10/18 05:39:25.245269 [INFO] detected Procfile in application source bundle ...
2025/10/18 05:39:25.245275 [INFO] Executing instruction: configure X-Ray
2025/10/18 05:39:25.245279 [INFO] X-Ray is not enabled.
2025/10/18 05:39:25.245283 [INFO] Executing instruction: configure proxy server
2025/10/18 05:39:25.245302 [INFO] Recreating /var/proxy/staging/nginx
2025/10/18 05:39:25.255275 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/18 05:39:25.257492 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 05:39:25.317450 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/18 05:39:25.317483 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 05:39:25.328137 [INFO] Running command: systemctl is-active healthd.service
2025/10/18 05:39:25.335470 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 05:39:25.344513 [INFO] Running command: systemctl stop healthd.service
2025/10/18 05:39:25.406905 [INFO] Running command: systemctl disable healthd.service
2025/10/18 05:39:25.646529 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/18 05:39:25.646677 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:39:25.882495 [INFO] Running command: systemctl reset-failed
2025/10/18 05:39:25.893263 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:39:26.118329 [INFO] Running command: systemctl reset-failed
2025/10/18 05:39:26.125716 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/18 05:39:26.133193 [INFO] Running command: systemctl enable aws-eb.target
2025/10/18 05:39:26.368938 [INFO] Running command: systemctl start aws-eb.target
2025/10/18 05:39:26.377936 [INFO] Running command: systemctl enable healthd.service
2025/10/18 05:39:26.608284 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/18 05:39:26.608315 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 05:39:26.619233 [INFO] Running command: systemctl is-active healthd.service
2025/10/18 05:39:26.626519 [INFO] Running command: systemctl start healthd.service
2025/10/18 05:39:26.688361 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/18 05:39:26.689617 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/18 05:39:26.690776 [INFO] Executing instruction: configure log streaming
2025/10/18 05:39:26.690787 [INFO] log streaming is not enabled
2025/10/18 05:39:26.690791 [INFO] disable log stream
2025/10/18 05:39:26.690807 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/18 05:39:26.709294 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/18 05:39:26.727835 [INFO] Executing instruction: GetToggleForceRotate
2025/10/18 05:39:26.727861 [INFO] Checking if logs need forced rotation
2025/10/18 05:39:26.727876 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/18 05:39:27.167492 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/18 05:39:27.546596 [INFO] Generating rsyslog config from Procfile
2025/10/18 05:39:27.548770 [INFO] Running command: systemctl restart rsyslog.service
2025/10/18 05:39:27.707728 [INFO] Executing instruction: PostBuildEbExtension
2025/10/18 05:39:27.707765 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/18 05:39:27.707776 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/18 05:39:28.107818 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/18 05:39:28.107846 [INFO] Executing instruction: CleanEbExtensions
2025/10/18 05:39:28.107981 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/18 05:39:28.107986 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/18 05:39:28.108002 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/18 05:39:28.108020 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/18 05:39:28.108029 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/18 05:39:28.108034 [INFO] Executing instruction: stop X-Ray
2025/10/18 05:39:28.108037 [INFO] stop X-Ray ...
2025/10/18 05:39:28.108051 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/18 05:39:28.122176 [WARN] stopProcess Warning: process xray is not registered 
2025/10/18 05:39:28.122209 [INFO] Running command: systemctl stop xray.service
2025/10/18 05:39:28.137156 [INFO] Executing instruction: stop proxy
2025/10/18 05:39:28.137181 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/18 05:39:28.150446 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/18 05:39:28.150477 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 05:39:28.163801 [INFO] Running command: systemctl is-active nginx.service
2025/10/18 05:39:28.171783 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 05:39:28.182312 [INFO] Running command: systemctl stop nginx.service
2025/10/18 05:39:28.357344 [INFO] Running command: systemctl disable nginx.service
2025/10/18 05:39:28.579477 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:39:28.819301 [INFO] Running command: systemctl reset-failed
2025/10/18 05:39:28.827331 [INFO] Executing instruction: FlipApplication
2025/10/18 05:39:28.827357 [INFO] Fetching environment variables...
2025/10/18 05:39:28.827623 [INFO] Purge old process...
2025/10/18 05:39:28.827643 [INFO] Running command: systemctl stop eb-app.target
2025/10/18 05:39:28.837952 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/18 05:39:28.848640 [INFO] web.service

2025/10/18 05:39:28.848664 [INFO] deregistering process: web
2025/10/18 05:39:28.848674 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/18 05:39:28.858879 [INFO] Running command: systemctl is-active web.service
2025/10/18 05:39:28.866296 [INFO] Running command: systemctl disable web.service
2025/10/18 05:39:29.164391 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/18 05:39:29.164476 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:39:29.466978 [INFO] Running command: systemctl reset-failed
2025/10/18 05:39:29.498446 [INFO] Running command: systemctl is-active web.service
2025/10/18 05:39:29.506071 [INFO] Process web has been fully terminated
2025/10/18 05:39:29.506094 [INFO] All processes have been fully terminated
2025/10/18 05:39:29.506097 [INFO] Removing /var/app/current/ if it exists
2025/10/18 05:39:29.507139 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/18 05:39:29.507161 [INFO] Register application processes...
2025/10/18 05:39:29.507165 [INFO] Registering the proc: web

2025/10/18 05:39:29.507172 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/18 05:39:29.519082 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:39:29.737113 [INFO] Running command: systemctl reset-failed
2025/10/18 05:39:29.744044 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/18 05:39:29.751742 [INFO] Running command: systemctl enable eb-app.target
2025/10/18 05:39:29.968584 [INFO] Running command: systemctl start eb-app.target
2025/10/18 05:39:29.978688 [INFO] Running command: systemctl enable web.service
2025/10/18 05:39:30.219681 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/18 05:39:30.219716 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/18 05:39:30.230888 [INFO] Running command: systemctl is-active web.service
2025/10/18 05:39:30.238467 [INFO] Running command: systemctl start web.service
2025/10/18 05:39:30.292251 [INFO] Executing instruction: start X-Ray
2025/10/18 05:39:30.292275 [INFO] X-Ray is not enabled.
2025/10/18 05:39:30.292280 [INFO] Executing instruction: start proxy with new configuration
2025/10/18 05:39:30.292307 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/18 05:39:30.321181 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/18 05:39:30.321507 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/18 05:39:30.325180 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 05:39:30.347124 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:39:30.786687 [INFO] Running command: systemctl reset-failed
2025/10/18 05:39:30.799476 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 05:39:30.819166 [INFO] Running command: systemctl is-active nginx.service
2025/10/18 05:39:30.833628 [INFO] Running command: systemctl start nginx.service
2025/10/18 05:39:30.986532 [INFO] Executing instruction: configureSqsd
2025/10/18 05:39:30.986558 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/18 05:39:30.986563 [INFO] Executing instruction: startSqsd
2025/10/18 05:39:30.986566 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/18 05:39:30.986569 [INFO] Executing instruction: Track pids in healthd
2025/10/18 05:39:30.986574 [INFO] This is an enhanced health env...
2025/10/18 05:39:30.986591 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/18 05:39:31.004087 [INFO] nginx.service cfn-hup.service healthd.service

2025/10/18 05:39:31.004125 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/18 05:39:31.021022 [INFO] web.service

2025/10/18 05:39:31.021374 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/18 05:39:31.021446 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/18 05:39:31.021470 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/18 05:39:31.021473 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/18 05:39:31.021480 [INFO] Executing cleanup logic
2025/10/18 05:39:31.021590 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760765965245,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760765971021,"severity":"INFO"}]}]}

2025/10/18 05:39:31.022639 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/18 05:48:55.176803 [INFO] Starting...
2025/10/18 05:48:55.176856 [INFO] Starting EBPlatform-PlatformEngine
2025/10/18 05:48:55.176877 [INFO] reading event message file
2025/10/18 05:48:55.177222 [INFO] Engine received EB command cfn-hup-exec

2025/10/18 05:48:55.240327 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/18 05:48:55.525021 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/18 05:48:55.807940 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/18 05:48:55.807954 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/18 05:48:55.807957 [INFO] Engine command: (app-deploy)

2025/10/18 05:48:55.807962 [INFO] Downloading EB Application...
2025/10/18 05:48:55.807965 [INFO] Region: us-east-1
2025/10/18 05:48:55.807968 [INFO] envID: e-bp8pq6exat
2025/10/18 05:48:55.807971 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/18 05:48:55.807981 [INFO] accountID: 433676943793
2025/10/18 05:48:55.807984 [INFO] Using manifest file name from command request
2025/10/18 05:48:55.807990 [INFO] Manifest name is : manifest_1760766532651
2025/10/18 05:48:55.807992 [INFO] Download app version manifest
2025/10/18 05:48:55.808166 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/versions/manifest_1760766532651, expected bucket owner: 433676943793
2025/10/18 05:48:55.851727 [INFO] Download successful111bytes downloaded
2025/10/18 05:48:55.851863 [INFO] Trying to read and parse version manifest...
2025/10/18 05:48:55.851931 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-bp8pq6exat/_runtime/_versions/mental-health-llm/app-251018_164845425346, expected bucket owner: 433676943793
2025/10/18 05:48:55.869128 [INFO] Download successful49992bytes downloaded
2025/10/18 05:48:55.869391 [INFO] Executing instruction: ElectLeader
2025/10/18 05:48:55.869397 [INFO] Running leader election for instance i-0d445e9a3d91a5047...
2025/10/18 05:48:55.869400 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/18 05:48:55.869410 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 4b23ccce-1f16-4681-9c59-61f8c0b3dbf5 --listener-id i-0d445e9a3d91a5047 --region us-east-1
2025/10/18 05:48:56.184094 [INFO] Instance is Leader.
2025/10/18 05:48:56.184153 [INFO] Executing instruction: stopSqsd
2025/10/18 05:48:56.184158 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/18 05:48:56.184161 [INFO] Executing instruction: PreBuildEbExtension
2025/10/18 05:48:56.184164 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/18 05:48:56.184176 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/18 05:48:56.497419 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/18 05:48:56.497441 [INFO] Executing instruction: StageApplication
2025/10/18 05:48:56.497444 [INFO] Recreating /var/app/staging/
2025/10/18 05:48:56.497555 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/18 05:48:56.497620 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/18 05:48:56.504017 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/18 05:48:56.505014 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/18 05:48:56.505034 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/18 05:48:56.505052 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/18 05:48:56.505054 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/18 05:48:56.505058 [INFO] Executing instruction: InstallDependency
2025/10/18 05:48:56.505063 [INFO] checking dependencies file
2025/10/18 05:48:56.505077 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/18 05:48:56.505086 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/18 05:48:56.950055 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.25.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.25.2)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.16.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.0.9)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (3.11)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (4.67.1)

2025/10/18 05:48:56.950087 [INFO] Executing instruction: check Procfile
2025/10/18 05:48:56.950141 [INFO] detected Procfile in application source bundle ...
2025/10/18 05:48:56.950147 [INFO] Executing instruction: configure X-Ray
2025/10/18 05:48:56.950151 [INFO] X-Ray is not enabled.
2025/10/18 05:48:56.950153 [INFO] Executing instruction: configure proxy server
2025/10/18 05:48:56.950168 [INFO] Recreating /var/proxy/staging/nginx
2025/10/18 05:48:56.960087 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/18 05:48:56.962279 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 05:48:56.973846 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/18 05:48:56.973874 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 05:48:56.982876 [INFO] Running command: systemctl is-active healthd.service
2025/10/18 05:48:56.990120 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 05:48:56.999237 [INFO] Running command: systemctl stop healthd.service
2025/10/18 05:48:57.124678 [INFO] Running command: systemctl disable healthd.service
2025/10/18 05:48:57.364768 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/18 05:48:57.364899 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:48:57.600449 [INFO] Running command: systemctl reset-failed
2025/10/18 05:48:57.611229 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:48:57.847594 [INFO] Running command: systemctl reset-failed
2025/10/18 05:48:57.855672 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/18 05:48:57.863328 [INFO] Running command: systemctl enable aws-eb.target
2025/10/18 05:48:58.100530 [INFO] Running command: systemctl start aws-eb.target
2025/10/18 05:48:58.109309 [INFO] Running command: systemctl enable healthd.service
2025/10/18 05:48:58.378125 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/18 05:48:58.378158 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/18 05:48:58.388906 [INFO] Running command: systemctl is-active healthd.service
2025/10/18 05:48:58.396601 [INFO] Running command: systemctl start healthd.service
2025/10/18 05:48:58.473211 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/18 05:48:58.474396 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/18 05:48:58.475607 [INFO] Executing instruction: configure log streaming
2025/10/18 05:48:58.475617 [INFO] log streaming is not enabled
2025/10/18 05:48:58.475621 [INFO] disable log stream
2025/10/18 05:48:58.475632 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/18 05:48:58.492088 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/18 05:48:58.508709 [INFO] Executing instruction: GetToggleForceRotate
2025/10/18 05:48:58.508735 [INFO] Checking if logs need forced rotation
2025/10/18 05:48:58.508753 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/18 05:48:58.938755 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/18 05:48:59.316658 [INFO] Generating rsyslog config from Procfile
2025/10/18 05:48:59.318837 [INFO] Running command: systemctl restart rsyslog.service
2025/10/18 05:48:59.539113 [INFO] Executing instruction: PostBuildEbExtension
2025/10/18 05:48:59.539147 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/18 05:48:59.539162 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/18 05:48:59.966651 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/18 05:48:59.966675 [INFO] Executing instruction: CleanEbExtensions
2025/10/18 05:48:59.966791 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/18 05:48:59.966795 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/18 05:48:59.966809 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/18 05:48:59.966823 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/18 05:48:59.966825 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/18 05:48:59.966834 [INFO] Executing instruction: stop X-Ray
2025/10/18 05:48:59.966836 [INFO] stop X-Ray ...
2025/10/18 05:48:59.966845 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/18 05:48:59.980101 [WARN] stopProcess Warning: process xray is not registered 
2025/10/18 05:48:59.980134 [INFO] Running command: systemctl stop xray.service
2025/10/18 05:48:59.995175 [INFO] Executing instruction: stop proxy
2025/10/18 05:48:59.995223 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/18 05:49:00.054635 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/18 05:49:00.058410 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 05:49:00.094225 [INFO] Running command: systemctl is-active nginx.service
2025/10/18 05:49:00.119202 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 05:49:00.143996 [INFO] Running command: systemctl stop nginx.service
2025/10/18 05:49:00.358399 [INFO] Running command: systemctl disable nginx.service
2025/10/18 05:49:00.602279 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:49:00.840344 [INFO] Running command: systemctl reset-failed
2025/10/18 05:49:00.848356 [INFO] Executing instruction: FlipApplication
2025/10/18 05:49:00.848380 [INFO] Fetching environment variables...
2025/10/18 05:49:00.848674 [INFO] Purge old process...
2025/10/18 05:49:00.848692 [INFO] Running command: systemctl stop eb-app.target
2025/10/18 05:49:00.857897 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/18 05:49:00.867709 [INFO] web.service

2025/10/18 05:49:00.867732 [INFO] deregistering process: web
2025/10/18 05:49:00.867743 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/18 05:49:00.878096 [INFO] Running command: systemctl is-active web.service
2025/10/18 05:49:00.885318 [INFO] Running command: systemctl disable web.service
2025/10/18 05:49:01.196353 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/18 05:49:01.196439 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:49:01.519813 [INFO] Running command: systemctl reset-failed
2025/10/18 05:49:01.568706 [INFO] Running command: systemctl is-active web.service
2025/10/18 05:49:01.602195 [INFO] Process web has been fully terminated
2025/10/18 05:49:01.602232 [INFO] All processes have been fully terminated
2025/10/18 05:49:01.602236 [INFO] Removing /var/app/current/ if it exists
2025/10/18 05:49:01.606723 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/18 05:49:01.606756 [INFO] Register application processes...
2025/10/18 05:49:01.606762 [INFO] Registering the proc: web

2025/10/18 05:49:01.606774 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/18 05:49:01.633177 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:49:01.962786 [INFO] Running command: systemctl reset-failed
2025/10/18 05:49:01.984836 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/18 05:49:02.011761 [INFO] Running command: systemctl enable eb-app.target
2025/10/18 05:49:02.264069 [INFO] Running command: systemctl start eb-app.target
2025/10/18 05:49:02.273642 [INFO] Running command: systemctl enable web.service
2025/10/18 05:49:02.510097 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/18 05:49:02.510133 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/18 05:49:02.521389 [INFO] Running command: systemctl is-active web.service
2025/10/18 05:49:02.528962 [INFO] Running command: systemctl start web.service
2025/10/18 05:49:02.591665 [INFO] Executing instruction: start X-Ray
2025/10/18 05:49:02.591688 [INFO] X-Ray is not enabled.
2025/10/18 05:49:02.591693 [INFO] Executing instruction: start proxy with new configuration
2025/10/18 05:49:02.591717 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/18 05:49:02.618548 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/18 05:49:02.618813 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/18 05:49:02.623582 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 05:49:02.645090 [INFO] Running command: systemctl daemon-reload
2025/10/18 05:49:03.037365 [INFO] Running command: systemctl reset-failed
2025/10/18 05:49:03.051676 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/18 05:49:03.071446 [INFO] Running command: systemctl is-active nginx.service
2025/10/18 05:49:03.085703 [INFO] Running command: systemctl start nginx.service
2025/10/18 05:49:03.238737 [INFO] Executing instruction: configureSqsd
2025/10/18 05:49:03.238757 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/18 05:49:03.238761 [INFO] Executing instruction: startSqsd
2025/10/18 05:49:03.238765 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/18 05:49:03.238768 [INFO] Executing instruction: Track pids in healthd
2025/10/18 05:49:03.238772 [INFO] This is an enhanced health env...
2025/10/18 05:49:03.238783 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/18 05:49:03.254984 [INFO] nginx.service cfn-hup.service healthd.service

2025/10/18 05:49:03.255019 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/18 05:49:03.270585 [INFO] web.service

2025/10/18 05:49:03.270939 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/18 05:49:03.270962 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/18 05:49:03.270983 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/18 05:49:03.270986 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/18 05:49:03.270993 [INFO] Executing cleanup logic
2025/10/18 05:49:03.271086 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760766536950,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760766543271,"severity":"INFO"}]}]}

2025/10/18 05:49:03.272228 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/18 05:50:40.348955 [INFO] Starting...
2025/10/18 05:50:40.348998 [INFO] Starting EBPlatform-PlatformEngine
2025/10/18 05:50:40.349018 [INFO] reading event message file
2025/10/18 05:50:40.349327 [INFO] Engine received EB command cfn-hup-exec

2025/10/18 05:50:40.419163 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/18 05:50:40.737813 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-bp8pq6exat-stack/0374e280-ab5f-11f0-a243-0ecfc3ac7237 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/18 05:50:41.035941 [INFO] checking whether command bundle-log is applicable to this instance...
2025/10/18 05:50:41.035957 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/18 05:50:41.035960 [INFO] Engine command: (bundle-log)

2025/10/18 05:50:41.036011 [INFO] Executing instruction: GetBundleLogs
2025/10/18 05:50:41.036014 [INFO] Bundle Logs...
