2025/10/12 04:57:07.979980 [INFO] Starting...
2025/10/12 04:57:07.980031 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 04:57:07.980112 [INFO] reading event message file
2025/10/12 04:57:07.980470 [INFO] Engine received EB command userdata-exec

2025/10/12 04:57:07.985682 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 04:57:08.279207 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 04:57:08.638189 [INFO] This is a workflow controlled instance.
2025/10/12 04:57:08.638320 [INFO] Engine command: (env-launch)

2025/10/12 04:57:08.638715 [INFO] Executing instruction: SyncClock
2025/10/12 04:57:08.638719 [INFO] Starting SyncClock
2025/10/12 04:57:08.638739 [INFO] Running command: /usr/bin/chronyc tracking
2025/10/12 04:57:08.642043 [INFO] Reference ID    : 00000000 ()
Stratum         : 0
Ref time (UTC)  : Thu Jan 01 00:00:00 1970
System time     : 0.000000000 seconds fast of NTP time
Last offset     : +0.000000000 seconds
RMS offset      : 0.000000000 seconds
Frequency       : 2.529 ppm fast
Residual freq   : +0.000 ppm
Skew            : 0.000 ppm
Root delay      : 1.000000000 seconds
Root dispersion : 1.000000000 seconds
Update interval : 0.0 seconds
Leap status     : Not synchronised

2025/10/12 04:57:08.642058 [INFO] Running command: /usr/bin/chronyc -a makestep
2025/10/12 04:57:08.644713 [INFO] 200 OK

2025/10/12 04:57:08.645321 [INFO] Skipping Configure OS
2025/10/12 04:57:08.645336 [INFO] Skipping LockRepo
2025/10/12 04:57:08.645340 [INFO] Skipping GenerateEBBanner
2025/10/12 04:57:08.645344 [INFO] Skipping Install Process Manager
2025/10/12 04:57:08.645348 [INFO] Skipping install syslog
2025/10/12 04:57:08.645352 [INFO] Skipping install cron
2025/10/12 04:57:08.645355 [INFO] Skipping install proxy
2025/10/12 04:57:08.645359 [INFO] Skipping installhealthd
2025/10/12 04:57:08.645363 [INFO] Skipping Install Log Streaming Manager
2025/10/12 04:57:08.645367 [INFO] Skipping install X-Ray
2025/10/12 04:57:08.645370 [INFO] Skipping install Third Party License
2025/10/12 04:57:08.645374 [INFO] Skipping install httpd
2025/10/12 04:57:08.645380 [INFO] Instance has NOT been bootstrapped
2025/10/12 04:57:08.645382 [INFO] Executing instruction: installSqsd
2025/10/12 04:57:08.645385 [INFO] This is a web server environment instance, skip install sqsd daemon ...
2025/10/12 04:57:08.645388 [INFO] Instance has NOT been bootstrapped
2025/10/12 04:57:08.645390 [INFO] Executing instruction: bootstraphealthd
2025/10/12 04:57:08.645393 [INFO] this is an enhanced health env ...
2025/10/12 04:57:08.645404 [INFO] bootstrap healthd....
2025/10/12 04:57:08.645414 [INFO] Running command: /usr/bin/id -u healthd || /usr/sbin/useradd --user-group healthd -s /sbin/nologin --create-home
2025/10/12 04:57:08.822977 [INFO] /usr/bin/id: ‘healthd’: no such user

2025/10/12 04:57:08.823358 [INFO] bootstrap healthd....
2025/10/12 04:57:08.823372 [INFO] Running command: /usr/bin/id -u healthd || /usr/sbin/useradd --user-group healthd -s /sbin/nologin --create-home
2025/10/12 04:57:08.826407 [INFO] 1001

2025/10/12 04:57:08.826699 [INFO] configure bundle log for healthd...
2025/10/12 04:57:08.826752 [INFO] Executing instruction: GetSetupProxyLog
2025/10/12 04:57:08.826859 [INFO] Skipping Install yum packages
2025/10/12 04:57:08.826865 [INFO] Skipping Install Python Bundle
2025/10/12 04:57:08.826869 [INFO] Skipping Configure Python site-packages
2025/10/12 04:57:08.826874 [INFO] Skipping Install Python Modules
2025/10/12 04:57:08.826877 [INFO] Skipping MarkBaked
2025/10/12 04:57:08.826882 [INFO] Instance has NOT been bootstrapped
2025/10/12 04:57:08.826885 [INFO] Executing instruction: TuneSystemSettings
2025/10/12 04:57:08.826887 [INFO] Starting TuneSystemSettings
2025/10/12 04:57:08.826890 [INFO] Instance has NOT been bootstrapped
2025/10/12 04:57:08.828720 [INFO] Executing instruction: GetSetupLogRotate
2025/10/12 04:57:08.828724 [INFO] Initialize LogRotate files and directories
2025/10/12 04:57:08.848061 [INFO] Instance has NOT been bootstrapped
2025/10/12 04:57:08.848074 [INFO] Executing instruction: BootstrapCFNHup
2025/10/12 04:57:08.848077 [INFO] Bootstrap cfn-hup
2025/10/12 04:57:08.850362 [INFO] Copying file /opt/elasticbeanstalk/config/private/aws-eb-command-handler.conf to /etc/cfn/hooks.d/aws-eb-command-handler.conf
2025/10/12 04:57:08.852607 [INFO] Executing instruction: StartCFNHup
2025/10/12 04:57:08.852617 [INFO] Start cfn-hup
2025/10/12 04:57:08.852640 [INFO] Running command: systemctl show -p PartOf cfn-hup.service
2025/10/12 04:57:08.867510 [INFO] cfn-hup is not registered with EB yet, registering it now
2025/10/12 04:57:08.867545 [INFO] Running command: systemctl show -p PartOf cfn-hup.service
2025/10/12 04:57:08.883180 [INFO] Running command: systemctl daemon-reload
2025/10/12 04:57:09.091853 [INFO] Running command: systemctl reset-failed
2025/10/12 04:57:09.102086 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 04:57:09.110355 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 04:57:09.379541 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 04:57:09.388858 [INFO] Running command: systemctl enable cfn-hup.service
2025/10/12 04:57:09.660021 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/cfn-hup.service → /etc/systemd/system/cfn-hup.service.

2025/10/12 04:57:09.660056 [INFO] Running command: systemctl is-active cfn-hup.service
2025/10/12 04:57:09.669175 [INFO] cfn-hup process is not running, starting it now
2025/10/12 04:57:09.669203 [INFO] Running command: systemctl show -p PartOf cfn-hup.service
2025/10/12 04:57:09.679325 [INFO] Running command: systemctl is-active cfn-hup.service
2025/10/12 04:57:09.687355 [INFO] Running command: systemctl start cfn-hup.service
2025/10/12 04:57:09.750690 [INFO] Instance has NOT been bootstrapped
2025/10/12 04:57:09.750712 [INFO] Executing instruction: SetupPublishLogCronjob
2025/10/12 04:57:09.750716 [INFO] Setup publish logs cron job...
2025/10/12 04:57:09.750720 [INFO] Copying file /opt/elasticbeanstalk/config/private/logtasks/cron/publishlogs to /etc/cron.d/publishlogs
2025/10/12 04:57:09.753157 [INFO] Instance has NOT been bootstrapped
2025/10/12 04:57:09.753181 [INFO] Executing instruction: MarkBootstrapped
2025/10/12 04:57:09.753185 [INFO] Starting MarkBootstrapped
2025/10/12 04:57:09.753191 [INFO] Instance has NOT been bootstrapped
2025/10/12 04:57:09.753285 [INFO] Marked instance as Bootstrapped
2025/10/12 04:57:09.753290 [INFO] Executing instruction: Save CFN Stack Info
2025/10/12 04:57:09.753346 [INFO] Executing cleanup logic
2025/10/12 04:57:09.753356 [INFO] Platform Engine finished execution on command: env-launch

2025/10/12 04:58:12.413211 [INFO] Starting...
2025/10/12 04:58:12.413263 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 04:58:12.413285 [INFO] reading event message file
2025/10/12 04:58:12.413722 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 04:58:12.482451 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 04:58:12.778840 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 04:58:13.066296 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 04:58:13.066310 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 04:58:13.066314 [INFO] Engine command: (app-deploy)

2025/10/12 04:58:13.066319 [INFO] Downloading EB Application...
2025/10/12 04:58:13.066322 [INFO] Region: us-east-1
2025/10/12 04:58:13.066325 [INFO] envID: e-r2hnd7bhig
2025/10/12 04:58:13.066332 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 04:58:13.066334 [INFO] accountID: 433676943793
2025/10/12 04:58:13.066337 [INFO] Using manifest file name from command request
2025/10/12 04:58:13.066342 [INFO] Unable to get version manifest file.
2025/10/12 04:58:13.066344 [INFO] Downloading latest manifest available.
2025/10/12 04:58:13.066346 [INFO] Download latest app version manifest
2025/10/12 04:58:13.066488 [INFO] resources/environments/e-r2hnd7bhig/_runtime/versions/manifest
2025/10/12 04:58:13.108053 [INFO] latestManifest key *: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760244985515

2025/10/12 04:58:13.108390 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760244985515, expected bucket owner: 433676943793
2025/10/12 04:58:13.144455 [INFO] Download successful150bytes downloaded
2025/10/12 04:58:13.144546 [INFO] Trying to read and parse version manifest...
2025/10/12 04:58:13.144630 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251012_155616630374, expected bucket owner: 433676943793
2025/10/12 04:58:13.175656 [INFO] Download successful26537bytes downloaded
2025/10/12 04:58:13.175921 [INFO] Executing instruction: ElectLeader
2025/10/12 04:58:13.175928 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 04:58:13.175931 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 04:58:13.175944 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 5c08b3c7-2871-4d3f-aae6-21d0a07df7a5 --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 04:58:13.501272 [INFO] Instance is Leader.
2025/10/12 04:58:13.501426 [INFO] Executing instruction: stopSqsd
2025/10/12 04:58:13.501431 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 04:58:13.501434 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 04:58:13.501438 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 04:58:13.501452 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 04:58:13.811561 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 04:58:13.811607 [INFO] Executing instruction: StageApplication
2025/10/12 04:58:13.811610 [INFO] Recreating /var/app/staging/
2025/10/12 04:58:13.811735 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 04:58:13.811748 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 04:58:13.816835 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 04:58:13.817811 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 04:58:13.817865 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 04:58:13.817880 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 04:58:13.817883 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 04:58:13.817889 [INFO] Executing instruction: InstallDependency
2025/10/12 04:58:13.817893 [INFO] checking dependencies file
2025/10/12 04:58:13.817904 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 04:58:13.817913 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 04:58:17.904880 [INFO] Collecting fastapi==0.104.1 (from -r requirements.txt (line 1))
  Downloading fastapi-0.104.1-py3-none-any.whl.metadata (24 kB)
Collecting uvicorn==0.24.0 (from -r requirements.txt (line 2))
  Downloading uvicorn-0.24.0-py3-none-any.whl.metadata (6.4 kB)
Collecting pydantic==2.5.0 (from -r requirements.txt (line 3))
  Downloading pydantic-2.5.0-py3-none-any.whl.metadata (174 kB)
Collecting pydantic-settings==2.1.0 (from -r requirements.txt (line 4))
  Downloading pydantic_settings-2.1.0-py3-none-any.whl.metadata (2.9 kB)
Collecting python-dotenv==1.0.0 (from -r requirements.txt (line 5))
  Downloading python_dotenv-1.0.0-py3-none-any.whl.metadata (21 kB)
Collecting httpx==0.24.1 (from -r requirements.txt (line 6))
  Downloading httpx-0.24.1-py3-none-any.whl.metadata (7.4 kB)
Collecting anyio<4.0.0,>=3.7.1 (from fastapi==0.104.1->-r requirements.txt (line 1))
  Downloading anyio-3.7.1-py3-none-any.whl.metadata (4.7 kB)
Collecting starlette<0.28.0,>=0.27.0 (from fastapi==0.104.1->-r requirements.txt (line 1))
  Downloading starlette-0.27.0-py3-none-any.whl.metadata (5.8 kB)
Collecting typing-extensions>=4.8.0 (from fastapi==0.104.1->-r requirements.txt (line 1))
  Downloading typing_extensions-4.15.0-py3-none-any.whl.metadata (3.3 kB)
Collecting annotated-types>=0.4.0 (from pydantic==2.5.0->-r requirements.txt (line 3))
  Downloading annotated_types-0.7.0-py3-none-any.whl.metadata (15 kB)
Collecting pydantic-core==2.14.1 (from pydantic==2.5.0->-r requirements.txt (line 3))
  Downloading pydantic_core-2.14.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (6.5 kB)
Collecting click>=7.0 (from uvicorn==0.24.0->-r requirements.txt (line 2))
  Downloading click-8.3.0-py3-none-any.whl.metadata (2.6 kB)
Collecting h11>=0.8 (from uvicorn==0.24.0->-r requirements.txt (line 2))
  Downloading h11-0.16.0-py3-none-any.whl.metadata (8.3 kB)
Collecting certifi (from httpx==0.24.1->-r requirements.txt (line 6))
  Downloading certifi-2025.10.5-py3-none-any.whl.metadata (2.5 kB)
Collecting httpcore<0.18.0,>=0.15.0 (from httpx==0.24.1->-r requirements.txt (line 6))
  Downloading httpcore-0.17.3-py3-none-any.whl.metadata (18 kB)
Collecting idna (from httpx==0.24.1->-r requirements.txt (line 6))
  Downloading idna-3.10-py3-none-any.whl.metadata (10 kB)
Collecting sniffio (from httpx==0.24.1->-r requirements.txt (line 6))
  Downloading sniffio-1.3.1-py3-none-any.whl.metadata (3.9 kB)
Collecting h11>=0.8 (from uvicorn==0.24.0->-r requirements.txt (line 2))
  Downloading h11-0.14.0-py3-none-any.whl.metadata (8.2 kB)
Downloading fastapi-0.104.1-py3-none-any.whl (92 kB)
Downloading pydantic-2.5.0-py3-none-any.whl (407 kB)
Downloading uvicorn-0.24.0-py3-none-any.whl (59 kB)
Downloading pydantic_settings-2.1.0-py3-none-any.whl (11 kB)
Downloading python_dotenv-1.0.0-py3-none-any.whl (19 kB)
Downloading httpx-0.24.1-py3-none-any.whl (75 kB)
Downloading pydantic_core-2.14.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.1 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.1/2.1 MB 133.6 MB/s  0:00:00
Downloading anyio-3.7.1-py3-none-any.whl (80 kB)
Downloading httpcore-0.17.3-py3-none-any.whl (74 kB)
Downloading h11-0.14.0-py3-none-any.whl (58 kB)
Downloading sniffio-1.3.1-py3-none-any.whl (10 kB)
Downloading starlette-0.27.0-py3-none-any.whl (66 kB)
Downloading annotated_types-0.7.0-py3-none-any.whl (13 kB)
Downloading click-8.3.0-py3-none-any.whl (107 kB)
Downloading idna-3.10-py3-none-any.whl (70 kB)
Downloading typing_extensions-4.15.0-py3-none-any.whl (44 kB)
Downloading certifi-2025.10.5-py3-none-any.whl (163 kB)
Installing collected packages: typing-extensions, sniffio, python-dotenv, idna, h11, click, certifi, annotated-types, uvicorn, pydantic-core, anyio, starlette, pydantic, httpcore, pydantic-settings, httpx, fastapi

Successfully installed annotated-types-0.7.0 anyio-3.7.1 certifi-2025.10.5 click-8.3.0 fastapi-0.104.1 h11-0.14.0 httpcore-0.17.3 httpx-0.24.1 idna-3.10 pydantic-2.5.0 pydantic-core-2.14.1 pydantic-settings-2.1.0 python-dotenv-1.0.0 sniffio-1.3.1 starlette-0.27.0 typing-extensions-4.15.0 uvicorn-0.24.0

2025/10/12 04:58:17.904931 [INFO] Executing instruction: check Procfile
2025/10/12 04:58:17.904976 [INFO] detected Procfile in application source bundle ...
2025/10/12 04:58:17.904983 [INFO] Executing instruction: configure X-Ray
2025/10/12 04:58:17.904987 [INFO] X-Ray is not enabled.
2025/10/12 04:58:17.904991 [INFO] Executing instruction: configure proxy server
2025/10/12 04:58:17.905010 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 04:58:17.913771 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 04:58:17.915783 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 04:58:17.928520 [INFO] Running command: systemctl daemon-reload
2025/10/12 04:58:18.187374 [INFO] Running command: systemctl reset-failed
2025/10/12 04:58:18.195824 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 04:58:18.203918 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 04:58:18.494461 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 04:58:18.502965 [INFO] Running command: systemctl enable healthd.service
2025/10/12 04:58:18.835125 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 04:58:18.835160 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 04:58:18.846257 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 04:58:18.853858 [INFO] Running command: systemctl start healthd.service
2025/10/12 04:58:18.913273 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 04:58:18.914516 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 04:58:18.915691 [INFO] Executing instruction: configure log streaming
2025/10/12 04:58:18.915701 [INFO] log streaming is not enabled
2025/10/12 04:58:18.915704 [INFO] disable log stream
2025/10/12 04:58:18.915717 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 04:58:18.929185 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 04:58:18.941409 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 04:58:18.941430 [INFO] Checking if logs need forced rotation
2025/10/12 04:58:18.941447 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 04:58:19.268883 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 04:58:19.577982 [INFO] Generating rsyslog config from Procfile
2025/10/12 04:58:19.580432 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 04:58:19.916088 [INFO] Executing instruction: PostBuildEbExtension
2025/10/12 04:58:19.916117 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/12 04:58:19.916130 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/12 04:58:20.227437 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/12 04:58:20.227463 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 04:58:20.227573 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 04:58:20.227577 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/12 04:58:20.227591 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/12 04:58:20.227603 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/12 04:58:20.227606 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/12 04:58:20.227617 [INFO] Executing instruction: stop X-Ray
2025/10/12 04:58:20.227620 [INFO] stop X-Ray ...
2025/10/12 04:58:20.227631 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 04:58:20.242190 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 04:58:20.242219 [INFO] Running command: systemctl stop xray.service
2025/10/12 04:58:20.257525 [INFO] Executing instruction: stop proxy
2025/10/12 04:58:20.257603 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 04:58:20.271389 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 04:58:20.271416 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 04:58:20.284688 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2025/10/12 04:58:20.284710 [INFO] Executing instruction: FlipApplication
2025/10/12 04:58:20.284713 [INFO] Fetching environment variables...
2025/10/12 04:58:20.284855 [INFO] Purge old process...
2025/10/12 04:58:20.284870 [INFO] Removing /var/app/current/ if it exists
2025/10/12 04:58:20.284877 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 04:58:20.284893 [INFO] Register application processes...
2025/10/12 04:58:20.284896 [INFO] Registering the proc: web

2025/10/12 04:58:20.284904 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 04:58:20.297325 [INFO] Running command: systemctl daemon-reload
2025/10/12 04:58:20.565450 [INFO] Running command: systemctl reset-failed
2025/10/12 04:58:20.574187 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 04:58:20.582064 [INFO] Copying file /opt/elasticbeanstalk/config/private/aws-eb.target to /etc/systemd/system/eb-app.target
2025/10/12 04:58:20.583244 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 04:58:20.820356 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/eb-app.target → /etc/systemd/system/eb-app.target.

2025/10/12 04:58:20.820395 [INFO] Running command: systemctl start eb-app.target
2025/10/12 04:58:20.829924 [INFO] Running command: systemctl enable web.service
2025/10/12 04:58:21.106725 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 04:58:21.106758 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 04:58:21.118056 [INFO] Running command: systemctl is-active web.service
2025/10/12 04:58:21.125685 [INFO] Running command: systemctl start web.service
2025/10/12 04:58:21.214995 [INFO] Executing instruction: start X-Ray
2025/10/12 04:58:21.215010 [INFO] X-Ray is not enabled.
2025/10/12 04:58:21.215013 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 04:58:21.215030 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 04:58:21.263942 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 04:58:21.264084 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 04:58:21.269482 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 04:58:21.287329 [INFO] Running command: systemctl daemon-reload
2025/10/12 04:58:21.524056 [INFO] Running command: systemctl reset-failed
2025/10/12 04:58:21.532331 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 04:58:21.543887 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 04:58:21.553799 [INFO] Running command: systemctl start nginx.service
2025/10/12 04:58:21.651260 [INFO] Executing instruction: configureSqsd
2025/10/12 04:58:21.651280 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 04:58:21.651283 [INFO] Executing instruction: startSqsd
2025/10/12 04:58:21.651299 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 04:58:21.651302 [INFO] Executing instruction: Track pids in healthd
2025/10/12 04:58:21.651305 [INFO] This is an enhanced health env...
2025/10/12 04:58:21.651315 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 04:58:21.662465 [INFO] nginx.service healthd.service cfn-hup.service

2025/10/12 04:58:21.662494 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 04:58:21.673485 [INFO] web.service

2025/10/12 04:58:21.673722 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/12 04:58:21.673794 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/12 04:58:21.673843 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/12 04:58:21.673846 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/12 04:58:21.673850 [INFO] Executing cleanup logic
2025/10/12 04:58:21.673918 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760245097904,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760245101673,"severity":"INFO"}]}]}

2025/10/12 04:58:21.674033 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 05:02:40.525001 [INFO] Starting...
2025/10/12 05:02:40.525045 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 05:02:40.525066 [INFO] reading event message file
2025/10/12 05:02:40.525513 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 05:02:40.590677 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 05:02:40.891829 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 05:02:41.177452 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 05:02:41.177464 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 05:02:41.177467 [INFO] Engine command: (app-deploy)

2025/10/12 05:02:41.177470 [INFO] Downloading EB Application...
2025/10/12 05:02:41.177472 [INFO] Region: us-east-1
2025/10/12 05:02:41.177474 [INFO] envID: e-r2hnd7bhig
2025/10/12 05:02:41.177476 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 05:02:41.177478 [INFO] accountID: 433676943793
2025/10/12 05:02:41.177481 [INFO] Using manifest file name from command request
2025/10/12 05:02:41.177487 [INFO] Manifest name is : manifest_1760245358300
2025/10/12 05:02:41.177490 [INFO] Download app version manifest
2025/10/12 05:02:41.177650 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760245358300, expected bucket owner: 433676943793
2025/10/12 05:02:41.215739 [INFO] Download successful109bytes downloaded
2025/10/12 05:02:41.215888 [INFO] Trying to read and parse version manifest...
2025/10/12 05:02:41.215956 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251012_160231826273, expected bucket owner: 433676943793
2025/10/12 05:02:41.233805 [INFO] Download successful26622bytes downloaded
2025/10/12 05:02:41.234068 [INFO] Executing instruction: ElectLeader
2025/10/12 05:02:41.234073 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 05:02:41.234077 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 05:02:41.234091 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 350f5ec9-96be-4850-90b5-ed00ba491cec --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 05:02:41.533993 [INFO] Instance is Leader.
2025/10/12 05:02:41.534049 [INFO] Executing instruction: stopSqsd
2025/10/12 05:02:41.534056 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 05:02:41.534060 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 05:02:41.534064 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 05:02:41.534081 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 05:02:41.857108 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 05:02:41.857131 [INFO] Executing instruction: StageApplication
2025/10/12 05:02:41.857135 [INFO] Recreating /var/app/staging/
2025/10/12 05:02:41.857249 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 05:02:41.857258 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 05:02:41.863003 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 05:02:41.864011 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 05:02:41.864032 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 05:02:41.864047 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 05:02:41.864049 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 05:02:41.864053 [INFO] Executing instruction: InstallDependency
2025/10/12 05:02:41.864057 [INFO] checking dependencies file
2025/10/12 05:02:41.864067 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 05:02:41.864075 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 05:02:44.359516 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (2.1.0)
Requirement already satisfied: httpx==0.24.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.24.1)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (1.0.0)
Collecting structlog==23.2.0 (from -r requirements.txt (line 10))
  Downloading structlog-23.2.0-py3-none-any.whl.metadata (7.6 kB)
Collecting pyyaml==6.0.1 (from -r requirements.txt (line 11))
  Downloading PyYAML-6.0.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (2.1 kB)
Collecting supabase==2.3.4 (from -r requirements.txt (line 14))
  Downloading supabase-2.3.4-py3-none-any.whl.metadata (8.5 kB)
Collecting openai==1.6.1 (from -r requirements.txt (line 17))
  Downloading openai-1.6.1-py3-none-any.whl.metadata (17 kB)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 4)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 4)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 3)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore<0.18.0,>=0.15.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (0.17.3)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (1.3.1)
Collecting gotrue<3.0,>=1.3 (from supabase==2.3.4->-r requirements.txt (line 14))
  Downloading gotrue-2.12.4-py3-none-any.whl.metadata (2.0 kB)
Collecting postgrest<0.16.0,>=0.10.8 (from supabase==2.3.4->-r requirements.txt (line 14))
  Downloading postgrest-0.15.1-py3-none-any.whl.metadata (5.1 kB)
Collecting realtime<2.0.0,>=1.0.0 (from supabase==2.3.4->-r requirements.txt (line 14))
  Downloading realtime-1.0.6-py3-none-any.whl.metadata (2.6 kB)
Collecting storage3<0.8.0,>=0.5.3 (from supabase==2.3.4->-r requirements.txt (line 14))
  Downloading storage3-0.7.7-py3-none-any.whl.metadata (1.9 kB)
Collecting supafunc<0.4.0,>=0.3.1 (from supabase==2.3.4->-r requirements.txt (line 14))
  Downloading supafunc-0.3.3-py3-none-any.whl.metadata (1.2 kB)
Collecting distro<2,>=1.7.0 (from openai==1.6.1->-r requirements.txt (line 17))
  Downloading distro-1.9.0-py3-none-any.whl.metadata (6.8 kB)
Collecting tqdm>4 (from openai==1.6.1->-r requirements.txt (line 17))
  Downloading tqdm-4.67.1-py3-none-any.whl.metadata (57 kB)
INFO: pip is looking at multiple versions of gotrue to determine which version is compatible with other requirements. This could take a while.
Collecting gotrue<3.0,>=1.3 (from supabase==2.3.4->-r requirements.txt (line 14))
  Downloading gotrue-2.12.3-py3-none-any.whl.metadata (6.5 kB)
  Downloading gotrue-2.12.2-py3-none-any.whl.metadata (6.5 kB)
  Downloading gotrue-2.12.0-py3-none-any.whl.metadata (6.1 kB)
  Downloading gotrue-2.11.4-py3-none-any.whl.metadata (6.0 kB)
  Downloading gotrue-2.11.3-py3-none-any.whl.metadata (6.0 kB)
  Downloading gotrue-2.11.2-py3-none-any.whl.metadata (6.0 kB)
  Downloading gotrue-2.11.1-py3-none-any.whl.metadata (6.0 kB)
INFO: pip is still looking at multiple versions of gotrue to determine which version is compatible with other requirements. This could take a while.
  Downloading gotrue-2.11.0-py3-none-any.whl.metadata (6.0 kB)
  Downloading gotrue-2.10.0-py3-none-any.whl.metadata (6.0 kB)
  Downloading gotrue-2.9.3-py3-none-any.whl.metadata (6.0 kB)
  Downloading gotrue-2.9.2-py3-none-any.whl.metadata (6.0 kB)
  Downloading gotrue-2.9.1-py3-none-any.whl.metadata (6.0 kB)
Collecting h2<5,>=3 (from httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 14))
  Downloading h2-4.3.0-py3-none-any.whl.metadata (5.1 kB)
Collecting hyperframe<7,>=6.1 (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 14))
  Downloading hyperframe-6.1.0-py3-none-any.whl.metadata (4.3 kB)
Collecting hpack<5,>=4.1 (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 14))
  Downloading hpack-4.1.0-py3-none-any.whl.metadata (4.6 kB)
Collecting deprecation<3.0.0,>=2.1.0 (from postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 14))
  Downloading deprecation-2.1.0-py2.py3-none-any.whl.metadata (4.6 kB)
Collecting strenum<0.5.0,>=0.4.9 (from postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 14))
  Downloading StrEnum-0.4.15-py3-none-any.whl.metadata (5.3 kB)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from deprecation<3.0.0,>=2.1.0->postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 14)) (25.0)
Collecting python-dateutil<3.0.0,>=2.8.1 (from realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 14))
  Downloading python_dateutil-2.9.0.post0-py2.py3-none-any.whl.metadata (8.4 kB)
Collecting websockets<13,>=11 (from realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 14))
  Downloading websockets-12.0-cp311-cp311-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (6.6 kB)
Collecting six>=1.5 (from python-dateutil<3.0.0,>=2.8.1->realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 14))
  Downloading six-1.17.0-py2.py3-none-any.whl.metadata (1.7 kB)
Downloading structlog-23.2.0-py3-none-any.whl (62 kB)
Downloading PyYAML-6.0.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (757 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 757.7/757.7 kB 44.4 MB/s  0:00:00
Downloading supabase-2.3.4-py3-none-any.whl (15 kB)
Downloading openai-1.6.1-py3-none-any.whl (225 kB)
Downloading distro-1.9.0-py3-none-any.whl (20 kB)
Downloading gotrue-2.9.1-py3-none-any.whl (48 kB)
Downloading h2-4.3.0-py3-none-any.whl (61 kB)
Downloading hpack-4.1.0-py3-none-any.whl (34 kB)
Downloading hyperframe-6.1.0-py3-none-any.whl (13 kB)
Downloading postgrest-0.15.1-py3-none-any.whl (19 kB)
Downloading deprecation-2.1.0-py2.py3-none-any.whl (11 kB)
Downloading realtime-1.0.6-py3-none-any.whl (9.0 kB)
Downloading python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
Downloading storage3-0.7.7-py3-none-any.whl (16 kB)
Downloading StrEnum-0.4.15-py3-none-any.whl (8.9 kB)
Downloading supafunc-0.3.3-py3-none-any.whl (6.1 kB)
Downloading websockets-12.0-cp311-cp311-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (130 kB)
Downloading six-1.17.0-py2.py3-none-any.whl (11 kB)
Downloading tqdm-4.67.1-py3-none-any.whl (78 kB)
Installing collected packages: strenum, websockets, tqdm, structlog, six, pyyaml, hyperframe, hpack, distro, deprecation, python-dateutil, h2, realtime, supafunc, postgrest, openai, storage3, gotrue, supabase

Successfully installed deprecation-2.1.0 distro-1.9.0 gotrue-2.9.1 h2-4.3.0 hpack-4.1.0 hyperframe-6.1.0 openai-1.6.1 postgrest-0.15.1 python-dateutil-2.9.0.post0 pyyaml-6.0.1 realtime-1.0.6 six-1.17.0 storage3-0.7.7 strenum-0.4.15 structlog-23.2.0 supabase-2.3.4 supafunc-0.3.3 tqdm-4.67.1 websockets-12.0

2025/10/12 05:02:44.359557 [INFO] Executing instruction: check Procfile
2025/10/12 05:02:44.359609 [INFO] detected Procfile in application source bundle ...
2025/10/12 05:02:44.359615 [INFO] Executing instruction: configure X-Ray
2025/10/12 05:02:44.359620 [INFO] X-Ray is not enabled.
2025/10/12 05:02:44.359623 [INFO] Executing instruction: configure proxy server
2025/10/12 05:02:44.359644 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 05:02:44.369107 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 05:02:44.371367 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:02:44.383881 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/12 05:02:44.383914 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:02:44.392824 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 05:02:44.400000 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:02:44.408744 [INFO] Running command: systemctl stop healthd.service
2025/10/12 05:02:44.512066 [INFO] Running command: systemctl disable healthd.service
2025/10/12 05:02:44.787674 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/12 05:02:44.787758 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:02:45.125465 [INFO] Running command: systemctl reset-failed
2025/10/12 05:02:45.168406 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:02:45.444373 [INFO] Running command: systemctl reset-failed
2025/10/12 05:02:45.452823 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 05:02:45.460540 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 05:02:45.744379 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 05:02:45.752962 [INFO] Running command: systemctl enable healthd.service
2025/10/12 05:02:45.975507 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 05:02:45.975541 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:02:45.986863 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 05:02:45.994806 [INFO] Running command: systemctl start healthd.service
2025/10/12 05:02:46.036984 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 05:02:46.038171 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 05:02:46.039356 [INFO] Executing instruction: configure log streaming
2025/10/12 05:02:46.039366 [INFO] log streaming is not enabled
2025/10/12 05:02:46.039370 [INFO] disable log stream
2025/10/12 05:02:46.039382 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 05:02:46.058172 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 05:02:46.076869 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 05:02:46.076894 [INFO] Checking if logs need forced rotation
2025/10/12 05:02:46.076915 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 05:02:46.520251 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 05:02:46.914557 [INFO] Generating rsyslog config from Procfile
2025/10/12 05:02:46.916727 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 05:02:47.078543 [INFO] Executing instruction: PostBuildEbExtension
2025/10/12 05:02:47.078567 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/12 05:02:47.078580 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/12 05:02:47.402457 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/12 05:02:47.402480 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 05:02:47.402574 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 05:02:47.402577 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/12 05:02:47.402591 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/12 05:02:47.402603 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/12 05:02:47.402613 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/12 05:02:47.402618 [INFO] Executing instruction: stop X-Ray
2025/10/12 05:02:47.402620 [INFO] stop X-Ray ...
2025/10/12 05:02:47.402629 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 05:02:47.415551 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 05:02:47.415581 [INFO] Running command: systemctl stop xray.service
2025/10/12 05:02:47.429998 [INFO] Executing instruction: stop proxy
2025/10/12 05:02:47.430030 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 05:02:47.444301 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 05:02:47.444338 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:02:47.456112 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 05:02:47.464354 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:02:47.473358 [INFO] Running command: systemctl stop nginx.service
2025/10/12 05:02:47.696588 [INFO] Running command: systemctl disable nginx.service
2025/10/12 05:02:47.942152 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:02:48.196095 [INFO] Running command: systemctl reset-failed
2025/10/12 05:02:48.203618 [INFO] Executing instruction: FlipApplication
2025/10/12 05:02:48.203639 [INFO] Fetching environment variables...
2025/10/12 05:02:48.203800 [INFO] Purge old process...
2025/10/12 05:02:48.203820 [INFO] Running command: systemctl stop eb-app.target
2025/10/12 05:02:48.212761 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 05:02:48.222383 [INFO] web.service

2025/10/12 05:02:48.222405 [INFO] deregistering process: web
2025/10/12 05:02:48.222416 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 05:02:48.233121 [INFO] Running command: systemctl is-active web.service
2025/10/12 05:02:48.240678 [INFO] Running command: systemctl disable web.service
2025/10/12 05:02:48.589199 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/12 05:02:48.589277 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:02:48.956391 [INFO] Running command: systemctl reset-failed
2025/10/12 05:02:48.965025 [INFO] Running command: systemctl is-active web.service
2025/10/12 05:02:48.972348 [INFO] Process web has been fully terminated
2025/10/12 05:02:48.972379 [INFO] All processes have been fully terminated
2025/10/12 05:02:48.972384 [INFO] Removing /var/app/current/ if it exists
2025/10/12 05:02:48.973060 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 05:02:48.973082 [INFO] Register application processes...
2025/10/12 05:02:48.973085 [INFO] Registering the proc: web

2025/10/12 05:02:48.973095 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 05:02:48.985246 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:02:49.263704 [INFO] Running command: systemctl reset-failed
2025/10/12 05:02:49.271971 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 05:02:49.279929 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 05:02:49.553975 [INFO] Running command: systemctl start eb-app.target
2025/10/12 05:02:49.563102 [INFO] Running command: systemctl enable web.service
2025/10/12 05:02:49.844214 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 05:02:49.844247 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 05:02:49.854879 [INFO] Running command: systemctl is-active web.service
2025/10/12 05:02:49.862184 [INFO] Running command: systemctl start web.service
2025/10/12 05:02:49.928681 [INFO] Executing instruction: start X-Ray
2025/10/12 05:02:49.928708 [INFO] X-Ray is not enabled.
2025/10/12 05:02:49.928713 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 05:02:49.928742 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 05:02:49.956041 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 05:02:49.956374 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 05:02:49.961203 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:02:49.983238 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:02:50.319850 [INFO] Running command: systemctl reset-failed
2025/10/12 05:02:50.329686 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:02:50.341492 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 05:02:50.352013 [INFO] Running command: systemctl start nginx.service
2025/10/12 05:02:50.459710 [INFO] Executing instruction: configureSqsd
2025/10/12 05:02:50.459727 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 05:02:50.459730 [INFO] Executing instruction: startSqsd
2025/10/12 05:02:50.459732 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 05:02:50.459735 [INFO] Executing instruction: Track pids in healthd
2025/10/12 05:02:50.459739 [INFO] This is an enhanced health env...
2025/10/12 05:02:50.459748 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 05:02:50.474284 [INFO] nginx.service cfn-hup.service healthd.service

2025/10/12 05:02:50.474312 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 05:02:50.485273 [INFO] web.service

2025/10/12 05:02:50.485552 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/12 05:02:50.485568 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/12 05:02:50.485582 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/12 05:02:50.485584 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/12 05:02:50.485588 [INFO] Executing cleanup logic
2025/10/12 05:02:50.485671 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760245364359,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760245370485,"severity":"INFO"}]}]}

2025/10/12 05:02:50.486725 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 05:04:29.982391 [INFO] Starting...
2025/10/12 05:04:29.982445 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 05:04:29.982469 [INFO] reading event message file
2025/10/12 05:04:29.982896 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 05:04:30.049204 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 05:04:30.347799 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 05:04:30.649712 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 05:04:30.649724 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 05:04:30.649727 [INFO] Engine command: (app-deploy)

2025/10/12 05:04:30.649730 [INFO] Downloading EB Application...
2025/10/12 05:04:30.649733 [INFO] Region: us-east-1
2025/10/12 05:04:30.649735 [INFO] envID: e-r2hnd7bhig
2025/10/12 05:04:30.649737 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 05:04:30.649743 [INFO] accountID: 433676943793
2025/10/12 05:04:30.649745 [INFO] Using manifest file name from command request
2025/10/12 05:04:30.649751 [INFO] Manifest name is : manifest_1760245467558
2025/10/12 05:04:30.649753 [INFO] Download app version manifest
2025/10/12 05:04:30.649919 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760245467558, expected bucket owner: 433676943793
2025/10/12 05:04:30.686441 [INFO] Download successful109bytes downloaded
2025/10/12 05:04:30.686731 [INFO] Trying to read and parse version manifest...
2025/10/12 05:04:30.686899 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251012_160421258217, expected bucket owner: 433676943793
2025/10/12 05:04:30.706096 [INFO] Download successful26660bytes downloaded
2025/10/12 05:04:30.706366 [INFO] Executing instruction: ElectLeader
2025/10/12 05:04:30.706373 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 05:04:30.706376 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 05:04:30.706389 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 47598c8f-cc64-4f21-a05d-31913dda7f5c --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 05:04:31.000850 [INFO] Instance is Leader.
2025/10/12 05:04:31.000893 [INFO] Executing instruction: stopSqsd
2025/10/12 05:04:31.000900 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 05:04:31.000904 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 05:04:31.000907 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 05:04:31.000921 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 05:04:31.311996 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 05:04:31.312018 [INFO] Executing instruction: StageApplication
2025/10/12 05:04:31.312021 [INFO] Recreating /var/app/staging/
2025/10/12 05:04:31.312120 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 05:04:31.312131 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 05:04:31.317434 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 05:04:31.318382 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 05:04:31.318402 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 05:04:31.318416 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 05:04:31.318418 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 05:04:31.318422 [INFO] Executing instruction: InstallDependency
2025/10/12 05:04:31.318426 [INFO] checking dependencies file
2025/10/12 05:04:31.318437 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 05:04:31.318446 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 05:04:34.498544 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (2.1.0)
Requirement already satisfied: httpx==0.24.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.24.1)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (1.0.0)
Requirement already satisfied: structlog==23.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (23.2.0)
Requirement already satisfied: pyyaml==6.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (6.0.1)
Requirement already satisfied: supabase==2.3.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (2.3.4)
Requirement already satisfied: openai==1.6.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (1.6.1)
Collecting langchain==0.1.0 (from -r requirements.txt (line 20))
  Downloading langchain-0.1.0-py3-none-any.whl.metadata (13 kB)
Collecting langchain-openai==0.0.5 (from -r requirements.txt (line 21))
  Downloading langchain_openai-0.0.5-py3-none-any.whl.metadata (2.5 kB)
Collecting langchain-community==0.0.20 (from -r requirements.txt (line 22))
  Downloading langchain_community-0.0.20-py3-none-any.whl.metadata (8.1 kB)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 4)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 4)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 3)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore<0.18.0,>=0.15.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (0.17.3)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: gotrue<3.0,>=1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (2.9.1)
Requirement already satisfied: postgrest<0.16.0,>=0.10.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (0.15.1)
Requirement already satisfied: realtime<2.0.0,>=1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (1.0.6)
Requirement already satisfied: storage3<0.8.0,>=0.5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (0.7.7)
Requirement already satisfied: supafunc<0.4.0,>=0.3.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (0.3.3)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.6.1->-r requirements.txt (line 17)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.6.1->-r requirements.txt (line 17)) (4.67.1)
Collecting SQLAlchemy<3,>=1.4 (from langchain==0.1.0->-r requirements.txt (line 20))
  Downloading sqlalchemy-2.0.44-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (9.5 kB)
Collecting aiohttp<4.0.0,>=3.8.3 (from langchain==0.1.0->-r requirements.txt (line 20))
  Downloading aiohttp-3.13.0-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (8.1 kB)
Collecting dataclasses-json<0.7,>=0.5.7 (from langchain==0.1.0->-r requirements.txt (line 20))
  Downloading dataclasses_json-0.6.7-py3-none-any.whl.metadata (25 kB)
Collecting jsonpatch<2.0,>=1.33 (from langchain==0.1.0->-r requirements.txt (line 20))
  Downloading jsonpatch-1.33-py2.py3-none-any.whl.metadata (3.0 kB)
Collecting langchain-core<0.2,>=0.1.7 (from langchain==0.1.0->-r requirements.txt (line 20))
  Downloading langchain_core-0.1.53-py3-none-any.whl.metadata (5.9 kB)
Collecting langsmith<0.1.0,>=0.0.77 (from langchain==0.1.0->-r requirements.txt (line 20))
  Downloading langsmith-0.0.92-py3-none-any.whl.metadata (9.9 kB)
Collecting numpy<2,>=1 (from langchain==0.1.0->-r requirements.txt (line 20))
  Downloading numpy-1.26.4-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (61 kB)
Collecting requests<3,>=2 (from langchain==0.1.0->-r requirements.txt (line 20))
  Downloading requests-2.32.5-py3-none-any.whl.metadata (4.9 kB)
Collecting tenacity<9.0.0,>=8.1.0 (from langchain==0.1.0->-r requirements.txt (line 20))
  Downloading tenacity-8.5.0-py3-none-any.whl.metadata (1.2 kB)
INFO: pip is looking at multiple versions of langchain-openai to determine which version is compatible with other requirements. This could take a while.
Collecting fastapi==0.104.1 (from -r requirements.txt (line 2))
  Using cached fastapi-0.104.1-py3-none-any.whl.metadata (24 kB)
Collecting openai==1.6.1 (from -r requirements.txt (line 17))
  Using cached openai-1.6.1-py3-none-any.whl.metadata (17 kB)
Collecting supabase==2.3.4 (from -r requirements.txt (line 14))
  Using cached supabase-2.3.4-py3-none-any.whl.metadata (8.5 kB)
Collecting pyyaml==6.0.1 (from -r requirements.txt (line 11))
  Using cached PyYAML-6.0.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (2.1 kB)
Collecting structlog==23.2.0 (from -r requirements.txt (line 10))
  Using cached structlog-23.2.0-py3-none-any.whl.metadata (7.6 kB)
Collecting python-dotenv==1.0.0 (from -r requirements.txt (line 9))
  Using cached python_dotenv-1.0.0-py3-none-any.whl.metadata (21 kB)
INFO: pip is still looking at multiple versions of langchain-openai to determine which version is compatible with other requirements. This could take a while.
Collecting httpx==0.24.1 (from -r requirements.txt (line 8))
  Using cached httpx-0.24.1-py3-none-any.whl.metadata (7.4 kB)
Collecting pydantic-settings==2.1.0 (from -r requirements.txt (line 5))
  Using cached pydantic_settings-2.1.0-py3-none-any.whl.metadata (2.9 kB)
Collecting uvicorn==0.24.0 (from -r requirements.txt (line 3))
  Using cached uvicorn-0.24.0-py3-none-any.whl.metadata (6.4 kB)
Collecting pydantic==2.5.0 (from -r requirements.txt (line 4))
  Using cached pydantic-2.5.0-py3-none-any.whl.metadata (174 kB)
INFO: This is taking longer than usual. You might need to provide the dependency resolver with stricter constraints to reduce runtime. See https://pip.pypa.io/warnings/backtracking for guidance. If you want to abort this run, press Ctrl + C.

The conflict is caused by:
    The user requested openai==1.6.1
    langchain-openai 0.0.5 depends on openai<2.0.0 and >=1.10.0

To fix this you could try to:
1. loosen the range of package versions you've specified
2. remove package versions to allow pip to attempt to solve the dependency conflict


2025/10/12 05:04:34.498582 [INFO] ERROR: Cannot install -r requirements.txt (line 21) and openai==1.6.1 because these package versions have conflicting dependencies.
ERROR: ResolutionImpossible: for help visit https://pip.pypa.io/en/latest/topics/dependency-resolution/#dealing-with-dependency-conflicts

2025/10/12 05:04:34.498596 [ERROR] An error occurred during execution of command [app-deploy] - [InstallDependency]. Stop running the command. Error: fail to install dependencies with requirements.txt file with error Command /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt failed with error exit status 1. Stderr:ERROR: Cannot install -r requirements.txt (line 21) and openai==1.6.1 because these package versions have conflicting dependencies.
ERROR: ResolutionImpossible: for help visit https://pip.pypa.io/en/latest/topics/dependency-resolution/#dealing-with-dependency-conflicts
 

2025/10/12 05:04:34.498598 [INFO] Executing cleanup logic
2025/10/12 05:04:34.498680 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment failed to install application dependencies. The deployment failed.","timestamp":1760245474498,"severity":"ERROR"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1760245474498,"severity":"ERROR"}]}]}

2025/10/12 05:04:34.498859 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 05:06:20.000553 [INFO] Starting...
2025/10/12 05:06:20.000611 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 05:06:20.000634 [INFO] reading event message file
2025/10/12 05:06:20.000982 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 05:06:20.065122 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 05:06:20.355440 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 05:06:20.656345 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 05:06:20.656359 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 05:06:20.656363 [INFO] Engine command: (app-deploy)

2025/10/12 05:06:20.656368 [INFO] Downloading EB Application...
2025/10/12 05:06:20.656371 [INFO] Region: us-east-1
2025/10/12 05:06:20.656374 [INFO] envID: e-r2hnd7bhig
2025/10/12 05:06:20.656377 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 05:06:20.656380 [INFO] accountID: 433676943793
2025/10/12 05:06:20.656382 [INFO] Using manifest file name from command request
2025/10/12 05:06:20.656388 [INFO] Manifest name is : manifest_1760245577730
2025/10/12 05:06:20.656390 [INFO] Download app version manifest
2025/10/12 05:06:20.656580 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760245577730, expected bucket owner: 433676943793
2025/10/12 05:06:20.689782 [INFO] Download successful109bytes downloaded
2025/10/12 05:06:20.689940 [INFO] Trying to read and parse version manifest...
2025/10/12 05:06:20.690029 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251012_160611722352, expected bucket owner: 433676943793
2025/10/12 05:06:20.709956 [INFO] Download successful26646bytes downloaded
2025/10/12 05:06:20.710297 [INFO] Executing instruction: ElectLeader
2025/10/12 05:06:20.710305 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 05:06:20.710313 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 05:06:20.710323 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 588ce10e-b11a-45ff-a240-f2a49d88ceb3 --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 05:06:21.012200 [INFO] Instance is Leader.
2025/10/12 05:06:21.012246 [INFO] Executing instruction: stopSqsd
2025/10/12 05:06:21.012250 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 05:06:21.012252 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 05:06:21.012255 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 05:06:21.012267 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 05:06:21.318968 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 05:06:21.318999 [INFO] Executing instruction: StageApplication
2025/10/12 05:06:21.319002 [INFO] Recreating /var/app/staging/
2025/10/12 05:06:21.319943 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 05:06:21.319988 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 05:06:21.325964 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 05:06:21.326939 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 05:06:21.326959 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 05:06:21.326973 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 05:06:21.326976 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 05:06:21.326980 [INFO] Executing instruction: InstallDependency
2025/10/12 05:06:21.326984 [INFO] checking dependencies file
2025/10/12 05:06:21.326995 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 05:06:21.327004 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 05:06:22.245170 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (2.1.0)
Requirement already satisfied: httpx==0.24.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.24.1)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (1.0.0)
Requirement already satisfied: structlog==23.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (23.2.0)
Requirement already satisfied: pyyaml==6.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (6.0.1)
Requirement already satisfied: supabase==2.3.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (2.3.4)
Requirement already satisfied: openai==1.6.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (1.6.1)
Collecting sqlparse==0.4.4 (from -r requirements.txt (line 20))
  Downloading sqlparse-0.4.4-py3-none-any.whl.metadata (4.0 kB)
Collecting asyncpg==0.29.0 (from -r requirements.txt (line 21))
  Downloading asyncpg-0.29.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (4.4 kB)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 4)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 4)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 3)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore<0.18.0,>=0.15.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (0.17.3)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: gotrue<3.0,>=1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (2.9.1)
Requirement already satisfied: postgrest<0.16.0,>=0.10.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (0.15.1)
Requirement already satisfied: realtime<2.0.0,>=1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (1.0.6)
Requirement already satisfied: storage3<0.8.0,>=0.5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (0.7.7)
Requirement already satisfied: supafunc<0.4.0,>=0.3.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (0.3.3)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.6.1->-r requirements.txt (line 17)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.6.1->-r requirements.txt (line 17)) (4.67.1)
Collecting async-timeout>=4.0.3 (from asyncpg==0.29.0->-r requirements.txt (line 21))
  Downloading async_timeout-5.0.1-py3-none-any.whl.metadata (5.1 kB)
Requirement already satisfied: h2<5,>=3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 14)) (4.3.0)
Requirement already satisfied: hyperframe<7,>=6.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 14)) (6.1.0)
Requirement already satisfied: hpack<5,>=4.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 14)) (4.1.0)
Requirement already satisfied: deprecation<3.0.0,>=2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 14)) (2.1.0)
Requirement already satisfied: strenum<0.5.0,>=0.4.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 14)) (0.4.15)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from deprecation<3.0.0,>=2.1.0->postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 14)) (25.0)
Requirement already satisfied: python-dateutil<3.0.0,>=2.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 14)) (2.9.0.post0)
Requirement already satisfied: websockets<13,>=11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 14)) (12.0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.8.1->realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 14)) (1.17.0)
Downloading sqlparse-0.4.4-py3-none-any.whl (41 kB)
Downloading asyncpg-0.29.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.8 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.8/2.8 MB 127.3 MB/s  0:00:00
Downloading async_timeout-5.0.1-py3-none-any.whl (6.2 kB)
Installing collected packages: sqlparse, async-timeout, asyncpg

Successfully installed async-timeout-5.0.1 asyncpg-0.29.0 sqlparse-0.4.4

2025/10/12 05:06:22.245206 [INFO] Executing instruction: check Procfile
2025/10/12 05:06:22.245247 [INFO] detected Procfile in application source bundle ...
2025/10/12 05:06:22.245258 [INFO] Executing instruction: configure X-Ray
2025/10/12 05:06:22.245261 [INFO] X-Ray is not enabled.
2025/10/12 05:06:22.245265 [INFO] Executing instruction: configure proxy server
2025/10/12 05:06:22.245284 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 05:06:22.254668 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 05:06:22.256814 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:06:22.267763 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/12 05:06:22.267789 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:06:22.276669 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 05:06:22.283989 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:06:22.293616 [INFO] Running command: systemctl stop healthd.service
2025/10/12 05:06:22.382512 [INFO] Running command: systemctl disable healthd.service
2025/10/12 05:06:22.615968 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/12 05:06:22.616050 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:06:22.900013 [INFO] Running command: systemctl reset-failed
2025/10/12 05:06:22.910958 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:06:23.185802 [INFO] Running command: systemctl reset-failed
2025/10/12 05:06:23.194445 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 05:06:23.202613 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 05:06:23.474349 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 05:06:23.482728 [INFO] Running command: systemctl enable healthd.service
2025/10/12 05:06:23.757869 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 05:06:23.757901 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:06:23.768703 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 05:06:23.776778 [INFO] Running command: systemctl start healthd.service
2025/10/12 05:06:23.840600 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 05:06:23.841720 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 05:06:23.842867 [INFO] Executing instruction: configure log streaming
2025/10/12 05:06:23.842876 [INFO] log streaming is not enabled
2025/10/12 05:06:23.842878 [INFO] disable log stream
2025/10/12 05:06:23.842889 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 05:06:23.855461 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 05:06:23.867590 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 05:06:23.867610 [INFO] Checking if logs need forced rotation
2025/10/12 05:06:23.867623 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 05:06:24.214681 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 05:06:24.595776 [INFO] Generating rsyslog config from Procfile
2025/10/12 05:06:24.597946 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 05:06:24.867696 [INFO] Executing instruction: PostBuildEbExtension
2025/10/12 05:06:24.867738 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/12 05:06:24.867756 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/12 05:06:25.206828 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/12 05:06:25.206874 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 05:06:25.206968 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 05:06:25.206972 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/12 05:06:25.206985 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/12 05:06:25.206997 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/12 05:06:25.206999 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/12 05:06:25.207003 [INFO] Executing instruction: stop X-Ray
2025/10/12 05:06:25.207006 [INFO] stop X-Ray ...
2025/10/12 05:06:25.207014 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 05:06:25.221043 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 05:06:25.221074 [INFO] Running command: systemctl stop xray.service
2025/10/12 05:06:25.236275 [INFO] Executing instruction: stop proxy
2025/10/12 05:06:25.236302 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 05:06:25.250196 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 05:06:25.250233 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:06:25.263507 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 05:06:25.271546 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:06:25.280684 [INFO] Running command: systemctl stop nginx.service
2025/10/12 05:06:25.505561 [INFO] Running command: systemctl disable nginx.service
2025/10/12 05:06:25.767845 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:06:26.046018 [INFO] Running command: systemctl reset-failed
2025/10/12 05:06:26.054246 [INFO] Executing instruction: FlipApplication
2025/10/12 05:06:26.054276 [INFO] Fetching environment variables...
2025/10/12 05:06:26.054444 [INFO] Purge old process...
2025/10/12 05:06:26.054541 [INFO] Running command: systemctl stop eb-app.target
2025/10/12 05:06:26.063941 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 05:06:26.074100 [INFO] web.service

2025/10/12 05:06:26.074124 [INFO] deregistering process: web
2025/10/12 05:06:26.074134 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 05:06:26.085162 [INFO] Running command: systemctl is-active web.service
2025/10/12 05:06:26.092584 [INFO] Running command: systemctl disable web.service
2025/10/12 05:06:26.416796 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/12 05:06:26.416874 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:06:26.772666 [INFO] Running command: systemctl reset-failed
2025/10/12 05:06:26.781174 [INFO] Running command: systemctl is-active web.service
2025/10/12 05:06:26.788893 [INFO] Process web has been fully terminated
2025/10/12 05:06:26.788906 [INFO] All processes have been fully terminated
2025/10/12 05:06:26.788909 [INFO] Removing /var/app/current/ if it exists
2025/10/12 05:06:26.789832 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 05:06:26.789853 [INFO] Register application processes...
2025/10/12 05:06:26.789857 [INFO] Registering the proc: web

2025/10/12 05:06:26.789864 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 05:06:26.802191 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:06:27.074400 [INFO] Running command: systemctl reset-failed
2025/10/12 05:06:27.083195 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 05:06:27.091742 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 05:06:27.364559 [INFO] Running command: systemctl start eb-app.target
2025/10/12 05:06:27.373339 [INFO] Running command: systemctl enable web.service
2025/10/12 05:06:27.653412 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 05:06:27.653445 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 05:06:27.664502 [INFO] Running command: systemctl is-active web.service
2025/10/12 05:06:27.672127 [INFO] Running command: systemctl start web.service
2025/10/12 05:06:27.733305 [INFO] Executing instruction: start X-Ray
2025/10/12 05:06:27.733322 [INFO] X-Ray is not enabled.
2025/10/12 05:06:27.733325 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 05:06:27.733344 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 05:06:27.751778 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 05:06:27.752031 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 05:06:27.755517 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:06:27.772088 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:06:28.136467 [INFO] Running command: systemctl reset-failed
2025/10/12 05:06:28.147937 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:06:28.168070 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 05:06:28.183099 [INFO] Running command: systemctl start nginx.service
2025/10/12 05:06:28.362745 [INFO] Executing instruction: configureSqsd
2025/10/12 05:06:28.362762 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 05:06:28.362766 [INFO] Executing instruction: startSqsd
2025/10/12 05:06:28.362769 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 05:06:28.362773 [INFO] Executing instruction: Track pids in healthd
2025/10/12 05:06:28.362783 [INFO] This is an enhanced health env...
2025/10/12 05:06:28.362795 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 05:06:28.377763 [INFO] cfn-hup.service nginx.service healthd.service

2025/10/12 05:06:28.377806 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 05:06:28.394801 [INFO] web.service

2025/10/12 05:06:28.395134 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/12 05:06:28.395156 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/12 05:06:28.395175 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/12 05:06:28.395179 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/12 05:06:28.395185 [INFO] Executing cleanup logic
2025/10/12 05:06:28.395280 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760245582245,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760245588395,"severity":"INFO"}]}]}

2025/10/12 05:06:28.396377 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 05:09:06.924827 [INFO] Starting...
2025/10/12 05:09:06.924874 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 05:09:06.924893 [INFO] reading event message file
2025/10/12 05:09:06.925201 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 05:09:06.987180 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 05:09:07.289307 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 05:09:07.571862 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 05:09:07.571919 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 05:09:07.571924 [INFO] Engine command: (app-deploy)

2025/10/12 05:09:07.571927 [INFO] Downloading EB Application...
2025/10/12 05:09:07.571929 [INFO] Region: us-east-1
2025/10/12 05:09:07.571932 [INFO] envID: e-r2hnd7bhig
2025/10/12 05:09:07.571934 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 05:09:07.571936 [INFO] accountID: 433676943793
2025/10/12 05:09:07.571939 [INFO] Using manifest file name from command request
2025/10/12 05:09:07.571949 [INFO] Manifest name is : manifest_1760245744715
2025/10/12 05:09:07.571952 [INFO] Download app version manifest
2025/10/12 05:09:07.572165 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760245744715, expected bucket owner: 433676943793
2025/10/12 05:09:07.614985 [INFO] Download successful109bytes downloaded
2025/10/12 05:09:07.615134 [INFO] Trying to read and parse version manifest...
2025/10/12 05:09:07.615214 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251012_160858412690, expected bucket owner: 433676943793
2025/10/12 05:09:07.656111 [INFO] Download successful27796bytes downloaded
2025/10/12 05:09:07.656390 [INFO] Executing instruction: ElectLeader
2025/10/12 05:09:07.656397 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 05:09:07.656400 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 05:09:07.656411 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 9f775392-4e1b-4dc5-ab17-710205e7a867 --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 05:09:07.943615 [INFO] Instance is Leader.
2025/10/12 05:09:07.943659 [INFO] Executing instruction: stopSqsd
2025/10/12 05:09:07.943663 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 05:09:07.943667 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 05:09:07.943671 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 05:09:07.943687 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 05:09:08.249218 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 05:09:08.249255 [INFO] Executing instruction: StageApplication
2025/10/12 05:09:08.249259 [INFO] Recreating /var/app/staging/
2025/10/12 05:09:08.249431 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 05:09:08.249446 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 05:09:08.254967 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 05:09:08.255907 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 05:09:08.255987 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 05:09:08.256002 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 05:09:08.256004 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 05:09:08.256009 [INFO] Executing instruction: InstallDependency
2025/10/12 05:09:08.256013 [INFO] checking dependencies file
2025/10/12 05:09:08.256024 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 05:09:08.256033 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 05:09:08.759302 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (2.1.0)
Requirement already satisfied: httpx==0.24.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.24.1)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (1.0.0)
Requirement already satisfied: structlog==23.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (23.2.0)
Requirement already satisfied: pyyaml==6.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (6.0.1)
Requirement already satisfied: supabase==2.3.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (2.3.4)
Requirement already satisfied: openai==1.6.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (1.6.1)
Requirement already satisfied: sqlparse==0.4.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 20)) (0.4.4)
Requirement already satisfied: asyncpg==0.29.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 21)) (0.29.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 4)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 4)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 3)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore<0.18.0,>=0.15.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (0.17.3)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: gotrue<3.0,>=1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (2.9.1)
Requirement already satisfied: postgrest<0.16.0,>=0.10.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (0.15.1)
Requirement already satisfied: realtime<2.0.0,>=1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (1.0.6)
Requirement already satisfied: storage3<0.8.0,>=0.5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (0.7.7)
Requirement already satisfied: supafunc<0.4.0,>=0.3.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (0.3.3)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.6.1->-r requirements.txt (line 17)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.6.1->-r requirements.txt (line 17)) (4.67.1)
Requirement already satisfied: async-timeout>=4.0.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from asyncpg==0.29.0->-r requirements.txt (line 21)) (5.0.1)
Requirement already satisfied: h2<5,>=3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 14)) (4.3.0)
Requirement already satisfied: hyperframe<7,>=6.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 14)) (6.1.0)
Requirement already satisfied: hpack<5,>=4.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 14)) (4.1.0)
Requirement already satisfied: deprecation<3.0.0,>=2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 14)) (2.1.0)
Requirement already satisfied: strenum<0.5.0,>=0.4.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 14)) (0.4.15)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from deprecation<3.0.0,>=2.1.0->postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 14)) (25.0)
Requirement already satisfied: python-dateutil<3.0.0,>=2.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 14)) (2.9.0.post0)
Requirement already satisfied: websockets<13,>=11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 14)) (12.0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.8.1->realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 14)) (1.17.0)

2025/10/12 05:09:08.759335 [INFO] Executing instruction: check Procfile
2025/10/12 05:09:08.759383 [INFO] detected Procfile in application source bundle ...
2025/10/12 05:09:08.759390 [INFO] Executing instruction: configure X-Ray
2025/10/12 05:09:08.759394 [INFO] X-Ray is not enabled.
2025/10/12 05:09:08.759396 [INFO] Executing instruction: configure proxy server
2025/10/12 05:09:08.759412 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 05:09:08.768365 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 05:09:08.770576 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:09:08.818008 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/12 05:09:08.818041 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:09:08.833492 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 05:09:08.844078 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:09:08.856421 [INFO] Running command: systemctl stop healthd.service
2025/10/12 05:09:08.992448 [INFO] Running command: systemctl disable healthd.service
2025/10/12 05:09:09.222850 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/12 05:09:09.222915 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:09:09.488814 [INFO] Running command: systemctl reset-failed
2025/10/12 05:09:09.499543 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:09:09.756645 [INFO] Running command: systemctl reset-failed
2025/10/12 05:09:09.764777 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 05:09:09.772756 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 05:09:10.050150 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 05:09:10.059140 [INFO] Running command: systemctl enable healthd.service
2025/10/12 05:09:10.318164 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 05:09:10.318194 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:09:10.328906 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 05:09:10.335953 [INFO] Running command: systemctl start healthd.service
2025/10/12 05:09:10.389748 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 05:09:10.390992 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 05:09:10.392106 [INFO] Executing instruction: configure log streaming
2025/10/12 05:09:10.392118 [INFO] log streaming is not enabled
2025/10/12 05:09:10.392122 [INFO] disable log stream
2025/10/12 05:09:10.392134 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 05:09:10.412216 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 05:09:10.429147 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 05:09:10.429171 [INFO] Checking if logs need forced rotation
2025/10/12 05:09:10.429190 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 05:09:10.865820 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 05:09:11.238594 [INFO] Generating rsyslog config from Procfile
2025/10/12 05:09:11.240656 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 05:09:11.346993 [INFO] Executing instruction: PostBuildEbExtension
2025/10/12 05:09:11.347012 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/12 05:09:11.347027 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/12 05:09:11.658143 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/12 05:09:11.658174 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 05:09:11.658268 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 05:09:11.658272 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/12 05:09:11.658286 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/12 05:09:11.658297 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/12 05:09:11.658300 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/12 05:09:11.658304 [INFO] Executing instruction: stop X-Ray
2025/10/12 05:09:11.658306 [INFO] stop X-Ray ...
2025/10/12 05:09:11.658315 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 05:09:11.670035 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 05:09:11.670064 [INFO] Running command: systemctl stop xray.service
2025/10/12 05:09:11.682113 [INFO] Executing instruction: stop proxy
2025/10/12 05:09:11.682140 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 05:09:11.695920 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 05:09:11.695993 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:09:11.708120 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 05:09:11.716117 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:09:11.725467 [INFO] Running command: systemctl stop nginx.service
2025/10/12 05:09:11.955611 [INFO] Running command: systemctl disable nginx.service
2025/10/12 05:09:12.194598 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:09:12.424281 [INFO] Running command: systemctl reset-failed
2025/10/12 05:09:12.431687 [INFO] Executing instruction: FlipApplication
2025/10/12 05:09:12.431705 [INFO] Fetching environment variables...
2025/10/12 05:09:12.431833 [INFO] Purge old process...
2025/10/12 05:09:12.431851 [INFO] Running command: systemctl stop eb-app.target
2025/10/12 05:09:12.440149 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 05:09:12.450305 [INFO] web.service

2025/10/12 05:09:12.450325 [INFO] deregistering process: web
2025/10/12 05:09:12.450334 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 05:09:12.460353 [INFO] Running command: systemctl is-active web.service
2025/10/12 05:09:12.467829 [INFO] Running command: systemctl disable web.service
2025/10/12 05:09:12.743734 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/12 05:09:12.743803 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:09:13.117356 [INFO] Running command: systemctl reset-failed
2025/10/12 05:09:13.125802 [INFO] Running command: systemctl is-active web.service
2025/10/12 05:09:13.133107 [INFO] Process web has been fully terminated
2025/10/12 05:09:13.133130 [INFO] All processes have been fully terminated
2025/10/12 05:09:13.133134 [INFO] Removing /var/app/current/ if it exists
2025/10/12 05:09:13.134251 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 05:09:13.134275 [INFO] Register application processes...
2025/10/12 05:09:13.134280 [INFO] Registering the proc: web

2025/10/12 05:09:13.134287 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 05:09:13.147028 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:09:13.412656 [INFO] Running command: systemctl reset-failed
2025/10/12 05:09:13.420812 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 05:09:13.428826 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 05:09:13.675683 [INFO] Running command: systemctl start eb-app.target
2025/10/12 05:09:13.684931 [INFO] Running command: systemctl enable web.service
2025/10/12 05:09:13.935009 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 05:09:13.935040 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 05:09:13.946143 [INFO] Running command: systemctl is-active web.service
2025/10/12 05:09:13.953280 [INFO] Running command: systemctl start web.service
2025/10/12 05:09:14.019255 [INFO] Executing instruction: start X-Ray
2025/10/12 05:09:14.019278 [INFO] X-Ray is not enabled.
2025/10/12 05:09:14.019283 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 05:09:14.019310 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 05:09:14.046653 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 05:09:14.046960 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 05:09:14.051602 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:09:14.073519 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:09:14.517932 [INFO] Running command: systemctl reset-failed
2025/10/12 05:09:14.529160 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:09:14.549951 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 05:09:14.565044 [INFO] Running command: systemctl start nginx.service
2025/10/12 05:09:14.704533 [INFO] Executing instruction: configureSqsd
2025/10/12 05:09:14.704553 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 05:09:14.704557 [INFO] Executing instruction: startSqsd
2025/10/12 05:09:14.704560 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 05:09:14.704564 [INFO] Executing instruction: Track pids in healthd
2025/10/12 05:09:14.704568 [INFO] This is an enhanced health env...
2025/10/12 05:09:14.704580 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 05:09:14.721758 [INFO] nginx.service healthd.service cfn-hup.service

2025/10/12 05:09:14.721791 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 05:09:14.738031 [INFO] web.service

2025/10/12 05:09:14.738378 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/12 05:09:14.738481 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/12 05:09:14.738501 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/12 05:09:14.738505 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/12 05:09:14.738517 [INFO] Executing cleanup logic
2025/10/12 05:09:14.738612 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760245748759,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760245754738,"severity":"INFO"}]}]}

2025/10/12 05:09:14.739756 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 05:17:33.864096 [INFO] Starting...
2025/10/12 05:17:33.864144 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 05:17:33.864169 [INFO] reading event message file
2025/10/12 05:17:33.864523 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 05:17:33.929917 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 05:17:34.223850 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 05:17:34.508861 [INFO] checking whether command config-deploy is applicable to this instance...
2025/10/12 05:17:34.508874 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 05:17:34.508876 [INFO] Engine command: (config-deploy)

2025/10/12 05:17:34.508880 [INFO] Using manifest file name from command request
2025/10/12 05:17:34.508885 [INFO] Unable to get version manifest file.
2025/10/12 05:17:34.508887 [INFO] Downloading latest manifest available.
2025/10/12 05:17:34.508889 [INFO] Download latest app version manifest
2025/10/12 05:17:34.509010 [INFO] resources/environments/e-r2hnd7bhig/_runtime/versions/manifest
2025/10/12 05:17:34.550678 [INFO] latestManifest key *: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760246233459

2025/10/12 05:17:34.550894 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760246233459, expected bucket owner: 433676943793
2025/10/12 05:17:34.591694 [INFO] Download successful150bytes downloaded
2025/10/12 05:17:34.591858 [INFO] Trying to read and parse version manifest...
2025/10/12 05:17:34.592009 [INFO] Executing instruction: stopSqsd
2025/10/12 05:17:34.592013 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 05:17:34.592015 [INFO] Executing instruction: StageApplication
2025/10/12 05:17:34.592018 [INFO] Recreating /var/app/staging/
2025/10/12 05:17:34.592070 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 05:17:34.592080 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 05:17:34.597660 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 05:17:34.598670 [INFO] Executing instruction: RunConfigDeployPreBuildHooks
2025/10/12 05:17:34.598707 [INFO] Executing platform hooks in .platform/confighooks/prebuild/
2025/10/12 05:17:34.598726 [INFO] The dir .platform/confighooks/prebuild/ does not exist
2025/10/12 05:17:34.598729 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/prebuild
2025/10/12 05:17:34.598733 [INFO] Executing instruction: InstallDependency
2025/10/12 05:17:34.598737 [INFO] checking dependencies file
2025/10/12 05:17:34.598750 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 05:17:34.598760 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 05:17:35.105694 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (2.1.0)
Requirement already satisfied: httpx==0.24.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.24.1)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (1.0.0)
Requirement already satisfied: structlog==23.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (23.2.0)
Requirement already satisfied: pyyaml==6.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (6.0.1)
Requirement already satisfied: supabase==2.3.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (2.3.4)
Requirement already satisfied: openai==1.6.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (1.6.1)
Requirement already satisfied: sqlparse==0.4.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 20)) (0.4.4)
Requirement already satisfied: asyncpg==0.29.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 21)) (0.29.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 4)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 4)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 3)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore<0.18.0,>=0.15.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (0.17.3)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: gotrue<3.0,>=1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (2.9.1)
Requirement already satisfied: postgrest<0.16.0,>=0.10.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (0.15.1)
Requirement already satisfied: realtime<2.0.0,>=1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (1.0.6)
Requirement already satisfied: storage3<0.8.0,>=0.5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (0.7.7)
Requirement already satisfied: supafunc<0.4.0,>=0.3.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (0.3.3)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.6.1->-r requirements.txt (line 17)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.6.1->-r requirements.txt (line 17)) (4.67.1)
Requirement already satisfied: async-timeout>=4.0.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from asyncpg==0.29.0->-r requirements.txt (line 21)) (5.0.1)
Requirement already satisfied: h2<5,>=3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 14)) (4.3.0)
Requirement already satisfied: hyperframe<7,>=6.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 14)) (6.1.0)
Requirement already satisfied: hpack<5,>=4.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 14)) (4.1.0)
Requirement already satisfied: deprecation<3.0.0,>=2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 14)) (2.1.0)
Requirement already satisfied: strenum<0.5.0,>=0.4.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 14)) (0.4.15)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from deprecation<3.0.0,>=2.1.0->postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 14)) (25.0)
Requirement already satisfied: python-dateutil<3.0.0,>=2.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 14)) (2.9.0.post0)
Requirement already satisfied: websockets<13,>=11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 14)) (12.0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.8.1->realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 14)) (1.17.0)

2025/10/12 05:17:35.105748 [INFO] Executing instruction: check Procfile
2025/10/12 05:17:35.105798 [INFO] detected Procfile in application source bundle ...
2025/10/12 05:17:35.105805 [INFO] Executing instruction: configure X-Ray
2025/10/12 05:17:35.105809 [INFO] X-Ray is not enabled.
2025/10/12 05:17:35.105813 [INFO] Executing instruction: configure proxy server
2025/10/12 05:17:35.105831 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 05:17:35.110507 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 05:17:35.111598 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:17:35.179801 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/12 05:17:35.179836 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:17:35.192860 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 05:17:35.203706 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:17:35.217031 [INFO] Running command: systemctl stop healthd.service
2025/10/12 05:17:35.293064 [INFO] Running command: systemctl disable healthd.service
2025/10/12 05:17:35.529210 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/12 05:17:35.529472 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:17:35.854970 [INFO] Running command: systemctl reset-failed
2025/10/12 05:17:35.866168 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:17:36.108921 [INFO] Running command: systemctl reset-failed
2025/10/12 05:17:36.117264 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 05:17:36.125568 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 05:17:36.389883 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 05:17:36.399383 [INFO] Running command: systemctl enable healthd.service
2025/10/12 05:17:36.676718 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 05:17:36.676751 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:17:36.687803 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 05:17:36.695617 [INFO] Running command: systemctl start healthd.service
2025/10/12 05:17:36.787298 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 05:17:36.787925 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 05:17:36.788501 [INFO] Executing instruction: GetSetupProxyLog
2025/10/12 05:17:36.788659 [INFO] Executing instruction: configure log streaming
2025/10/12 05:17:36.788665 [INFO] log streaming is not enabled
2025/10/12 05:17:36.788669 [INFO] disable log stream
2025/10/12 05:17:36.788680 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 05:17:36.806637 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 05:17:36.825848 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 05:17:36.825872 [INFO] Checking if logs need forced rotation
2025/10/12 05:17:36.825890 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 05:17:37.261485 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 05:17:37.647764 [INFO] Generating rsyslog config from Procfile
2025/10/12 05:17:37.648883 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 05:17:37.826333 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 05:17:37.826424 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 05:17:37.826429 [INFO] Executing instruction: RunConfigDeployPreDeployHooks
2025/10/12 05:17:37.826454 [INFO] Executing platform hooks in .platform/confighooks/predeploy/
2025/10/12 05:17:37.826471 [INFO] The dir .platform/confighooks/predeploy/ does not exist
2025/10/12 05:17:37.826474 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/predeploy
2025/10/12 05:17:37.826478 [INFO] Executing instruction: stop X-Ray
2025/10/12 05:17:37.826481 [INFO] stop X-Ray ...
2025/10/12 05:17:37.826492 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 05:17:37.839597 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 05:17:37.839626 [INFO] Running command: systemctl stop xray.service
2025/10/12 05:17:37.853275 [INFO] Executing instruction: stop proxy
2025/10/12 05:17:37.853315 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 05:17:37.867858 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 05:17:37.867895 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:17:37.881369 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 05:17:37.889348 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:17:37.898335 [INFO] Running command: systemctl stop nginx.service
2025/10/12 05:17:38.085653 [INFO] Running command: systemctl disable nginx.service
2025/10/12 05:17:38.332191 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:17:38.605352 [INFO] Running command: systemctl reset-failed
2025/10/12 05:17:38.613646 [INFO] Executing instruction: FlipApplication
2025/10/12 05:17:38.613670 [INFO] Fetching environment variables...
2025/10/12 05:17:38.613986 [INFO] Purge old process...
2025/10/12 05:17:38.614010 [INFO] Running command: systemctl stop eb-app.target
2025/10/12 05:17:38.623351 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 05:17:38.633536 [INFO] web.service

2025/10/12 05:17:38.633557 [INFO] deregistering process: web
2025/10/12 05:17:38.633566 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 05:17:38.644666 [INFO] Running command: systemctl is-active web.service
2025/10/12 05:17:38.652379 [INFO] Running command: systemctl disable web.service
2025/10/12 05:17:38.938556 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/12 05:17:38.938631 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:17:39.190014 [INFO] Running command: systemctl reset-failed
2025/10/12 05:17:39.198682 [INFO] Running command: systemctl is-active web.service
2025/10/12 05:17:39.206124 [INFO] Process web has been fully terminated
2025/10/12 05:17:39.206146 [INFO] All processes have been fully terminated
2025/10/12 05:17:39.206150 [INFO] Removing /var/app/current/ if it exists
2025/10/12 05:17:39.207270 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 05:17:39.207291 [INFO] Register application processes...
2025/10/12 05:17:39.207295 [INFO] Registering the proc: web

2025/10/12 05:17:39.207302 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 05:17:39.218323 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:17:39.475445 [INFO] Running command: systemctl reset-failed
2025/10/12 05:17:39.483010 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 05:17:39.491078 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 05:17:39.773156 [INFO] Running command: systemctl start eb-app.target
2025/10/12 05:17:39.782595 [INFO] Running command: systemctl enable web.service
2025/10/12 05:17:40.053798 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 05:17:40.053834 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 05:17:40.065211 [INFO] Running command: systemctl is-active web.service
2025/10/12 05:17:40.073519 [INFO] Running command: systemctl start web.service
2025/10/12 05:17:40.119874 [INFO] Executing instruction: start X-Ray
2025/10/12 05:17:40.119901 [INFO] X-Ray is not enabled.
2025/10/12 05:17:40.119905 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 05:17:40.119932 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 05:17:40.145703 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 05:17:40.145953 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 05:17:40.149745 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:17:40.171038 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:17:40.623095 [INFO] Running command: systemctl reset-failed
2025/10/12 05:17:40.634866 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:17:40.655367 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 05:17:40.670549 [INFO] Running command: systemctl start nginx.service
2025/10/12 05:17:40.803865 [INFO] Executing instruction: configureSqsd
2025/10/12 05:17:40.803884 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 05:17:40.803903 [INFO] Executing instruction: startSqsd
2025/10/12 05:17:40.803907 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 05:17:40.803913 [INFO] Executing instruction: Track pids in healthd
2025/10/12 05:17:40.803917 [INFO] This is an enhanced health env...
2025/10/12 05:17:40.803929 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 05:17:40.821021 [INFO] healthd.service nginx.service cfn-hup.service

2025/10/12 05:17:40.821058 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 05:17:40.837282 [INFO] web.service

2025/10/12 05:17:40.837531 [INFO] Executing instruction: RunConfigDeployPostDeployHooks
2025/10/12 05:17:40.837551 [INFO] Executing platform hooks in .platform/confighooks/postdeploy/
2025/10/12 05:17:40.837570 [INFO] The dir .platform/confighooks/postdeploy/ does not exist
2025/10/12 05:17:40.837575 [INFO] Finished running scripts in /var/app/current/.platform/confighooks/postdeploy
2025/10/12 05:17:40.837581 [INFO] Executing cleanup logic
2025/10/12 05:17:40.837685 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760246255105,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760246260837,"severity":"INFO"}]}]}

2025/10/12 05:17:40.838381 [INFO] Platform Engine finished execution on command: config-deploy

2025/10/12 05:24:38.812667 [INFO] Starting...
2025/10/12 05:24:38.812716 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 05:24:38.812742 [INFO] reading event message file
2025/10/12 05:24:38.813091 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 05:24:38.880585 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 05:24:39.178823 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 05:24:39.466681 [INFO] checking whether command tail-log is applicable to this instance...
2025/10/12 05:24:39.466692 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 05:24:39.466695 [INFO] Engine command: (tail-log)

2025/10/12 05:24:39.466737 [INFO] Executing instruction: GetTailLogs
2025/10/12 05:24:39.466740 [INFO] Tail Logs...
2025/10/12 05:24:39.467262 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2025/10/12 05:24:39.469219 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2025/10/12 05:24:39.471014 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2025/10/12 05:24:39.472634 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2025/10/12 05:24:39.474435 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2025/10/12 05:24:39.556299 [INFO] Executing cleanup logic
2025/10/12 05:24:39.556368 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1760246679556,"severity":"INFO"}]}]}

2025/10/12 05:24:39.556386 [INFO] Platform Engine finished execution on command: tail-log

2025/10/12 05:24:56.364566 [INFO] Starting...
2025/10/12 05:24:56.364607 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 05:24:56.364635 [INFO] reading event message file
2025/10/12 05:24:56.365023 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 05:24:56.441879 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 05:24:56.736281 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 05:24:57.022386 [INFO] checking whether command tail-log is applicable to this instance...
2025/10/12 05:24:57.022398 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 05:24:57.022400 [INFO] Engine command: (tail-log)

2025/10/12 05:24:57.022450 [INFO] Executing instruction: GetTailLogs
2025/10/12 05:24:57.022453 [INFO] Tail Logs...
2025/10/12 05:24:57.022712 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2025/10/12 05:24:57.024691 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2025/10/12 05:24:57.026491 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2025/10/12 05:24:57.028087 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2025/10/12 05:24:57.029809 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2025/10/12 05:24:57.083487 [INFO] Executing cleanup logic
2025/10/12 05:24:57.083568 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1760246697083,"severity":"INFO"}]}]}

2025/10/12 05:24:57.083586 [INFO] Platform Engine finished execution on command: tail-log

2025/10/12 05:26:11.614456 [INFO] Starting...
2025/10/12 05:26:11.614500 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 05:26:11.614519 [INFO] reading event message file
2025/10/12 05:26:11.614826 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 05:26:11.693061 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 05:26:11.984544 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 05:26:12.269063 [INFO] checking whether command tail-log is applicable to this instance...
2025/10/12 05:26:12.269075 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 05:26:12.269077 [INFO] Engine command: (tail-log)

2025/10/12 05:26:12.269124 [INFO] Executing instruction: GetTailLogs
2025/10/12 05:26:12.269127 [INFO] Tail Logs...
2025/10/12 05:26:12.270199 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2025/10/12 05:26:12.272603 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2025/10/12 05:26:12.274725 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2025/10/12 05:26:12.276487 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2025/10/12 05:26:12.278254 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2025/10/12 05:26:12.330744 [INFO] Executing cleanup logic
2025/10/12 05:26:12.330826 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1760246772330,"severity":"INFO"}]}]}

2025/10/12 05:26:12.330844 [INFO] Platform Engine finished execution on command: tail-log

2025/10/12 05:28:03.940707 [INFO] Starting...
2025/10/12 05:28:03.940756 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 05:28:03.940782 [INFO] reading event message file
2025/10/12 05:28:03.941143 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 05:28:04.016032 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 05:28:04.314914 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 05:28:04.613152 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 05:28:04.613164 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 05:28:04.613167 [INFO] Engine command: (app-deploy)

2025/10/12 05:28:04.613172 [INFO] Downloading EB Application...
2025/10/12 05:28:04.613175 [INFO] Region: us-east-1
2025/10/12 05:28:04.613178 [INFO] envID: e-r2hnd7bhig
2025/10/12 05:28:04.613181 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 05:28:04.613185 [INFO] accountID: 433676943793
2025/10/12 05:28:04.613188 [INFO] Using manifest file name from command request
2025/10/12 05:28:04.613194 [INFO] Manifest name is : manifest_1760246881507
2025/10/12 05:28:04.613196 [INFO] Download app version manifest
2025/10/12 05:28:04.613390 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760246881507, expected bucket owner: 433676943793
2025/10/12 05:28:04.676638 [INFO] Download successful109bytes downloaded
2025/10/12 05:28:04.676773 [INFO] Trying to read and parse version manifest...
2025/10/12 05:28:04.676843 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251012_162755601174, expected bucket owner: 433676943793
2025/10/12 05:28:04.697349 [INFO] Download successful27218bytes downloaded
2025/10/12 05:28:04.697791 [INFO] Executing instruction: ElectLeader
2025/10/12 05:28:04.697798 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 05:28:04.697801 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 05:28:04.697813 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 6eb2c9c2-cfba-4311-af09-2f4bcd447521 --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 05:28:05.000053 [INFO] Instance is Leader.
2025/10/12 05:28:05.000103 [INFO] Executing instruction: stopSqsd
2025/10/12 05:28:05.000107 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 05:28:05.000111 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 05:28:05.000114 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 05:28:05.000125 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 05:28:05.311766 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 05:28:05.311790 [INFO] Executing instruction: StageApplication
2025/10/12 05:28:05.311793 [INFO] Recreating /var/app/staging/
2025/10/12 05:28:05.311902 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 05:28:05.311913 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 05:28:05.316865 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 05:28:05.317779 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 05:28:05.317802 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 05:28:05.317820 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 05:28:05.317822 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 05:28:05.317826 [INFO] Executing instruction: InstallDependency
2025/10/12 05:28:05.317830 [INFO] checking dependencies file
2025/10/12 05:28:05.317841 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 05:28:05.317850 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 05:28:05.825139 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (2.1.0)
Requirement already satisfied: httpx==0.24.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.24.1)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (1.0.0)
Requirement already satisfied: structlog==23.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (23.2.0)
Requirement already satisfied: pyyaml==6.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (6.0.1)
Requirement already satisfied: supabase==2.3.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (2.3.4)
Requirement already satisfied: openai==1.6.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (1.6.1)
Requirement already satisfied: sqlparse==0.4.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 20)) (0.4.4)
Requirement already satisfied: asyncpg==0.29.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 21)) (0.29.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 4)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 4)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 3)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore<0.18.0,>=0.15.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (0.17.3)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: gotrue<3.0,>=1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (2.9.1)
Requirement already satisfied: postgrest<0.16.0,>=0.10.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (0.15.1)
Requirement already satisfied: realtime<2.0.0,>=1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (1.0.6)
Requirement already satisfied: storage3<0.8.0,>=0.5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (0.7.7)
Requirement already satisfied: supafunc<0.4.0,>=0.3.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (0.3.3)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.6.1->-r requirements.txt (line 17)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.6.1->-r requirements.txt (line 17)) (4.67.1)
Requirement already satisfied: async-timeout>=4.0.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from asyncpg==0.29.0->-r requirements.txt (line 21)) (5.0.1)
Requirement already satisfied: h2<5,>=3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 14)) (4.3.0)
Requirement already satisfied: hyperframe<7,>=6.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 14)) (6.1.0)
Requirement already satisfied: hpack<5,>=4.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 14)) (4.1.0)
Requirement already satisfied: deprecation<3.0.0,>=2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 14)) (2.1.0)
Requirement already satisfied: strenum<0.5.0,>=0.4.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 14)) (0.4.15)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from deprecation<3.0.0,>=2.1.0->postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 14)) (25.0)
Requirement already satisfied: python-dateutil<3.0.0,>=2.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 14)) (2.9.0.post0)
Requirement already satisfied: websockets<13,>=11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 14)) (12.0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.8.1->realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 14)) (1.17.0)

2025/10/12 05:28:05.825174 [INFO] Executing instruction: check Procfile
2025/10/12 05:28:05.825221 [INFO] detected Procfile in application source bundle ...
2025/10/12 05:28:05.825228 [INFO] Executing instruction: configure X-Ray
2025/10/12 05:28:05.825232 [INFO] X-Ray is not enabled.
2025/10/12 05:28:05.825235 [INFO] Executing instruction: configure proxy server
2025/10/12 05:28:05.825252 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 05:28:05.833986 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 05:28:05.836100 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:28:05.899530 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/12 05:28:05.899574 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:28:05.914790 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 05:28:05.924884 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:28:05.936900 [INFO] Running command: systemctl stop healthd.service
2025/10/12 05:28:05.993503 [INFO] Running command: systemctl disable healthd.service
2025/10/12 05:28:06.287595 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/12 05:28:06.287762 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:28:06.626898 [INFO] Running command: systemctl reset-failed
2025/10/12 05:28:06.638202 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:28:06.925655 [INFO] Running command: systemctl reset-failed
2025/10/12 05:28:06.933913 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 05:28:06.941519 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 05:28:07.215018 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 05:28:07.223690 [INFO] Running command: systemctl enable healthd.service
2025/10/12 05:28:07.527631 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 05:28:07.527678 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:28:07.541359 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 05:28:07.549621 [INFO] Running command: systemctl start healthd.service
2025/10/12 05:28:07.607247 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 05:28:07.608496 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 05:28:07.609674 [INFO] Executing instruction: configure log streaming
2025/10/12 05:28:07.609685 [INFO] log streaming is not enabled
2025/10/12 05:28:07.609689 [INFO] disable log stream
2025/10/12 05:28:07.609702 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 05:28:07.626844 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 05:28:07.643726 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 05:28:07.643751 [INFO] Checking if logs need forced rotation
2025/10/12 05:28:07.643766 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 05:28:08.075506 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 05:28:08.458087 [INFO] Generating rsyslog config from Procfile
2025/10/12 05:28:08.460322 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 05:28:08.598374 [INFO] Executing instruction: PostBuildEbExtension
2025/10/12 05:28:08.598401 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/12 05:28:08.598414 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/12 05:28:08.915293 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/12 05:28:08.915321 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 05:28:08.915435 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 05:28:08.915440 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/12 05:28:08.915454 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/12 05:28:08.915470 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/12 05:28:08.915474 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/12 05:28:08.915483 [INFO] Executing instruction: stop X-Ray
2025/10/12 05:28:08.915486 [INFO] stop X-Ray ...
2025/10/12 05:28:08.915495 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 05:28:08.929682 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 05:28:08.929739 [INFO] Running command: systemctl stop xray.service
2025/10/12 05:28:08.943754 [INFO] Executing instruction: stop proxy
2025/10/12 05:28:08.943794 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 05:28:08.957958 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 05:28:08.957990 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:28:08.969786 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 05:28:08.978068 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:28:08.987268 [INFO] Running command: systemctl stop nginx.service
2025/10/12 05:28:09.216520 [INFO] Running command: systemctl disable nginx.service
2025/10/12 05:28:09.476699 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:28:09.725792 [INFO] Running command: systemctl reset-failed
2025/10/12 05:28:09.733503 [INFO] Executing instruction: FlipApplication
2025/10/12 05:28:09.733526 [INFO] Fetching environment variables...
2025/10/12 05:28:09.733709 [INFO] Purge old process...
2025/10/12 05:28:09.733729 [INFO] Running command: systemctl stop eb-app.target
2025/10/12 05:28:09.742259 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 05:28:09.751920 [INFO] web.service

2025/10/12 05:28:09.751942 [INFO] deregistering process: web
2025/10/12 05:28:09.751954 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 05:28:09.762059 [INFO] Running command: systemctl is-active web.service
2025/10/12 05:28:09.769322 [INFO] Running command: systemctl disable web.service
2025/10/12 05:28:10.055091 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/12 05:28:10.055171 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:28:10.335651 [INFO] Running command: systemctl reset-failed
2025/10/12 05:28:10.344070 [INFO] Running command: systemctl is-active web.service
2025/10/12 05:28:10.351617 [INFO] Process web has been fully terminated
2025/10/12 05:28:10.351636 [INFO] All processes have been fully terminated
2025/10/12 05:28:10.351639 [INFO] Removing /var/app/current/ if it exists
2025/10/12 05:28:10.352426 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 05:28:10.352446 [INFO] Register application processes...
2025/10/12 05:28:10.352451 [INFO] Registering the proc: web

2025/10/12 05:28:10.352460 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 05:28:10.365453 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:28:10.642198 [INFO] Running command: systemctl reset-failed
2025/10/12 05:28:10.650851 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 05:28:10.658654 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 05:28:10.923204 [INFO] Running command: systemctl start eb-app.target
2025/10/12 05:28:10.931878 [INFO] Running command: systemctl enable web.service
2025/10/12 05:28:11.186923 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 05:28:11.186964 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 05:28:11.197649 [INFO] Running command: systemctl is-active web.service
2025/10/12 05:28:11.204815 [INFO] Running command: systemctl start web.service
2025/10/12 05:28:11.275570 [INFO] Executing instruction: start X-Ray
2025/10/12 05:28:11.275587 [INFO] X-Ray is not enabled.
2025/10/12 05:28:11.275590 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 05:28:11.275617 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 05:28:11.294014 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 05:28:11.294234 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 05:28:11.297517 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:28:11.313001 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:28:11.606207 [INFO] Running command: systemctl reset-failed
2025/10/12 05:28:11.614421 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:28:11.627803 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 05:28:11.638472 [INFO] Running command: systemctl start nginx.service
2025/10/12 05:28:11.757241 [INFO] Executing instruction: configureSqsd
2025/10/12 05:28:11.757257 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 05:28:11.757259 [INFO] Executing instruction: startSqsd
2025/10/12 05:28:11.757262 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 05:28:11.757265 [INFO] Executing instruction: Track pids in healthd
2025/10/12 05:28:11.757268 [INFO] This is an enhanced health env...
2025/10/12 05:28:11.757277 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 05:28:11.769114 [INFO] nginx.service cfn-hup.service healthd.service

2025/10/12 05:28:11.769142 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 05:28:11.779935 [INFO] web.service

2025/10/12 05:28:11.780258 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/12 05:28:11.780300 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/12 05:28:11.780316 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/12 05:28:11.780318 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/12 05:28:11.780322 [INFO] Executing cleanup logic
2025/10/12 05:28:11.780392 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760246885825,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760246891780,"severity":"INFO"}]}]}

2025/10/12 05:28:11.781772 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 05:30:42.716922 [INFO] Starting...
2025/10/12 05:30:42.716973 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 05:30:42.716999 [INFO] reading event message file
2025/10/12 05:30:42.717462 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 05:30:42.783410 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 05:30:43.082923 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 05:30:43.376201 [INFO] checking whether command tail-log is applicable to this instance...
2025/10/12 05:30:43.376214 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 05:30:43.376220 [INFO] Engine command: (tail-log)

2025/10/12 05:30:43.376274 [INFO] Executing instruction: GetTailLogs
2025/10/12 05:30:43.376279 [INFO] Tail Logs...
2025/10/12 05:30:43.376747 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2025/10/12 05:30:43.378984 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2025/10/12 05:30:43.380844 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2025/10/12 05:30:43.382600 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2025/10/12 05:30:43.384278 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2025/10/12 05:30:43.437870 [INFO] Executing cleanup logic
2025/10/12 05:30:43.437951 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1760247043437,"severity":"INFO"}]}]}

2025/10/12 05:30:43.437970 [INFO] Platform Engine finished execution on command: tail-log

2025/10/12 05:31:16.977131 [INFO] Starting...
2025/10/12 05:31:16.977176 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 05:31:16.977197 [INFO] reading event message file
2025/10/12 05:31:16.977588 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 05:31:17.051196 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 05:31:17.359953 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 05:31:17.653075 [INFO] checking whether command tail-log is applicable to this instance...
2025/10/12 05:31:17.653088 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 05:31:17.653091 [INFO] Engine command: (tail-log)

2025/10/12 05:31:17.653135 [INFO] Executing instruction: GetTailLogs
2025/10/12 05:31:17.653137 [INFO] Tail Logs...
2025/10/12 05:31:17.653511 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2025/10/12 05:31:17.655481 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2025/10/12 05:31:17.657295 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2025/10/12 05:31:17.659124 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2025/10/12 05:31:17.660791 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2025/10/12 05:31:17.763931 [INFO] Executing cleanup logic
2025/10/12 05:31:17.764007 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1760247077763,"severity":"INFO"}]}]}

2025/10/12 05:31:17.764024 [INFO] Platform Engine finished execution on command: tail-log

2025/10/12 05:33:31.570922 [INFO] Starting...
2025/10/12 05:33:31.570966 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 05:33:31.570986 [INFO] reading event message file
2025/10/12 05:33:31.571418 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 05:33:31.648458 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 05:33:31.951314 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 05:33:32.233489 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 05:33:32.233512 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 05:33:32.233516 [INFO] Engine command: (app-deploy)

2025/10/12 05:33:32.233525 [INFO] Downloading EB Application...
2025/10/12 05:33:32.233528 [INFO] Region: us-east-1
2025/10/12 05:33:32.233530 [INFO] envID: e-r2hnd7bhig
2025/10/12 05:33:32.233532 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 05:33:32.233534 [INFO] accountID: 433676943793
2025/10/12 05:33:32.233536 [INFO] Using manifest file name from command request
2025/10/12 05:33:32.233542 [INFO] Manifest name is : manifest_1760247208802
2025/10/12 05:33:32.233544 [INFO] Download app version manifest
2025/10/12 05:33:32.233718 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760247208802, expected bucket owner: 433676943793
2025/10/12 05:33:32.271070 [INFO] Download successful109bytes downloaded
2025/10/12 05:33:32.271268 [INFO] Trying to read and parse version manifest...
2025/10/12 05:33:32.271358 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251012_163321981685, expected bucket owner: 433676943793
2025/10/12 05:33:32.289632 [INFO] Download successful27214bytes downloaded
2025/10/12 05:33:32.289887 [INFO] Executing instruction: ElectLeader
2025/10/12 05:33:32.289893 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 05:33:32.289895 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 05:33:32.289906 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 4f3631b0-0aec-4dbc-abff-8872d4b3d90b --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 05:33:32.607430 [INFO] Instance is Leader.
2025/10/12 05:33:32.607469 [INFO] Executing instruction: stopSqsd
2025/10/12 05:33:32.607473 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 05:33:32.607476 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 05:33:32.607480 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 05:33:32.607489 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 05:33:32.923667 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 05:33:32.923704 [INFO] Executing instruction: StageApplication
2025/10/12 05:33:32.923708 [INFO] Recreating /var/app/staging/
2025/10/12 05:33:32.923825 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 05:33:32.923841 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 05:33:32.929349 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 05:33:32.930347 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 05:33:32.930367 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 05:33:32.930383 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 05:33:32.930385 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 05:33:32.930389 [INFO] Executing instruction: InstallDependency
2025/10/12 05:33:32.930394 [INFO] checking dependencies file
2025/10/12 05:33:32.930454 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 05:33:32.930468 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 05:33:33.436733 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (2.1.0)
Requirement already satisfied: httpx==0.24.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.24.1)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (1.0.0)
Requirement already satisfied: structlog==23.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (23.2.0)
Requirement already satisfied: pyyaml==6.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (6.0.1)
Requirement already satisfied: supabase==2.3.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (2.3.4)
Requirement already satisfied: openai==1.6.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (1.6.1)
Requirement already satisfied: sqlparse==0.4.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 20)) (0.4.4)
Requirement already satisfied: asyncpg==0.29.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 21)) (0.29.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 2)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 4)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 4)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 3)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore<0.18.0,>=0.15.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (0.17.3)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: gotrue<3.0,>=1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (2.9.1)
Requirement already satisfied: postgrest<0.16.0,>=0.10.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (0.15.1)
Requirement already satisfied: realtime<2.0.0,>=1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (1.0.6)
Requirement already satisfied: storage3<0.8.0,>=0.5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (0.7.7)
Requirement already satisfied: supafunc<0.4.0,>=0.3.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 14)) (0.3.3)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.6.1->-r requirements.txt (line 17)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.6.1->-r requirements.txt (line 17)) (4.67.1)
Requirement already satisfied: async-timeout>=4.0.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from asyncpg==0.29.0->-r requirements.txt (line 21)) (5.0.1)
Requirement already satisfied: h2<5,>=3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 14)) (4.3.0)
Requirement already satisfied: hyperframe<7,>=6.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 14)) (6.1.0)
Requirement already satisfied: hpack<5,>=4.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 14)) (4.1.0)
Requirement already satisfied: deprecation<3.0.0,>=2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 14)) (2.1.0)
Requirement already satisfied: strenum<0.5.0,>=0.4.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 14)) (0.4.15)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from deprecation<3.0.0,>=2.1.0->postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 14)) (25.0)
Requirement already satisfied: python-dateutil<3.0.0,>=2.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 14)) (2.9.0.post0)
Requirement already satisfied: websockets<13,>=11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 14)) (12.0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.8.1->realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 14)) (1.17.0)

2025/10/12 05:33:33.436825 [INFO] Executing instruction: check Procfile
2025/10/12 05:33:33.436871 [INFO] detected Procfile in application source bundle ...
2025/10/12 05:33:33.436879 [INFO] Executing instruction: configure X-Ray
2025/10/12 05:33:33.436884 [INFO] X-Ray is not enabled.
2025/10/12 05:33:33.436889 [INFO] Executing instruction: configure proxy server
2025/10/12 05:33:33.436909 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 05:33:33.446859 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 05:33:33.448980 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:33:33.460089 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/12 05:33:33.460133 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:33:33.469106 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 05:33:33.476453 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:33:33.485477 [INFO] Running command: systemctl stop healthd.service
2025/10/12 05:33:33.602528 [INFO] Running command: systemctl disable healthd.service
2025/10/12 05:33:33.862982 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/12 05:33:33.863139 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:33:34.140328 [INFO] Running command: systemctl reset-failed
2025/10/12 05:33:34.152150 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:33:34.424984 [INFO] Running command: systemctl reset-failed
2025/10/12 05:33:34.433610 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 05:33:34.441696 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 05:33:34.680528 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 05:33:34.689552 [INFO] Running command: systemctl enable healthd.service
2025/10/12 05:33:34.965819 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 05:33:34.965851 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 05:33:34.976690 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 05:33:34.984345 [INFO] Running command: systemctl start healthd.service
2025/10/12 05:33:35.046218 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 05:33:35.047357 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 05:33:35.048503 [INFO] Executing instruction: configure log streaming
2025/10/12 05:33:35.048514 [INFO] log streaming is not enabled
2025/10/12 05:33:35.048519 [INFO] disable log stream
2025/10/12 05:33:35.048531 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 05:33:35.067362 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 05:33:35.086128 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 05:33:35.086151 [INFO] Checking if logs need forced rotation
2025/10/12 05:33:35.086174 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 05:33:35.523037 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 05:33:35.897261 [INFO] Generating rsyslog config from Procfile
2025/10/12 05:33:35.899649 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 05:33:36.056902 [INFO] Executing instruction: PostBuildEbExtension
2025/10/12 05:33:36.056926 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/12 05:33:36.056937 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/12 05:33:36.396030 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/12 05:33:36.396057 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 05:33:36.396159 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 05:33:36.396163 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/12 05:33:36.396177 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/12 05:33:36.396193 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/12 05:33:36.396195 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/12 05:33:36.396199 [INFO] Executing instruction: stop X-Ray
2025/10/12 05:33:36.396202 [INFO] stop X-Ray ...
2025/10/12 05:33:36.396212 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 05:33:36.409214 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 05:33:36.409281 [INFO] Running command: systemctl stop xray.service
2025/10/12 05:33:36.423527 [INFO] Executing instruction: stop proxy
2025/10/12 05:33:36.423556 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 05:33:36.437684 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 05:33:36.437715 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:33:36.449069 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 05:33:36.456816 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:33:36.465604 [INFO] Running command: systemctl stop nginx.service
2025/10/12 05:33:36.666461 [INFO] Running command: systemctl disable nginx.service
2025/10/12 05:33:36.889405 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:33:37.174272 [INFO] Running command: systemctl reset-failed
2025/10/12 05:33:37.182935 [INFO] Executing instruction: FlipApplication
2025/10/12 05:33:37.182953 [INFO] Fetching environment variables...
2025/10/12 05:33:37.183166 [INFO] Purge old process...
2025/10/12 05:33:37.183184 [INFO] Running command: systemctl stop eb-app.target
2025/10/12 05:33:37.191646 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 05:33:37.201804 [INFO] web.service

2025/10/12 05:33:37.201828 [INFO] deregistering process: web
2025/10/12 05:33:37.201838 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 05:33:37.212228 [INFO] Running command: systemctl is-active web.service
2025/10/12 05:33:37.219452 [INFO] Running command: systemctl disable web.service
2025/10/12 05:33:37.514067 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/12 05:33:37.514188 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:33:37.802062 [INFO] Running command: systemctl reset-failed
2025/10/12 05:33:37.809399 [INFO] Running command: systemctl is-active web.service
2025/10/12 05:33:37.816141 [INFO] Process web has been fully terminated
2025/10/12 05:33:37.816165 [INFO] All processes have been fully terminated
2025/10/12 05:33:37.816168 [INFO] Removing /var/app/current/ if it exists
2025/10/12 05:33:37.817111 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 05:33:37.817132 [INFO] Register application processes...
2025/10/12 05:33:37.817136 [INFO] Registering the proc: web

2025/10/12 05:33:37.817144 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 05:33:37.828484 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:33:38.087660 [INFO] Running command: systemctl reset-failed
2025/10/12 05:33:38.096109 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 05:33:38.103788 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 05:33:38.397271 [INFO] Running command: systemctl start eb-app.target
2025/10/12 05:33:38.406411 [INFO] Running command: systemctl enable web.service
2025/10/12 05:33:38.677866 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 05:33:38.677898 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 05:33:38.688954 [INFO] Running command: systemctl is-active web.service
2025/10/12 05:33:38.696565 [INFO] Running command: systemctl start web.service
2025/10/12 05:33:38.798675 [INFO] Executing instruction: start X-Ray
2025/10/12 05:33:38.798694 [INFO] X-Ray is not enabled.
2025/10/12 05:33:38.798698 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 05:33:38.798724 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 05:33:38.825822 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 05:33:38.826083 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 05:33:38.829991 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:33:38.853022 [INFO] Running command: systemctl daemon-reload
2025/10/12 05:33:39.240007 [INFO] Running command: systemctl reset-failed
2025/10/12 05:33:39.251707 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 05:33:39.274926 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 05:33:39.291143 [INFO] Running command: systemctl start nginx.service
2025/10/12 05:33:39.434525 [INFO] Executing instruction: configureSqsd
2025/10/12 05:33:39.434545 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 05:33:39.434549 [INFO] Executing instruction: startSqsd
2025/10/12 05:33:39.434552 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 05:33:39.434555 [INFO] Executing instruction: Track pids in healthd
2025/10/12 05:33:39.434559 [INFO] This is an enhanced health env...
2025/10/12 05:33:39.434572 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 05:33:39.451614 [INFO] cfn-hup.service healthd.service nginx.service

2025/10/12 05:33:39.451654 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 05:33:39.466886 [INFO] web.service

2025/10/12 05:33:39.467241 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/12 05:33:39.467305 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/12 05:33:39.467327 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/12 05:33:39.467330 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/12 05:33:39.467337 [INFO] Executing cleanup logic
2025/10/12 05:33:39.467431 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760247213436,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760247219467,"severity":"INFO"}]}]}

2025/10/12 05:33:39.468262 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 20:25:15.392907 [INFO] Starting...
2025/10/12 20:25:15.393563 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 20:25:15.393832 [INFO] reading event message file
2025/10/12 20:25:15.394573 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 20:25:15.460030 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 20:25:15.763497 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 20:25:16.059430 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 20:25:16.059443 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 20:25:16.059445 [INFO] Engine command: (app-deploy)

2025/10/12 20:25:16.059449 [INFO] Downloading EB Application...
2025/10/12 20:25:16.059451 [INFO] Region: us-east-1
2025/10/12 20:25:16.059453 [INFO] envID: e-r2hnd7bhig
2025/10/12 20:25:16.059455 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 20:25:16.059457 [INFO] accountID: 433676943793
2025/10/12 20:25:16.059460 [INFO] Using manifest file name from command request
2025/10/12 20:25:16.059466 [INFO] Manifest name is : manifest_1760300712653
2025/10/12 20:25:16.059469 [INFO] Download app version manifest
2025/10/12 20:25:16.059657 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760300712653, expected bucket owner: 433676943793
2025/10/12 20:25:16.100524 [INFO] Download successful110bytes downloaded
2025/10/12 20:25:16.100680 [INFO] Trying to read and parse version manifest...
2025/10/12 20:25:16.100765 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251013_072505274618, expected bucket owner: 433676943793
2025/10/12 20:25:16.119920 [INFO] Download successful26296bytes downloaded
2025/10/12 20:25:16.120191 [INFO] Executing instruction: ElectLeader
2025/10/12 20:25:16.120197 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 20:25:16.120200 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 20:25:16.120210 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id e318752b-9d24-4c1c-baa0-7f1265b14d3c --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 20:25:16.432596 [INFO] Instance is Leader.
2025/10/12 20:25:16.432638 [INFO] Executing instruction: stopSqsd
2025/10/12 20:25:16.432642 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 20:25:16.432645 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 20:25:16.432648 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 20:25:16.432670 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 20:25:16.739436 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 20:25:16.739457 [INFO] Executing instruction: StageApplication
2025/10/12 20:25:16.739465 [INFO] Recreating /var/app/staging/
2025/10/12 20:25:16.739562 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 20:25:16.739573 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 20:25:16.744796 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 20:25:16.745903 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 20:25:16.745925 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 20:25:16.745942 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 20:25:16.745945 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 20:25:16.745949 [INFO] Executing instruction: InstallDependency
2025/10/12 20:25:16.745953 [INFO] checking dependencies file
2025/10/12 20:25:16.745964 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 20:25:16.745973 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 20:25:17.212001 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.24.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.24.1)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.14.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (2025.10.5)
Requirement already satisfied: httpcore<0.18.0,>=0.15.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (0.17.3)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (1.3.1)

2025/10/12 20:25:17.212031 [INFO] Executing instruction: check Procfile
2025/10/12 20:25:17.212071 [INFO] detected Procfile in application source bundle ...
2025/10/12 20:25:17.212078 [INFO] Executing instruction: configure X-Ray
2025/10/12 20:25:17.212084 [INFO] X-Ray is not enabled.
2025/10/12 20:25:17.212088 [INFO] Executing instruction: configure proxy server
2025/10/12 20:25:17.212104 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 20:25:17.220749 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 20:25:17.222835 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 20:25:17.234785 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/12 20:25:17.234810 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 20:25:17.243561 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 20:25:17.252161 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 20:25:17.261910 [INFO] Running command: systemctl stop healthd.service
2025/10/12 20:25:17.392653 [INFO] Running command: systemctl disable healthd.service
2025/10/12 20:25:17.683531 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/12 20:25:17.683708 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:25:18.011718 [INFO] Running command: systemctl reset-failed
2025/10/12 20:25:18.038822 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:25:18.327736 [INFO] Running command: systemctl reset-failed
2025/10/12 20:25:18.334955 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 20:25:18.342472 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 20:25:18.557017 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 20:25:18.564711 [INFO] Running command: systemctl enable healthd.service
2025/10/12 20:25:18.789118 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 20:25:18.789149 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 20:25:18.799960 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 20:25:18.807597 [INFO] Running command: systemctl start healthd.service
2025/10/12 20:25:18.881797 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 20:25:18.882955 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 20:25:18.884060 [INFO] Executing instruction: configure log streaming
2025/10/12 20:25:18.884070 [INFO] log streaming is not enabled
2025/10/12 20:25:18.884073 [INFO] disable log stream
2025/10/12 20:25:18.884084 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 20:25:18.897749 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 20:25:18.910232 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 20:25:18.910251 [INFO] Checking if logs need forced rotation
2025/10/12 20:25:18.910264 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 20:25:19.324229 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 20:25:19.719836 [INFO] Generating rsyslog config from Procfile
2025/10/12 20:25:19.722039 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 20:25:19.878124 [INFO] Executing instruction: PostBuildEbExtension
2025/10/12 20:25:19.878164 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/12 20:25:19.878177 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/12 20:25:20.211868 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/12 20:25:20.211892 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 20:25:20.211996 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 20:25:20.212000 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/12 20:25:20.212014 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/12 20:25:20.212029 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/12 20:25:20.212031 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/12 20:25:20.212035 [INFO] Executing instruction: stop X-Ray
2025/10/12 20:25:20.212037 [INFO] stop X-Ray ...
2025/10/12 20:25:20.212046 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 20:25:20.225249 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 20:25:20.225281 [INFO] Running command: systemctl stop xray.service
2025/10/12 20:25:20.240093 [INFO] Executing instruction: stop proxy
2025/10/12 20:25:20.240121 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 20:25:20.254502 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 20:25:20.254533 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 20:25:20.266379 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 20:25:20.274529 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 20:25:20.284173 [INFO] Running command: systemctl stop nginx.service
2025/10/12 20:25:20.444972 [INFO] Running command: systemctl disable nginx.service
2025/10/12 20:25:20.725979 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:25:21.006415 [INFO] Running command: systemctl reset-failed
2025/10/12 20:25:21.015126 [INFO] Executing instruction: FlipApplication
2025/10/12 20:25:21.015151 [INFO] Fetching environment variables...
2025/10/12 20:25:21.015336 [INFO] Purge old process...
2025/10/12 20:25:21.015361 [INFO] Running command: systemctl stop eb-app.target
2025/10/12 20:25:21.023700 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 20:25:21.033795 [INFO] web.service

2025/10/12 20:25:21.033816 [INFO] deregistering process: web
2025/10/12 20:25:21.033828 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 20:25:21.044874 [INFO] Running command: systemctl is-active web.service
2025/10/12 20:25:21.052979 [INFO] Running command: systemctl disable web.service
2025/10/12 20:25:21.345115 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/12 20:25:21.345195 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:25:21.626338 [INFO] Running command: systemctl reset-failed
2025/10/12 20:25:21.635086 [INFO] Running command: systemctl is-active web.service
2025/10/12 20:25:21.642440 [INFO] Process web has been fully terminated
2025/10/12 20:25:21.642459 [INFO] All processes have been fully terminated
2025/10/12 20:25:21.642462 [INFO] Removing /var/app/current/ if it exists
2025/10/12 20:25:21.643316 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 20:25:21.643340 [INFO] Register application processes...
2025/10/12 20:25:21.643347 [INFO] Registering the proc: web

2025/10/12 20:25:21.643354 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 20:25:21.656283 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:25:21.926333 [INFO] Running command: systemctl reset-failed
2025/10/12 20:25:21.934522 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 20:25:21.943273 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 20:25:22.223410 [INFO] Running command: systemctl start eb-app.target
2025/10/12 20:25:22.232777 [INFO] Running command: systemctl enable web.service
2025/10/12 20:25:22.517269 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 20:25:22.517294 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 20:25:22.527753 [INFO] Running command: systemctl is-active web.service
2025/10/12 20:25:22.535452 [INFO] Running command: systemctl start web.service
2025/10/12 20:25:22.613105 [INFO] Executing instruction: start X-Ray
2025/10/12 20:25:22.613124 [INFO] X-Ray is not enabled.
2025/10/12 20:25:22.613128 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 20:25:22.613164 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 20:25:22.639896 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 20:25:22.640253 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 20:25:22.645301 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 20:25:22.667953 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:25:23.113191 [INFO] Running command: systemctl reset-failed
2025/10/12 20:25:23.125071 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 20:25:23.145950 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 20:25:23.161986 [INFO] Running command: systemctl start nginx.service
2025/10/12 20:25:23.320086 [INFO] Executing instruction: configureSqsd
2025/10/12 20:25:23.320104 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 20:25:23.320108 [INFO] Executing instruction: startSqsd
2025/10/12 20:25:23.320111 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 20:25:23.320114 [INFO] Executing instruction: Track pids in healthd
2025/10/12 20:25:23.320117 [INFO] This is an enhanced health env...
2025/10/12 20:25:23.320134 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 20:25:23.337181 [INFO] cfn-hup.service nginx.service healthd.service

2025/10/12 20:25:23.337226 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 20:25:23.353065 [INFO] web.service

2025/10/12 20:25:23.353434 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/12 20:25:23.353538 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/12 20:25:23.353560 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/12 20:25:23.353564 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/12 20:25:23.353571 [INFO] Executing cleanup logic
2025/10/12 20:25:23.353662 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760300717212,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760300723353,"severity":"INFO"}]}]}

2025/10/12 20:25:23.354754 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 20:30:57.460282 [INFO] Starting...
2025/10/12 20:30:57.460328 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 20:30:57.460349 [INFO] reading event message file
2025/10/12 20:30:57.460732 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 20:30:57.535877 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 20:30:57.830310 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 20:30:58.118066 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 20:30:58.118081 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 20:30:58.118083 [INFO] Engine command: (app-deploy)

2025/10/12 20:30:58.118088 [INFO] Downloading EB Application...
2025/10/12 20:30:58.118090 [INFO] Region: us-east-1
2025/10/12 20:30:58.118092 [INFO] envID: e-r2hnd7bhig
2025/10/12 20:30:58.118094 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 20:30:58.118096 [INFO] accountID: 433676943793
2025/10/12 20:30:58.118099 [INFO] Using manifest file name from command request
2025/10/12 20:30:58.118104 [INFO] Manifest name is : manifest_1760301055224
2025/10/12 20:30:58.118106 [INFO] Download app version manifest
2025/10/12 20:30:58.118288 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760301055224, expected bucket owner: 433676943793
2025/10/12 20:30:58.160921 [INFO] Download successful111bytes downloaded
2025/10/12 20:30:58.161063 [INFO] Trying to read and parse version manifest...
2025/10/12 20:30:58.161134 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251013_073048526530, expected bucket owner: 433676943793
2025/10/12 20:30:58.271576 [INFO] Download successful24673bytes downloaded
2025/10/12 20:30:58.271854 [INFO] Executing instruction: ElectLeader
2025/10/12 20:30:58.271860 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 20:30:58.271863 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 20:30:58.271873 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 80d013c0-9773-45d5-ade2-4dd4a0c30d96 --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 20:30:58.563850 [INFO] Instance is Leader.
2025/10/12 20:30:58.563892 [INFO] Executing instruction: stopSqsd
2025/10/12 20:30:58.563897 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 20:30:58.563900 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 20:30:58.563902 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 20:30:58.563915 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 20:30:58.867171 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 20:30:58.867208 [INFO] Executing instruction: StageApplication
2025/10/12 20:30:58.867212 [INFO] Recreating /var/app/staging/
2025/10/12 20:30:58.867335 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 20:30:58.867359 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 20:30:58.872911 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 20:30:58.873855 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 20:30:58.873876 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 20:30:58.873891 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 20:30:58.873894 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 20:30:58.873898 [INFO] Executing instruction: InstallDependency
2025/10/12 20:30:58.873903 [INFO] checking dependencies file
2025/10/12 20:30:58.873914 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 20:30:58.873923 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 20:30:59.328320 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.24.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.24.1)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.14.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (2025.10.5)
Requirement already satisfied: httpcore<0.18.0,>=0.15.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (0.17.3)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (1.3.1)

2025/10/12 20:30:59.328356 [INFO] Executing instruction: check Procfile
2025/10/12 20:30:59.328398 [INFO] detected Procfile in application source bundle ...
2025/10/12 20:30:59.328404 [INFO] Executing instruction: configure X-Ray
2025/10/12 20:30:59.328409 [INFO] X-Ray is not enabled.
2025/10/12 20:30:59.328412 [INFO] Executing instruction: configure proxy server
2025/10/12 20:30:59.328430 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 20:30:59.337246 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 20:30:59.339515 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 20:30:59.350821 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/12 20:30:59.350850 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 20:30:59.359524 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 20:30:59.366861 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 20:30:59.375439 [INFO] Running command: systemctl stop healthd.service
2025/10/12 20:30:59.492473 [INFO] Running command: systemctl disable healthd.service
2025/10/12 20:30:59.763085 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/12 20:30:59.763258 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:31:00.116110 [INFO] Running command: systemctl reset-failed
2025/10/12 20:31:00.127049 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:31:00.405701 [INFO] Running command: systemctl reset-failed
2025/10/12 20:31:00.414185 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 20:31:00.422485 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 20:31:00.658988 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 20:31:00.668266 [INFO] Running command: systemctl enable healthd.service
2025/10/12 20:31:00.927515 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 20:31:00.927543 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 20:31:00.938015 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 20:31:00.945282 [INFO] Running command: systemctl start healthd.service
2025/10/12 20:31:01.007022 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 20:31:01.008203 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 20:31:01.009438 [INFO] Executing instruction: configure log streaming
2025/10/12 20:31:01.009449 [INFO] log streaming is not enabled
2025/10/12 20:31:01.009453 [INFO] disable log stream
2025/10/12 20:31:01.009465 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 20:31:01.028224 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 20:31:01.046859 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 20:31:01.046885 [INFO] Checking if logs need forced rotation
2025/10/12 20:31:01.046920 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 20:31:01.491606 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 20:31:01.903788 [INFO] Generating rsyslog config from Procfile
2025/10/12 20:31:01.905873 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 20:31:02.002035 [INFO] Executing instruction: PostBuildEbExtension
2025/10/12 20:31:02.002067 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/12 20:31:02.002082 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/12 20:31:02.328323 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/12 20:31:02.328389 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 20:31:02.328491 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 20:31:02.328495 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/12 20:31:02.328509 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/12 20:31:02.328524 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/12 20:31:02.328527 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/12 20:31:02.328531 [INFO] Executing instruction: stop X-Ray
2025/10/12 20:31:02.328533 [INFO] stop X-Ray ...
2025/10/12 20:31:02.328541 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 20:31:02.341475 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 20:31:02.341500 [INFO] Running command: systemctl stop xray.service
2025/10/12 20:31:02.353358 [INFO] Executing instruction: stop proxy
2025/10/12 20:31:02.353391 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 20:31:02.367513 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 20:31:02.367547 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 20:31:02.379483 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 20:31:02.388019 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 20:31:02.397326 [INFO] Running command: systemctl stop nginx.service
2025/10/12 20:31:02.577617 [INFO] Running command: systemctl disable nginx.service
2025/10/12 20:31:02.824556 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:31:03.104559 [INFO] Running command: systemctl reset-failed
2025/10/12 20:31:03.112307 [INFO] Executing instruction: FlipApplication
2025/10/12 20:31:03.112329 [INFO] Fetching environment variables...
2025/10/12 20:31:03.112516 [INFO] Purge old process...
2025/10/12 20:31:03.112538 [INFO] Running command: systemctl stop eb-app.target
2025/10/12 20:31:03.122043 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 20:31:03.131718 [INFO] web.service

2025/10/12 20:31:03.131740 [INFO] deregistering process: web
2025/10/12 20:31:03.131749 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 20:31:03.141687 [INFO] Running command: systemctl is-active web.service
2025/10/12 20:31:03.148973 [INFO] Running command: systemctl disable web.service
2025/10/12 20:31:03.495725 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/12 20:31:03.495802 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:31:03.845711 [INFO] Running command: systemctl reset-failed
2025/10/12 20:31:03.854338 [INFO] Running command: systemctl is-active web.service
2025/10/12 20:31:03.861873 [INFO] Process web has been fully terminated
2025/10/12 20:31:03.861904 [INFO] All processes have been fully terminated
2025/10/12 20:31:03.861908 [INFO] Removing /var/app/current/ if it exists
2025/10/12 20:31:03.862829 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 20:31:03.862853 [INFO] Register application processes...
2025/10/12 20:31:03.862856 [INFO] Registering the proc: web

2025/10/12 20:31:03.862864 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 20:31:03.874543 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:31:04.123963 [INFO] Running command: systemctl reset-failed
2025/10/12 20:31:04.132044 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 20:31:04.139949 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 20:31:04.426738 [INFO] Running command: systemctl start eb-app.target
2025/10/12 20:31:04.436039 [INFO] Running command: systemctl enable web.service
2025/10/12 20:31:04.696793 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 20:31:04.696818 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 20:31:04.706915 [INFO] Running command: systemctl is-active web.service
2025/10/12 20:31:04.713875 [INFO] Running command: systemctl start web.service
2025/10/12 20:31:04.775546 [INFO] Executing instruction: start X-Ray
2025/10/12 20:31:04.775562 [INFO] X-Ray is not enabled.
2025/10/12 20:31:04.775566 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 20:31:04.775587 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 20:31:04.793299 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 20:31:04.793493 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 20:31:04.796081 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 20:31:04.812661 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:31:05.108466 [INFO] Running command: systemctl reset-failed
2025/10/12 20:31:05.117996 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 20:31:05.132213 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 20:31:05.142378 [INFO] Running command: systemctl start nginx.service
2025/10/12 20:31:05.271295 [INFO] Executing instruction: configureSqsd
2025/10/12 20:31:05.271310 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 20:31:05.271313 [INFO] Executing instruction: startSqsd
2025/10/12 20:31:05.271315 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 20:31:05.271318 [INFO] Executing instruction: Track pids in healthd
2025/10/12 20:31:05.271321 [INFO] This is an enhanced health env...
2025/10/12 20:31:05.271331 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 20:31:05.283885 [INFO] cfn-hup.service healthd.service nginx.service

2025/10/12 20:31:05.283916 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 20:31:05.299449 [INFO] web.service

2025/10/12 20:31:05.299724 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/12 20:31:05.299768 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/12 20:31:05.299784 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/12 20:31:05.299787 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/12 20:31:05.299791 [INFO] Executing cleanup logic
2025/10/12 20:31:05.299872 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760301059328,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760301065299,"severity":"INFO"}]}]}

2025/10/12 20:31:05.300920 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 20:33:46.629814 [INFO] Starting...
2025/10/12 20:33:46.629860 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 20:33:46.629882 [INFO] reading event message file
2025/10/12 20:33:46.630195 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 20:33:46.690208 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 20:33:46.978339 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 20:33:47.265772 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 20:33:47.265787 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 20:33:47.265789 [INFO] Engine command: (app-deploy)

2025/10/12 20:33:47.265793 [INFO] Downloading EB Application...
2025/10/12 20:33:47.265795 [INFO] Region: us-east-1
2025/10/12 20:33:47.265797 [INFO] envID: e-r2hnd7bhig
2025/10/12 20:33:47.265799 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 20:33:47.265801 [INFO] accountID: 433676943793
2025/10/12 20:33:47.265804 [INFO] Using manifest file name from command request
2025/10/12 20:33:47.265809 [INFO] Manifest name is : manifest_1760301224208
2025/10/12 20:33:47.265812 [INFO] Download app version manifest
2025/10/12 20:33:47.265978 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760301224208, expected bucket owner: 433676943793
2025/10/12 20:33:47.298059 [INFO] Download successful111bytes downloaded
2025/10/12 20:33:47.298219 [INFO] Trying to read and parse version manifest...
2025/10/12 20:33:47.298289 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251013_073337577923, expected bucket owner: 433676943793
2025/10/12 20:33:47.319329 [INFO] Download successful24781bytes downloaded
2025/10/12 20:33:47.319582 [INFO] Executing instruction: ElectLeader
2025/10/12 20:33:47.319588 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 20:33:47.319591 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 20:33:47.319608 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 277aab1a-fdf6-4e0e-865f-92fc2fc341f9 --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 20:33:47.640934 [INFO] Instance is Leader.
2025/10/12 20:33:47.640983 [INFO] Executing instruction: stopSqsd
2025/10/12 20:33:47.640989 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 20:33:47.640993 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 20:33:47.640997 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 20:33:47.641012 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 20:33:47.952544 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 20:33:47.952569 [INFO] Executing instruction: StageApplication
2025/10/12 20:33:47.952573 [INFO] Recreating /var/app/staging/
2025/10/12 20:33:47.952680 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 20:33:47.952700 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 20:33:47.958339 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 20:33:47.959292 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 20:33:47.959312 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 20:33:47.959329 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 20:33:47.959331 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 20:33:47.959335 [INFO] Executing instruction: InstallDependency
2025/10/12 20:33:47.959339 [INFO] checking dependencies file
2025/10/12 20:33:47.959351 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 20:33:47.959361 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 20:33:48.411867 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.24.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.24.1)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.14.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (2025.10.5)
Requirement already satisfied: httpcore<0.18.0,>=0.15.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (0.17.3)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (1.3.1)

2025/10/12 20:33:48.411892 [INFO] Executing instruction: check Procfile
2025/10/12 20:33:48.411947 [INFO] detected Procfile in application source bundle ...
2025/10/12 20:33:48.411958 [INFO] Executing instruction: configure X-Ray
2025/10/12 20:33:48.411962 [INFO] X-Ray is not enabled.
2025/10/12 20:33:48.411965 [INFO] Executing instruction: configure proxy server
2025/10/12 20:33:48.411981 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 20:33:48.420838 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 20:33:48.422925 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 20:33:48.500280 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/12 20:33:48.500325 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 20:33:48.514611 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 20:33:48.525522 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 20:33:48.539068 [INFO] Running command: systemctl stop healthd.service
2025/10/12 20:33:48.634372 [INFO] Running command: systemctl disable healthd.service
2025/10/12 20:33:48.970115 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/12 20:33:48.970287 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:33:49.228961 [INFO] Running command: systemctl reset-failed
2025/10/12 20:33:49.238723 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:33:49.486579 [INFO] Running command: systemctl reset-failed
2025/10/12 20:33:49.494764 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 20:33:49.502879 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 20:33:49.795685 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 20:33:49.804188 [INFO] Running command: systemctl enable healthd.service
2025/10/12 20:33:50.088944 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 20:33:50.088973 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 20:33:50.100343 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 20:33:50.107820 [INFO] Running command: systemctl start healthd.service
2025/10/12 20:33:50.199479 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 20:33:50.200683 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 20:33:50.201835 [INFO] Executing instruction: configure log streaming
2025/10/12 20:33:50.201845 [INFO] log streaming is not enabled
2025/10/12 20:33:50.201849 [INFO] disable log stream
2025/10/12 20:33:50.201861 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 20:33:50.222253 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 20:33:50.240310 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 20:33:50.240335 [INFO] Checking if logs need forced rotation
2025/10/12 20:33:50.240355 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 20:33:50.679821 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 20:33:51.050989 [INFO] Generating rsyslog config from Procfile
2025/10/12 20:33:51.053242 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 20:33:51.218347 [INFO] Executing instruction: PostBuildEbExtension
2025/10/12 20:33:51.218374 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/12 20:33:51.218389 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/12 20:33:51.539692 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/12 20:33:51.539717 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 20:33:51.539811 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 20:33:51.539815 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/12 20:33:51.539827 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/12 20:33:51.539841 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/12 20:33:51.539844 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/12 20:33:51.539848 [INFO] Executing instruction: stop X-Ray
2025/10/12 20:33:51.539850 [INFO] stop X-Ray ...
2025/10/12 20:33:51.539860 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 20:33:51.552365 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 20:33:51.552390 [INFO] Running command: systemctl stop xray.service
2025/10/12 20:33:51.564939 [INFO] Executing instruction: stop proxy
2025/10/12 20:33:51.564977 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 20:33:51.578809 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 20:33:51.578843 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 20:33:51.591193 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 20:33:51.599204 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 20:33:51.608217 [INFO] Running command: systemctl stop nginx.service
2025/10/12 20:33:51.796894 [INFO] Running command: systemctl disable nginx.service
2025/10/12 20:33:52.042633 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:33:52.339092 [INFO] Running command: systemctl reset-failed
2025/10/12 20:33:52.346728 [INFO] Executing instruction: FlipApplication
2025/10/12 20:33:52.346749 [INFO] Fetching environment variables...
2025/10/12 20:33:52.346970 [INFO] Purge old process...
2025/10/12 20:33:52.346989 [INFO] Running command: systemctl stop eb-app.target
2025/10/12 20:33:52.355580 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 20:33:52.365935 [INFO] web.service

2025/10/12 20:33:52.365966 [INFO] deregistering process: web
2025/10/12 20:33:52.365976 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 20:33:52.376616 [INFO] Running command: systemctl is-active web.service
2025/10/12 20:33:52.383855 [INFO] Running command: systemctl disable web.service
2025/10/12 20:33:52.613786 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/12 20:33:52.613858 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:33:52.825605 [INFO] Running command: systemctl reset-failed
2025/10/12 20:33:52.855895 [INFO] Running command: systemctl is-active web.service
2025/10/12 20:33:52.863942 [INFO] Process web has been fully terminated
2025/10/12 20:33:52.863961 [INFO] All processes have been fully terminated
2025/10/12 20:33:52.863964 [INFO] Removing /var/app/current/ if it exists
2025/10/12 20:33:52.864796 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 20:33:52.864816 [INFO] Register application processes...
2025/10/12 20:33:52.864820 [INFO] Registering the proc: web

2025/10/12 20:33:52.864826 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 20:33:52.876238 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:33:53.133352 [INFO] Running command: systemctl reset-failed
2025/10/12 20:33:53.140700 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 20:33:53.148212 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 20:33:53.413152 [INFO] Running command: systemctl start eb-app.target
2025/10/12 20:33:53.422256 [INFO] Running command: systemctl enable web.service
2025/10/12 20:33:53.694185 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 20:33:53.694239 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 20:33:53.705140 [INFO] Running command: systemctl is-active web.service
2025/10/12 20:33:53.713119 [INFO] Running command: systemctl start web.service
2025/10/12 20:33:53.779662 [INFO] Executing instruction: start X-Ray
2025/10/12 20:33:53.779688 [INFO] X-Ray is not enabled.
2025/10/12 20:33:53.779692 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 20:33:53.779716 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 20:33:53.806280 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 20:33:53.806536 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 20:33:53.811113 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 20:33:53.835354 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:33:54.235197 [INFO] Running command: systemctl reset-failed
2025/10/12 20:33:54.248374 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 20:33:54.268851 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 20:33:54.283010 [INFO] Running command: systemctl start nginx.service
2025/10/12 20:33:54.451864 [INFO] Executing instruction: configureSqsd
2025/10/12 20:33:54.451882 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 20:33:54.451886 [INFO] Executing instruction: startSqsd
2025/10/12 20:33:54.451889 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 20:33:54.451892 [INFO] Executing instruction: Track pids in healthd
2025/10/12 20:33:54.451896 [INFO] This is an enhanced health env...
2025/10/12 20:33:54.451909 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 20:33:54.468735 [INFO] cfn-hup.service nginx.service healthd.service

2025/10/12 20:33:54.468769 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 20:33:54.484140 [INFO] web.service

2025/10/12 20:33:54.484495 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/12 20:33:54.484558 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/12 20:33:54.484580 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/12 20:33:54.484583 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/12 20:33:54.484590 [INFO] Executing cleanup logic
2025/10/12 20:33:54.484678 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760301228411,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760301234484,"severity":"INFO"}]}]}

2025/10/12 20:33:54.485771 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 20:37:23.198883 [INFO] Starting...
2025/10/12 20:37:23.198931 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 20:37:23.198951 [INFO] reading event message file
2025/10/12 20:37:23.199273 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 20:37:23.265756 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 20:37:23.556827 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 20:37:23.846010 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 20:37:23.846021 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 20:37:23.846024 [INFO] Engine command: (app-deploy)

2025/10/12 20:37:23.846027 [INFO] Downloading EB Application...
2025/10/12 20:37:23.846029 [INFO] Region: us-east-1
2025/10/12 20:37:23.846031 [INFO] envID: e-r2hnd7bhig
2025/10/12 20:37:23.846033 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 20:37:23.846036 [INFO] accountID: 433676943793
2025/10/12 20:37:23.846038 [INFO] Using manifest file name from command request
2025/10/12 20:37:23.846043 [INFO] Manifest name is : manifest_1760301440701
2025/10/12 20:37:23.846045 [INFO] Download app version manifest
2025/10/12 20:37:23.846215 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760301440701, expected bucket owner: 433676943793
2025/10/12 20:37:23.886038 [INFO] Download successful111bytes downloaded
2025/10/12 20:37:23.886183 [INFO] Trying to read and parse version manifest...
2025/10/12 20:37:23.886255 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251013_073714046721, expected bucket owner: 433676943793
2025/10/12 20:37:23.904586 [INFO] Download successful24628bytes downloaded
2025/10/12 20:37:23.904853 [INFO] Executing instruction: ElectLeader
2025/10/12 20:37:23.904859 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 20:37:23.904862 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 20:37:23.904873 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 012b1253-09bb-4f64-b187-ac3c2ad56afd --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 20:37:24.204262 [INFO] Instance is Leader.
2025/10/12 20:37:24.204306 [INFO] Executing instruction: stopSqsd
2025/10/12 20:37:24.204310 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 20:37:24.204313 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 20:37:24.204316 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 20:37:24.204327 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 20:37:24.524293 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 20:37:24.524317 [INFO] Executing instruction: StageApplication
2025/10/12 20:37:24.524320 [INFO] Recreating /var/app/staging/
2025/10/12 20:37:24.524422 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 20:37:24.524432 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 20:37:24.529311 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 20:37:24.530431 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 20:37:24.530455 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 20:37:24.530472 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 20:37:24.530474 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 20:37:24.530480 [INFO] Executing instruction: InstallDependency
2025/10/12 20:37:24.530484 [INFO] checking dependencies file
2025/10/12 20:37:24.530498 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 20:37:24.530509 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 20:37:24.983128 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.24.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.24.1)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.14.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (2025.10.5)
Requirement already satisfied: httpcore<0.18.0,>=0.15.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (0.17.3)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (1.3.1)

2025/10/12 20:37:24.983154 [INFO] Executing instruction: check Procfile
2025/10/12 20:37:24.983196 [INFO] detected Procfile in application source bundle ...
2025/10/12 20:37:24.983201 [INFO] Executing instruction: configure X-Ray
2025/10/12 20:37:24.983206 [INFO] X-Ray is not enabled.
2025/10/12 20:37:24.983209 [INFO] Executing instruction: configure proxy server
2025/10/12 20:37:24.983226 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 20:37:24.993817 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 20:37:24.995935 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 20:37:25.007568 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/12 20:37:25.007593 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 20:37:25.016533 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 20:37:25.024449 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 20:37:25.033601 [INFO] Running command: systemctl stop healthd.service
2025/10/12 20:37:25.143069 [INFO] Running command: systemctl disable healthd.service
2025/10/12 20:37:25.382527 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/12 20:37:25.382622 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:37:25.657780 [INFO] Running command: systemctl reset-failed
2025/10/12 20:37:25.668390 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:37:25.956535 [INFO] Running command: systemctl reset-failed
2025/10/12 20:37:25.965603 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 20:37:25.973713 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 20:37:26.215967 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 20:37:26.224754 [INFO] Running command: systemctl enable healthd.service
2025/10/12 20:37:26.504696 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 20:37:26.504723 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 20:37:26.515670 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 20:37:26.522900 [INFO] Running command: systemctl start healthd.service
2025/10/12 20:37:26.590215 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 20:37:26.591410 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 20:37:26.592615 [INFO] Executing instruction: configure log streaming
2025/10/12 20:37:26.592626 [INFO] log streaming is not enabled
2025/10/12 20:37:26.592629 [INFO] disable log stream
2025/10/12 20:37:26.592641 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 20:37:26.612676 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 20:37:26.630862 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 20:37:26.630886 [INFO] Checking if logs need forced rotation
2025/10/12 20:37:26.630904 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 20:37:27.064128 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 20:37:27.442139 [INFO] Generating rsyslog config from Procfile
2025/10/12 20:37:27.444310 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 20:37:27.545648 [INFO] Executing instruction: PostBuildEbExtension
2025/10/12 20:37:27.545678 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/12 20:37:27.545689 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/12 20:37:27.856334 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/12 20:37:27.856358 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 20:37:27.856452 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 20:37:27.856456 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/12 20:37:27.856469 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/12 20:37:27.856484 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/12 20:37:27.856487 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/12 20:37:27.856491 [INFO] Executing instruction: stop X-Ray
2025/10/12 20:37:27.856493 [INFO] stop X-Ray ...
2025/10/12 20:37:27.856502 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 20:37:27.869505 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 20:37:27.869595 [INFO] Running command: systemctl stop xray.service
2025/10/12 20:37:27.884733 [INFO] Executing instruction: stop proxy
2025/10/12 20:37:27.884764 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 20:37:27.898934 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 20:37:27.898964 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 20:37:27.910668 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 20:37:27.918453 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 20:37:27.927400 [INFO] Running command: systemctl stop nginx.service
2025/10/12 20:37:28.135289 [INFO] Running command: systemctl disable nginx.service
2025/10/12 20:37:28.416536 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:37:28.695568 [INFO] Running command: systemctl reset-failed
2025/10/12 20:37:28.703989 [INFO] Executing instruction: FlipApplication
2025/10/12 20:37:28.704012 [INFO] Fetching environment variables...
2025/10/12 20:37:28.704255 [INFO] Purge old process...
2025/10/12 20:37:28.704274 [INFO] Running command: systemctl stop eb-app.target
2025/10/12 20:37:28.713334 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 20:37:28.723666 [INFO] web.service

2025/10/12 20:37:28.723687 [INFO] deregistering process: web
2025/10/12 20:37:28.723708 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 20:37:28.734507 [INFO] Running command: systemctl is-active web.service
2025/10/12 20:37:28.741832 [INFO] Running command: systemctl disable web.service
2025/10/12 20:37:29.124843 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/12 20:37:29.124931 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:37:29.449800 [INFO] Running command: systemctl reset-failed
2025/10/12 20:37:29.458049 [INFO] Running command: systemctl is-active web.service
2025/10/12 20:37:29.465693 [INFO] Process web has been fully terminated
2025/10/12 20:37:29.465716 [INFO] All processes have been fully terminated
2025/10/12 20:37:29.465720 [INFO] Removing /var/app/current/ if it exists
2025/10/12 20:37:29.466739 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 20:37:29.466761 [INFO] Register application processes...
2025/10/12 20:37:29.466765 [INFO] Registering the proc: web

2025/10/12 20:37:29.466773 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 20:37:29.479030 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:37:29.744560 [INFO] Running command: systemctl reset-failed
2025/10/12 20:37:29.752555 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 20:37:29.760440 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 20:37:29.977326 [INFO] Running command: systemctl start eb-app.target
2025/10/12 20:37:29.985770 [INFO] Running command: systemctl enable web.service
2025/10/12 20:37:30.227027 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 20:37:30.227060 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 20:37:30.238160 [INFO] Running command: systemctl is-active web.service
2025/10/12 20:37:30.245558 [INFO] Running command: systemctl start web.service
2025/10/12 20:37:30.306093 [INFO] Executing instruction: start X-Ray
2025/10/12 20:37:30.306111 [INFO] X-Ray is not enabled.
2025/10/12 20:37:30.306115 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 20:37:30.306136 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 20:37:30.323374 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 20:37:30.323550 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 20:37:30.326112 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 20:37:30.341795 [INFO] Running command: systemctl daemon-reload
2025/10/12 20:37:30.608824 [INFO] Running command: systemctl reset-failed
2025/10/12 20:37:30.616222 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 20:37:30.629657 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 20:37:30.639236 [INFO] Running command: systemctl start nginx.service
2025/10/12 20:37:30.742979 [INFO] Executing instruction: configureSqsd
2025/10/12 20:37:30.742995 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 20:37:30.742998 [INFO] Executing instruction: startSqsd
2025/10/12 20:37:30.743000 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 20:37:30.743002 [INFO] Executing instruction: Track pids in healthd
2025/10/12 20:37:30.743005 [INFO] This is an enhanced health env...
2025/10/12 20:37:30.743015 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 20:37:30.754804 [INFO] nginx.service cfn-hup.service healthd.service

2025/10/12 20:37:30.754842 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 20:37:30.765399 [INFO] web.service

2025/10/12 20:37:30.765651 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/12 20:37:30.765696 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/12 20:37:30.765714 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/12 20:37:30.765717 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/12 20:37:30.765721 [INFO] Executing cleanup logic
2025/10/12 20:37:30.765800 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760301444983,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760301450765,"severity":"INFO"}]}]}

2025/10/12 20:37:30.766836 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 22:30:43.228368 [INFO] Starting...
2025/10/12 22:30:43.228413 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 22:30:43.228435 [INFO] reading event message file
2025/10/12 22:30:43.228748 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 22:30:43.292986 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 22:30:43.583799 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 22:30:43.869513 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 22:30:43.869526 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 22:30:43.869529 [INFO] Engine command: (app-deploy)

2025/10/12 22:30:43.869532 [INFO] Downloading EB Application...
2025/10/12 22:30:43.869535 [INFO] Region: us-east-1
2025/10/12 22:30:43.869537 [INFO] envID: e-r2hnd7bhig
2025/10/12 22:30:43.869539 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 22:30:43.869541 [INFO] accountID: 433676943793
2025/10/12 22:30:43.869543 [INFO] Using manifest file name from command request
2025/10/12 22:30:43.869549 [INFO] Manifest name is : manifest_1760308240561
2025/10/12 22:30:43.869551 [INFO] Download app version manifest
2025/10/12 22:30:43.869723 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760308240561, expected bucket owner: 433676943793
2025/10/12 22:30:43.914493 [INFO] Download successful111bytes downloaded
2025/10/12 22:30:43.914628 [INFO] Trying to read and parse version manifest...
2025/10/12 22:30:43.914706 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251013_093033704119, expected bucket owner: 433676943793
2025/10/12 22:30:43.935514 [INFO] Download successful24616bytes downloaded
2025/10/12 22:30:43.935765 [INFO] Executing instruction: ElectLeader
2025/10/12 22:30:43.935772 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 22:30:43.935775 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 22:30:43.935785 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 50ac2151-7edf-4ff1-8bbd-fa388cb420ea --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 22:30:44.245507 [INFO] Instance is Leader.
2025/10/12 22:30:44.245559 [INFO] Executing instruction: stopSqsd
2025/10/12 22:30:44.245564 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 22:30:44.245567 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 22:30:44.245570 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 22:30:44.245584 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 22:30:44.561550 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 22:30:44.561579 [INFO] Executing instruction: StageApplication
2025/10/12 22:30:44.561584 [INFO] Recreating /var/app/staging/
2025/10/12 22:30:44.561787 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 22:30:44.561799 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 22:30:44.566865 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 22:30:44.567881 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 22:30:44.567902 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 22:30:44.567920 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 22:30:44.567923 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 22:30:44.567927 [INFO] Executing instruction: InstallDependency
2025/10/12 22:30:44.567932 [INFO] checking dependencies file
2025/10/12 22:30:44.567942 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 22:30:44.567950 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 22:30:45.015487 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.24.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.24.1)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.14.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (2025.10.5)
Requirement already satisfied: httpcore<0.18.0,>=0.15.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (0.17.3)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (1.3.1)

2025/10/12 22:30:45.015517 [INFO] Executing instruction: check Procfile
2025/10/12 22:30:45.015562 [INFO] detected Procfile in application source bundle ...
2025/10/12 22:30:45.015569 [INFO] Executing instruction: configure X-Ray
2025/10/12 22:30:45.015573 [INFO] X-Ray is not enabled.
2025/10/12 22:30:45.015576 [INFO] Executing instruction: configure proxy server
2025/10/12 22:30:45.015592 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 22:30:45.024521 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 22:30:45.026572 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 22:30:45.038218 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/12 22:30:45.038278 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 22:30:45.048046 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 22:30:45.055958 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 22:30:45.064925 [INFO] Running command: systemctl stop healthd.service
2025/10/12 22:30:45.163451 [INFO] Running command: systemctl disable healthd.service
2025/10/12 22:30:45.462559 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/12 22:30:45.462743 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:30:45.718477 [INFO] Running command: systemctl reset-failed
2025/10/12 22:30:45.728286 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:30:45.996410 [INFO] Running command: systemctl reset-failed
2025/10/12 22:30:46.004666 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 22:30:46.012356 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 22:30:46.325645 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 22:30:46.334221 [INFO] Running command: systemctl enable healthd.service
2025/10/12 22:30:46.604101 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 22:30:46.604134 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 22:30:46.614784 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 22:30:46.622506 [INFO] Running command: systemctl start healthd.service
2025/10/12 22:30:46.706070 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 22:30:46.707308 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 22:30:46.708519 [INFO] Executing instruction: configure log streaming
2025/10/12 22:30:46.708529 [INFO] log streaming is not enabled
2025/10/12 22:30:46.708533 [INFO] disable log stream
2025/10/12 22:30:46.708545 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 22:30:46.727253 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 22:30:46.744528 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 22:30:46.744553 [INFO] Checking if logs need forced rotation
2025/10/12 22:30:46.744575 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 22:30:47.175275 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 22:30:47.556020 [INFO] Generating rsyslog config from Procfile
2025/10/12 22:30:47.558293 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 22:30:47.856970 [INFO] Executing instruction: PostBuildEbExtension
2025/10/12 22:30:47.856996 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/12 22:30:47.857009 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/12 22:30:48.167261 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/12 22:30:48.167286 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 22:30:48.167382 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 22:30:48.167386 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/12 22:30:48.167464 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/12 22:30:48.167479 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/12 22:30:48.167482 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/12 22:30:48.167486 [INFO] Executing instruction: stop X-Ray
2025/10/12 22:30:48.167488 [INFO] stop X-Ray ...
2025/10/12 22:30:48.167498 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 22:30:48.179456 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 22:30:48.179482 [INFO] Running command: systemctl stop xray.service
2025/10/12 22:30:48.193011 [INFO] Executing instruction: stop proxy
2025/10/12 22:30:48.193044 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 22:30:48.207270 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 22:30:48.207302 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 22:30:48.218944 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 22:30:48.227288 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 22:30:48.236213 [INFO] Running command: systemctl stop nginx.service
2025/10/12 22:30:48.456888 [INFO] Running command: systemctl disable nginx.service
2025/10/12 22:30:48.736687 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:30:49.016846 [INFO] Running command: systemctl reset-failed
2025/10/12 22:30:49.025204 [INFO] Executing instruction: FlipApplication
2025/10/12 22:30:49.025232 [INFO] Fetching environment variables...
2025/10/12 22:30:49.025557 [INFO] Purge old process...
2025/10/12 22:30:49.025577 [INFO] Running command: systemctl stop eb-app.target
2025/10/12 22:30:49.034460 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 22:30:49.044877 [INFO] web.service

2025/10/12 22:30:49.044903 [INFO] deregistering process: web
2025/10/12 22:30:49.044914 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 22:30:49.055036 [INFO] Running command: systemctl is-active web.service
2025/10/12 22:30:49.062408 [INFO] Running command: systemctl disable web.service
2025/10/12 22:30:49.441475 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/12 22:30:49.441552 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:30:49.769746 [INFO] Running command: systemctl reset-failed
2025/10/12 22:30:49.778212 [INFO] Running command: systemctl is-active web.service
2025/10/12 22:30:49.785572 [INFO] Process web has been fully terminated
2025/10/12 22:30:49.785591 [INFO] All processes have been fully terminated
2025/10/12 22:30:49.785594 [INFO] Removing /var/app/current/ if it exists
2025/10/12 22:30:49.786286 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 22:30:49.786303 [INFO] Register application processes...
2025/10/12 22:30:49.786307 [INFO] Registering the proc: web

2025/10/12 22:30:49.786313 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 22:30:49.798263 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:30:50.074346 [INFO] Running command: systemctl reset-failed
2025/10/12 22:30:50.082932 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 22:30:50.091105 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 22:30:50.364170 [INFO] Running command: systemctl start eb-app.target
2025/10/12 22:30:50.373222 [INFO] Running command: systemctl enable web.service
2025/10/12 22:30:50.644196 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 22:30:50.644227 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 22:30:50.655381 [INFO] Running command: systemctl is-active web.service
2025/10/12 22:30:50.662750 [INFO] Running command: systemctl start web.service
2025/10/12 22:30:50.738637 [INFO] Executing instruction: start X-Ray
2025/10/12 22:30:50.738659 [INFO] X-Ray is not enabled.
2025/10/12 22:30:50.738663 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 22:30:50.738685 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 22:30:50.765802 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 22:30:50.766118 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 22:30:50.770806 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 22:30:50.792600 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:30:51.241553 [INFO] Running command: systemctl reset-failed
2025/10/12 22:30:51.254775 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 22:30:51.275058 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 22:30:51.288912 [INFO] Running command: systemctl start nginx.service
2025/10/12 22:30:51.433542 [INFO] Executing instruction: configureSqsd
2025/10/12 22:30:51.433558 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 22:30:51.433562 [INFO] Executing instruction: startSqsd
2025/10/12 22:30:51.433565 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 22:30:51.433569 [INFO] Executing instruction: Track pids in healthd
2025/10/12 22:30:51.433578 [INFO] This is an enhanced health env...
2025/10/12 22:30:51.433590 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 22:30:51.449622 [INFO] cfn-hup.service healthd.service nginx.service

2025/10/12 22:30:51.449656 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 22:30:51.465773 [INFO] web.service

2025/10/12 22:30:51.466131 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/12 22:30:51.466155 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/12 22:30:51.466177 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/12 22:30:51.466181 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/12 22:30:51.466187 [INFO] Executing cleanup logic
2025/10/12 22:30:51.466278 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760308245015,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760308251466,"severity":"INFO"}]}]}

2025/10/12 22:30:51.467454 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 22:38:49.694685 [INFO] Starting...
2025/10/12 22:38:49.694733 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 22:38:49.694754 [INFO] reading event message file
2025/10/12 22:38:49.695065 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 22:38:49.756091 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 22:38:50.052018 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 22:38:50.340783 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 22:38:50.340796 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 22:38:50.340799 [INFO] Engine command: (app-deploy)

2025/10/12 22:38:50.340803 [INFO] Downloading EB Application...
2025/10/12 22:38:50.340805 [INFO] Region: us-east-1
2025/10/12 22:38:50.340807 [INFO] envID: e-r2hnd7bhig
2025/10/12 22:38:50.340809 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 22:38:50.340812 [INFO] accountID: 433676943793
2025/10/12 22:38:50.340814 [INFO] Using manifest file name from command request
2025/10/12 22:38:50.340819 [INFO] Manifest name is : manifest_1760308726805
2025/10/12 22:38:50.340821 [INFO] Download app version manifest
2025/10/12 22:38:50.340987 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760308726805, expected bucket owner: 433676943793
2025/10/12 22:38:50.376841 [INFO] Download successful111bytes downloaded
2025/10/12 22:38:50.376987 [INFO] Trying to read and parse version manifest...
2025/10/12 22:38:50.377067 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251013_093839959789, expected bucket owner: 433676943793
2025/10/12 22:38:50.394479 [INFO] Download successful24666bytes downloaded
2025/10/12 22:38:50.394754 [INFO] Executing instruction: ElectLeader
2025/10/12 22:38:50.394760 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 22:38:50.394763 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 22:38:50.394773 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 6bffc835-b6e9-40c6-b641-ce8c6491c17e --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 22:38:50.696099 [INFO] Instance is Leader.
2025/10/12 22:38:50.696139 [INFO] Executing instruction: stopSqsd
2025/10/12 22:38:50.696143 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 22:38:50.696146 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 22:38:50.696149 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 22:38:50.696160 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 22:38:51.004935 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 22:38:51.004959 [INFO] Executing instruction: StageApplication
2025/10/12 22:38:51.004962 [INFO] Recreating /var/app/staging/
2025/10/12 22:38:51.005062 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 22:38:51.005073 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 22:38:51.010101 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 22:38:51.011087 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 22:38:51.011114 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 22:38:51.011131 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 22:38:51.011133 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 22:38:51.011138 [INFO] Executing instruction: InstallDependency
2025/10/12 22:38:51.011142 [INFO] checking dependencies file
2025/10/12 22:38:51.011153 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 22:38:51.011162 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 22:38:51.993979 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.24.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.24.1)
Requirement already satisfied: supabase==2.3.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (2.3.4)
Collecting openai==1.12.0 (from -r requirements.txt (line 10))
  Downloading openai-1.12.0-py3-none-any.whl.metadata (18 kB)
Collecting structlog==24.1.0 (from -r requirements.txt (line 11))
  Downloading structlog-24.1.0-py3-none-any.whl.metadata (6.9 kB)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.14.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (2025.10.5)
Requirement already satisfied: httpcore<0.18.0,>=0.15.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (0.17.3)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: gotrue<3.0,>=1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 9)) (2.9.1)
Requirement already satisfied: postgrest<0.16.0,>=0.10.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 9)) (0.15.1)
Requirement already satisfied: realtime<2.0.0,>=1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 9)) (1.0.6)
Requirement already satisfied: storage3<0.8.0,>=0.5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 9)) (0.7.7)
Requirement already satisfied: supafunc<0.4.0,>=0.3.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 9)) (0.3.3)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 10)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 10)) (4.67.1)
Requirement already satisfied: h2<5,>=3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 9)) (4.3.0)
Requirement already satisfied: hyperframe<7,>=6.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 9)) (6.1.0)
Requirement already satisfied: hpack<5,>=4.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 9)) (4.1.0)
Requirement already satisfied: deprecation<3.0.0,>=2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 9)) (2.1.0)
Requirement already satisfied: strenum<0.5.0,>=0.4.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 9)) (0.4.15)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from deprecation<3.0.0,>=2.1.0->postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 9)) (25.0)
Requirement already satisfied: python-dateutil<3.0.0,>=2.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 9)) (2.9.0.post0)
Requirement already satisfied: websockets<13,>=11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 9)) (12.0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.8.1->realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 9)) (1.17.0)
Downloading openai-1.12.0-py3-none-any.whl (226 kB)
Downloading structlog-24.1.0-py3-none-any.whl (65 kB)
Installing collected packages: structlog, openai
  Attempting uninstall: structlog
    Found existing installation: structlog 23.2.0
    Uninstalling structlog-23.2.0:
      Successfully uninstalled structlog-23.2.0
  Attempting uninstall: openai
    Found existing installation: openai 1.6.1
    Uninstalling openai-1.6.1:
      Successfully uninstalled openai-1.6.1

Successfully installed openai-1.12.0 structlog-24.1.0

2025/10/12 22:38:51.994020 [INFO] Executing instruction: check Procfile
2025/10/12 22:38:51.994066 [INFO] detected Procfile in application source bundle ...
2025/10/12 22:38:51.994072 [INFO] Executing instruction: configure X-Ray
2025/10/12 22:38:51.994076 [INFO] X-Ray is not enabled.
2025/10/12 22:38:51.994079 [INFO] Executing instruction: configure proxy server
2025/10/12 22:38:51.994094 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 22:38:52.005012 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 22:38:52.007210 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 22:38:52.018552 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/12 22:38:52.018580 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 22:38:52.027477 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 22:38:52.035754 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 22:38:52.044926 [INFO] Running command: systemctl stop healthd.service
2025/10/12 22:38:52.172454 [INFO] Running command: systemctl disable healthd.service
2025/10/12 22:38:52.423436 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/12 22:38:52.423510 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:38:52.716457 [INFO] Running command: systemctl reset-failed
2025/10/12 22:38:52.726341 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:38:52.975847 [INFO] Running command: systemctl reset-failed
2025/10/12 22:38:52.983296 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 22:38:52.991335 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 22:38:53.275287 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 22:38:53.284165 [INFO] Running command: systemctl enable healthd.service
2025/10/12 22:38:53.555566 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 22:38:53.555597 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 22:38:53.566306 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 22:38:53.574600 [INFO] Running command: systemctl start healthd.service
2025/10/12 22:38:53.666456 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 22:38:53.667632 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 22:38:53.668740 [INFO] Executing instruction: configure log streaming
2025/10/12 22:38:53.668752 [INFO] log streaming is not enabled
2025/10/12 22:38:53.668756 [INFO] disable log stream
2025/10/12 22:38:53.668768 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 22:38:53.685560 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 22:38:53.703048 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 22:38:53.703078 [INFO] Checking if logs need forced rotation
2025/10/12 22:38:53.703093 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 22:38:54.142263 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 22:38:54.531366 [INFO] Generating rsyslog config from Procfile
2025/10/12 22:38:54.533611 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 22:38:54.697334 [INFO] Executing instruction: PostBuildEbExtension
2025/10/12 22:38:54.697366 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/12 22:38:54.697450 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/12 22:38:55.023395 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/12 22:38:55.023427 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 22:38:55.023523 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 22:38:55.023527 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/12 22:38:55.023543 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/12 22:38:55.023560 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/12 22:38:55.023563 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/12 22:38:55.023567 [INFO] Executing instruction: stop X-Ray
2025/10/12 22:38:55.023569 [INFO] stop X-Ray ...
2025/10/12 22:38:55.023579 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 22:38:55.037540 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 22:38:55.037571 [INFO] Running command: systemctl stop xray.service
2025/10/12 22:38:55.052742 [INFO] Executing instruction: stop proxy
2025/10/12 22:38:55.052768 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 22:38:55.066914 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 22:38:55.066945 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 22:38:55.078828 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 22:38:55.086945 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 22:38:55.096411 [INFO] Running command: systemctl stop nginx.service
2025/10/12 22:38:55.295460 [INFO] Running command: systemctl disable nginx.service
2025/10/12 22:38:55.566978 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:38:55.818582 [INFO] Running command: systemctl reset-failed
2025/10/12 22:38:55.826795 [INFO] Executing instruction: FlipApplication
2025/10/12 22:38:55.826816 [INFO] Fetching environment variables...
2025/10/12 22:38:55.827076 [INFO] Purge old process...
2025/10/12 22:38:55.827094 [INFO] Running command: systemctl stop eb-app.target
2025/10/12 22:38:55.836130 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 22:38:55.846258 [INFO] web.service

2025/10/12 22:38:55.846283 [INFO] deregistering process: web
2025/10/12 22:38:55.846294 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 22:38:55.856182 [INFO] Running command: systemctl is-active web.service
2025/10/12 22:38:55.863525 [INFO] Running command: systemctl disable web.service
2025/10/12 22:38:56.239274 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/12 22:38:56.239361 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:38:56.553735 [INFO] Running command: systemctl reset-failed
2025/10/12 22:38:56.586001 [INFO] Running command: systemctl is-active web.service
2025/10/12 22:38:56.594242 [INFO] Process web has been fully terminated
2025/10/12 22:38:56.594263 [INFO] All processes have been fully terminated
2025/10/12 22:38:56.594267 [INFO] Removing /var/app/current/ if it exists
2025/10/12 22:38:56.595280 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 22:38:56.595300 [INFO] Register application processes...
2025/10/12 22:38:56.595304 [INFO] Registering the proc: web

2025/10/12 22:38:56.595311 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 22:38:56.607021 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:38:56.853936 [INFO] Running command: systemctl reset-failed
2025/10/12 22:38:56.861491 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 22:38:56.868854 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 22:38:57.138768 [INFO] Running command: systemctl start eb-app.target
2025/10/12 22:38:57.147813 [INFO] Running command: systemctl enable web.service
2025/10/12 22:38:57.429488 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 22:38:57.429526 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 22:38:57.440633 [INFO] Running command: systemctl is-active web.service
2025/10/12 22:38:57.448112 [INFO] Running command: systemctl start web.service
2025/10/12 22:38:57.528370 [INFO] Executing instruction: start X-Ray
2025/10/12 22:38:57.528389 [INFO] X-Ray is not enabled.
2025/10/12 22:38:57.528393 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 22:38:57.528430 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 22:38:57.556325 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 22:38:57.556570 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 22:38:57.560281 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 22:38:57.584118 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:38:58.010749 [INFO] Running command: systemctl reset-failed
2025/10/12 22:38:58.026032 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 22:38:58.047627 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 22:38:58.062179 [INFO] Running command: systemctl start nginx.service
2025/10/12 22:38:58.259338 [INFO] Executing instruction: configureSqsd
2025/10/12 22:38:58.259355 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 22:38:58.259359 [INFO] Executing instruction: startSqsd
2025/10/12 22:38:58.259362 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 22:38:58.259365 [INFO] Executing instruction: Track pids in healthd
2025/10/12 22:38:58.259369 [INFO] This is an enhanced health env...
2025/10/12 22:38:58.259381 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 22:38:58.275522 [INFO] healthd.service cfn-hup.service nginx.service

2025/10/12 22:38:58.275568 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 22:38:58.292129 [INFO] web.service

2025/10/12 22:38:58.292476 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/12 22:38:58.292538 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/12 22:38:58.292560 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/12 22:38:58.292564 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/12 22:38:58.292570 [INFO] Executing cleanup logic
2025/10/12 22:38:58.292671 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760308731994,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760308738292,"severity":"INFO"}]}]}

2025/10/12 22:38:58.293913 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 22:48:10.910528 [INFO] Starting...
2025/10/12 22:48:10.910572 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 22:48:10.910592 [INFO] reading event message file
2025/10/12 22:48:10.910895 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 22:48:10.975974 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 22:48:11.272115 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 22:48:11.554901 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 22:48:11.554913 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 22:48:11.554916 [INFO] Engine command: (app-deploy)

2025/10/12 22:48:11.554919 [INFO] Downloading EB Application...
2025/10/12 22:48:11.554921 [INFO] Region: us-east-1
2025/10/12 22:48:11.554923 [INFO] envID: e-r2hnd7bhig
2025/10/12 22:48:11.554926 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 22:48:11.554928 [INFO] accountID: 433676943793
2025/10/12 22:48:11.554931 [INFO] Using manifest file name from command request
2025/10/12 22:48:11.554936 [INFO] Manifest name is : manifest_1760309288478
2025/10/12 22:48:11.554938 [INFO] Download app version manifest
2025/10/12 22:48:11.555094 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760309288478, expected bucket owner: 433676943793
2025/10/12 22:48:11.605758 [INFO] Download successful111bytes downloaded
2025/10/12 22:48:11.605884 [INFO] Trying to read and parse version manifest...
2025/10/12 22:48:11.605950 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251013_094757397454, expected bucket owner: 433676943793
2025/10/12 22:48:11.624534 [INFO] Download successful24769bytes downloaded
2025/10/12 22:48:11.624881 [INFO] Executing instruction: ElectLeader
2025/10/12 22:48:11.624888 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 22:48:11.624891 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 22:48:11.624902 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 2b6818ce-806a-4828-913e-0e30ed9c7f7d --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 22:48:11.927403 [INFO] Instance is Leader.
2025/10/12 22:48:11.927446 [INFO] Executing instruction: stopSqsd
2025/10/12 22:48:11.927452 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 22:48:11.927455 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 22:48:11.927458 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 22:48:11.927473 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 22:48:12.227080 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 22:48:12.227103 [INFO] Executing instruction: StageApplication
2025/10/12 22:48:12.227116 [INFO] Recreating /var/app/staging/
2025/10/12 22:48:12.227220 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 22:48:12.227230 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 22:48:12.232118 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 22:48:12.233084 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 22:48:12.233104 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 22:48:12.233121 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 22:48:12.233123 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 22:48:12.233127 [INFO] Executing instruction: InstallDependency
2025/10/12 22:48:12.233131 [INFO] checking dependencies file
2025/10/12 22:48:12.233143 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 22:48:12.233153 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 22:48:12.731460 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.24.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.24.1)
Requirement already satisfied: supabase==2.3.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (2.3.4)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.14.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (2025.10.5)
Requirement already satisfied: httpcore<0.18.0,>=0.15.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (0.17.3)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: gotrue<3.0,>=1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 9)) (2.9.1)
Requirement already satisfied: postgrest<0.16.0,>=0.10.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 9)) (0.15.1)
Requirement already satisfied: realtime<2.0.0,>=1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 9)) (1.0.6)
Requirement already satisfied: storage3<0.8.0,>=0.5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 9)) (0.7.7)
Requirement already satisfied: supafunc<0.4.0,>=0.3.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.3.4->-r requirements.txt (line 9)) (0.3.3)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 10)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 10)) (4.67.1)
Requirement already satisfied: h2<5,>=3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 9)) (4.3.0)
Requirement already satisfied: hyperframe<7,>=6.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 9)) (6.1.0)
Requirement already satisfied: hpack<5,>=4.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.3.4->-r requirements.txt (line 9)) (4.1.0)
Requirement already satisfied: deprecation<3.0.0,>=2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 9)) (2.1.0)
Requirement already satisfied: strenum<0.5.0,>=0.4.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 9)) (0.4.15)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from deprecation<3.0.0,>=2.1.0->postgrest<0.16.0,>=0.10.8->supabase==2.3.4->-r requirements.txt (line 9)) (25.0)
Requirement already satisfied: python-dateutil<3.0.0,>=2.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 9)) (2.9.0.post0)
Requirement already satisfied: websockets<13,>=11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 9)) (12.0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.8.1->realtime<2.0.0,>=1.0.0->supabase==2.3.4->-r requirements.txt (line 9)) (1.17.0)

2025/10/12 22:48:12.731493 [INFO] Executing instruction: check Procfile
2025/10/12 22:48:12.731544 [INFO] detected Procfile in application source bundle ...
2025/10/12 22:48:12.731551 [INFO] Executing instruction: configure X-Ray
2025/10/12 22:48:12.731554 [INFO] X-Ray is not enabled.
2025/10/12 22:48:12.731557 [INFO] Executing instruction: configure proxy server
2025/10/12 22:48:12.731573 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 22:48:12.740561 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 22:48:12.742643 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 22:48:12.807073 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/12 22:48:12.807100 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 22:48:12.815733 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 22:48:12.823245 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 22:48:12.833220 [INFO] Running command: systemctl stop healthd.service
2025/10/12 22:48:12.872920 [INFO] Running command: systemctl disable healthd.service
2025/10/12 22:48:13.130231 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/12 22:48:13.130363 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:48:13.437271 [INFO] Running command: systemctl reset-failed
2025/10/12 22:48:13.448182 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:48:13.717581 [INFO] Running command: systemctl reset-failed
2025/10/12 22:48:13.725574 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 22:48:13.733998 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 22:48:14.028802 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 22:48:14.038164 [INFO] Running command: systemctl enable healthd.service
2025/10/12 22:48:14.314880 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 22:48:14.314914 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 22:48:14.325988 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 22:48:14.333826 [INFO] Running command: systemctl start healthd.service
2025/10/12 22:48:14.408132 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 22:48:14.409335 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 22:48:14.410529 [INFO] Executing instruction: configure log streaming
2025/10/12 22:48:14.410541 [INFO] log streaming is not enabled
2025/10/12 22:48:14.410545 [INFO] disable log stream
2025/10/12 22:48:14.410557 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 22:48:14.429271 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 22:48:14.447902 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 22:48:14.447926 [INFO] Checking if logs need forced rotation
2025/10/12 22:48:14.447947 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 22:48:14.898887 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 22:48:15.276107 [INFO] Generating rsyslog config from Procfile
2025/10/12 22:48:15.278331 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 22:48:15.386501 [INFO] Executing instruction: PostBuildEbExtension
2025/10/12 22:48:15.386528 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/12 22:48:15.386539 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/12 22:48:15.694152 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/12 22:48:15.694176 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 22:48:15.694269 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 22:48:15.694279 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/12 22:48:15.694292 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/12 22:48:15.694306 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/12 22:48:15.694309 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/12 22:48:15.694313 [INFO] Executing instruction: stop X-Ray
2025/10/12 22:48:15.694315 [INFO] stop X-Ray ...
2025/10/12 22:48:15.694323 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 22:48:15.707692 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 22:48:15.707727 [INFO] Running command: systemctl stop xray.service
2025/10/12 22:48:15.721962 [INFO] Executing instruction: stop proxy
2025/10/12 22:48:15.721990 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 22:48:15.736901 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 22:48:15.736933 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 22:48:15.748561 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 22:48:15.756532 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 22:48:15.765838 [INFO] Running command: systemctl stop nginx.service
2025/10/12 22:48:15.976708 [INFO] Running command: systemctl disable nginx.service
2025/10/12 22:48:16.241492 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:48:16.507331 [INFO] Running command: systemctl reset-failed
2025/10/12 22:48:16.515823 [INFO] Executing instruction: FlipApplication
2025/10/12 22:48:16.515848 [INFO] Fetching environment variables...
2025/10/12 22:48:16.516143 [INFO] Purge old process...
2025/10/12 22:48:16.516208 [INFO] Running command: systemctl stop eb-app.target
2025/10/12 22:48:16.525739 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 22:48:16.536006 [INFO] web.service

2025/10/12 22:48:16.536028 [INFO] deregistering process: web
2025/10/12 22:48:16.536040 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 22:48:16.546752 [INFO] Running command: systemctl is-active web.service
2025/10/12 22:48:16.554512 [INFO] Running command: systemctl disable web.service
2025/10/12 22:48:16.925278 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/12 22:48:16.925372 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:48:17.187163 [INFO] Running command: systemctl reset-failed
2025/10/12 22:48:17.215622 [INFO] Running command: systemctl is-active web.service
2025/10/12 22:48:17.223126 [INFO] Process web has been fully terminated
2025/10/12 22:48:17.223148 [INFO] All processes have been fully terminated
2025/10/12 22:48:17.223151 [INFO] Removing /var/app/current/ if it exists
2025/10/12 22:48:17.224145 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 22:48:17.224164 [INFO] Register application processes...
2025/10/12 22:48:17.224168 [INFO] Registering the proc: web

2025/10/12 22:48:17.224175 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 22:48:17.235838 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:48:17.444018 [INFO] Running command: systemctl reset-failed
2025/10/12 22:48:17.451715 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 22:48:17.459712 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 22:48:17.675428 [INFO] Running command: systemctl start eb-app.target
2025/10/12 22:48:17.683281 [INFO] Running command: systemctl enable web.service
2025/10/12 22:48:17.954483 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 22:48:17.954515 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 22:48:17.965579 [INFO] Running command: systemctl is-active web.service
2025/10/12 22:48:17.973039 [INFO] Running command: systemctl start web.service
2025/10/12 22:48:18.060200 [INFO] Executing instruction: start X-Ray
2025/10/12 22:48:18.060231 [INFO] X-Ray is not enabled.
2025/10/12 22:48:18.060236 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 22:48:18.060257 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 22:48:18.086857 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 22:48:18.087175 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 22:48:18.091192 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 22:48:18.113535 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:48:18.591289 [INFO] Running command: systemctl reset-failed
2025/10/12 22:48:18.606014 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 22:48:18.627990 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 22:48:18.643291 [INFO] Running command: systemctl start nginx.service
2025/10/12 22:48:18.832411 [INFO] Executing instruction: configureSqsd
2025/10/12 22:48:18.832430 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 22:48:18.832435 [INFO] Executing instruction: startSqsd
2025/10/12 22:48:18.832438 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 22:48:18.832452 [INFO] Executing instruction: Track pids in healthd
2025/10/12 22:48:18.832456 [INFO] This is an enhanced health env...
2025/10/12 22:48:18.832468 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 22:48:18.849332 [INFO] cfn-hup.service nginx.service healthd.service

2025/10/12 22:48:18.849376 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 22:48:18.865440 [INFO] web.service

2025/10/12 22:48:18.865783 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/12 22:48:18.865805 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/12 22:48:18.865826 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/12 22:48:18.865829 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/12 22:48:18.865835 [INFO] Executing cleanup logic
2025/10/12 22:48:18.865924 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760309292731,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760309298865,"severity":"INFO"}]}]}

2025/10/12 22:48:18.866845 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 22:52:39.279464 [INFO] Starting...
2025/10/12 22:52:39.279510 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 22:52:39.279531 [INFO] reading event message file
2025/10/12 22:52:39.279860 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 22:52:39.349076 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 22:52:39.636151 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 22:52:39.923133 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 22:52:39.923145 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 22:52:39.923149 [INFO] Engine command: (app-deploy)

2025/10/12 22:52:39.923154 [INFO] Downloading EB Application...
2025/10/12 22:52:39.923160 [INFO] Region: us-east-1
2025/10/12 22:52:39.923162 [INFO] envID: e-r2hnd7bhig
2025/10/12 22:52:39.923165 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 22:52:39.923167 [INFO] accountID: 433676943793
2025/10/12 22:52:39.923169 [INFO] Using manifest file name from command request
2025/10/12 22:52:39.923174 [INFO] Manifest name is : manifest_1760309556839
2025/10/12 22:52:39.923176 [INFO] Download app version manifest
2025/10/12 22:52:39.923330 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760309556839, expected bucket owner: 433676943793
2025/10/12 22:52:39.959800 [INFO] Download successful111bytes downloaded
2025/10/12 22:52:39.959933 [INFO] Trying to read and parse version manifest...
2025/10/12 22:52:39.960001 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251013_095231000026, expected bucket owner: 433676943793
2025/10/12 22:52:39.979622 [INFO] Download successful24798bytes downloaded
2025/10/12 22:52:39.979950 [INFO] Executing instruction: ElectLeader
2025/10/12 22:52:39.979956 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 22:52:39.979959 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 22:52:39.979983 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 2ab07935-c383-4973-9e6c-0a2a2775150a --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 22:52:40.284900 [INFO] Instance is Leader.
2025/10/12 22:52:40.284940 [INFO] Executing instruction: stopSqsd
2025/10/12 22:52:40.284946 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 22:52:40.284950 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 22:52:40.284954 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 22:52:40.284969 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 22:52:40.591301 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 22:52:40.591325 [INFO] Executing instruction: StageApplication
2025/10/12 22:52:40.591328 [INFO] Recreating /var/app/staging/
2025/10/12 22:52:40.591432 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 22:52:40.591441 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 22:52:40.596524 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 22:52:40.597527 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 22:52:40.597548 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 22:52:40.597565 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 22:52:40.597568 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 22:52:40.597572 [INFO] Executing instruction: InstallDependency
2025/10/12 22:52:40.597576 [INFO] checking dependencies file
2025/10/12 22:52:40.597587 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 22:52:40.597595 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 22:52:41.427174 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Collecting supabase==2.8.1 (from -r requirements.txt (line 8))
  Downloading supabase-2.8.1-py3-none-any.whl.metadata (10 kB)
Collecting httpx==0.27.0 (from -r requirements.txt (line 9))
  Downloading httpx-0.27.0-py3-none-any.whl.metadata (7.2 kB)
Collecting postgrest==0.16.11 (from -r requirements.txt (line 10))
  Downloading postgrest-0.16.11-py3-none-any.whl.metadata (5.1 kB)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.14.0)
Requirement already satisfied: gotrue<3.0.0,>=2.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.8.1->-r requirements.txt (line 8)) (2.9.1)
INFO: pip is looking at multiple versions of supabase to determine which version is compatible with other requirements. This could take a while.
Collecting fastapi==0.104.1 (from -r requirements.txt (line 1))
  Using cached fastapi-0.104.1-py3-none-any.whl.metadata (24 kB)
Collecting python-dotenv==1.0.0 (from -r requirements.txt (line 5))
  Using cached python_dotenv-1.0.0-py3-none-any.whl.metadata (21 kB)
Collecting uvicorn==0.24.0 (from -r requirements.txt (line 2))
  Using cached uvicorn-0.24.0-py3-none-any.whl.metadata (6.4 kB)
Collecting pydantic==2.5.0 (from -r requirements.txt (line 3))
  Using cached pydantic-2.5.0-py3-none-any.whl.metadata (174 kB)

The conflict is caused by:
    The user requested postgrest==0.16.11
    supabase 2.8.1 depends on postgrest<0.18.0 and >=0.17.0

To fix this you could try to:
1. loosen the range of package versions you've specified
2. remove package versions to allow pip to attempt to solve the dependency conflict


2025/10/12 22:52:41.427204 [INFO] ERROR: Cannot install -r requirements.txt (line 8) and postgrest==0.16.11 because these package versions have conflicting dependencies.
ERROR: ResolutionImpossible: for help visit https://pip.pypa.io/en/latest/topics/dependency-resolution/#dealing-with-dependency-conflicts

2025/10/12 22:52:41.427217 [ERROR] An error occurred during execution of command [app-deploy] - [InstallDependency]. Stop running the command. Error: fail to install dependencies with requirements.txt file with error Command /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt failed with error exit status 1. Stderr:ERROR: Cannot install -r requirements.txt (line 8) and postgrest==0.16.11 because these package versions have conflicting dependencies.
ERROR: ResolutionImpossible: for help visit https://pip.pypa.io/en/latest/topics/dependency-resolution/#dealing-with-dependency-conflicts
 

2025/10/12 22:52:41.427221 [INFO] Executing cleanup logic
2025/10/12 22:52:41.427300 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment failed to install application dependencies. The deployment failed.","timestamp":1760309561427,"severity":"ERROR"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1760309561427,"severity":"ERROR"}]}]}

2025/10/12 22:52:41.428385 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 22:54:35.005425 [INFO] Starting...
2025/10/12 22:54:35.005489 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 22:54:35.005514 [INFO] reading event message file
2025/10/12 22:54:35.005860 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 22:54:35.073703 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 22:54:35.367660 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 22:54:35.654739 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 22:54:35.654751 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 22:54:35.654753 [INFO] Engine command: (app-deploy)

2025/10/12 22:54:35.654757 [INFO] Downloading EB Application...
2025/10/12 22:54:35.654759 [INFO] Region: us-east-1
2025/10/12 22:54:35.654761 [INFO] envID: e-r2hnd7bhig
2025/10/12 22:54:35.654763 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 22:54:35.654765 [INFO] accountID: 433676943793
2025/10/12 22:54:35.654768 [INFO] Using manifest file name from command request
2025/10/12 22:54:35.654773 [INFO] Manifest name is : manifest_1760309672644
2025/10/12 22:54:35.654776 [INFO] Download app version manifest
2025/10/12 22:54:35.655084 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760309672644, expected bucket owner: 433676943793
2025/10/12 22:54:35.689031 [INFO] Download successful111bytes downloaded
2025/10/12 22:54:35.689193 [INFO] Trying to read and parse version manifest...
2025/10/12 22:54:35.689262 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251013_095426562763, expected bucket owner: 433676943793
2025/10/12 22:54:35.708641 [INFO] Download successful24808bytes downloaded
2025/10/12 22:54:35.708908 [INFO] Executing instruction: ElectLeader
2025/10/12 22:54:35.708915 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 22:54:35.708918 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 22:54:35.709083 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 5c023f0b-8abd-496a-9dfa-15bb809bfa4e --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 22:54:36.012738 [INFO] Instance is Leader.
2025/10/12 22:54:36.012787 [INFO] Executing instruction: stopSqsd
2025/10/12 22:54:36.012799 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 22:54:36.012801 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 22:54:36.012804 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 22:54:36.012816 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 22:54:36.322458 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 22:54:36.322480 [INFO] Executing instruction: StageApplication
2025/10/12 22:54:36.322483 [INFO] Recreating /var/app/staging/
2025/10/12 22:54:36.323391 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 22:54:36.323405 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 22:54:36.328428 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 22:54:36.329442 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 22:54:36.329466 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 22:54:36.329487 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 22:54:36.329489 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 22:54:36.329494 [INFO] Executing instruction: InstallDependency
2025/10/12 22:54:36.329498 [INFO] checking dependencies file
2025/10/12 22:54:36.329510 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 22:54:36.329520 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 22:54:37.375455 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Collecting httpx==0.25.2 (from -r requirements.txt (line 8))
  Downloading httpx-0.25.2-py3-none-any.whl.metadata (6.9 kB)
Collecting supabase==2.4.4 (from -r requirements.txt (line 9))
  Downloading supabase-2.4.4-py3-none-any.whl.metadata (9.3 kB)
Collecting postgrest==0.14.0 (from -r requirements.txt (line 10))
  Downloading postgrest-0.14.0-py3-none-any.whl.metadata (5.1 kB)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.14.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (2025.10.5)
Collecting httpcore==1.* (from httpx==0.25.2->-r requirements.txt (line 8))
  Downloading httpcore-1.0.9-py3-none-any.whl.metadata (21 kB)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: gotrue<3.0,>=1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.4.4->-r requirements.txt (line 9)) (2.9.1)
Requirement already satisfied: realtime<2.0.0,>=1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.4.4->-r requirements.txt (line 9)) (1.0.6)
Requirement already satisfied: storage3<0.8.0,>=0.5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.4.4->-r requirements.txt (line 9)) (0.7.7)
Requirement already satisfied: supafunc<0.5.0,>=0.3.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.4.4->-r requirements.txt (line 9)) (0.3.3)
Requirement already satisfied: deprecation<3.0.0,>=2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from postgrest==0.14.0->-r requirements.txt (line 10)) (2.1.0)
Requirement already satisfied: strenum<0.5.0,>=0.4.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from postgrest==0.14.0->-r requirements.txt (line 10)) (0.4.15)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 13)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 13)) (4.67.1)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from deprecation<3.0.0,>=2.1.0->postgrest==0.14.0->-r requirements.txt (line 10)) (25.0)
Collecting h11>=0.8 (from uvicorn==0.24.0->-r requirements.txt (line 2))
  Using cached h11-0.16.0-py3-none-any.whl.metadata (8.3 kB)
Requirement already satisfied: h2<5,>=3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.4.4->-r requirements.txt (line 9)) (4.3.0)
Requirement already satisfied: hyperframe<7,>=6.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.4.4->-r requirements.txt (line 9)) (6.1.0)
Requirement already satisfied: hpack<5,>=4.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.4.4->-r requirements.txt (line 9)) (4.1.0)
Requirement already satisfied: python-dateutil<3.0.0,>=2.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from realtime<2.0.0,>=1.0.0->supabase==2.4.4->-r requirements.txt (line 9)) (2.9.0.post0)
Requirement already satisfied: websockets<13,>=11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from realtime<2.0.0,>=1.0.0->supabase==2.4.4->-r requirements.txt (line 9)) (12.0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.8.1->realtime<2.0.0,>=1.0.0->supabase==2.4.4->-r requirements.txt (line 9)) (1.17.0)
Downloading httpx-0.25.2-py3-none-any.whl (74 kB)
Downloading supabase-2.4.4-py3-none-any.whl (15 kB)
Downloading postgrest-0.14.0-py3-none-any.whl (19 kB)
Downloading httpcore-1.0.9-py3-none-any.whl (78 kB)
Downloading h11-0.16.0-py3-none-any.whl (37 kB)
Installing collected packages: h11, httpcore, httpx, postgrest, supabase
  Attempting uninstall: h11
    Found existing installation: h11 0.14.0
    Uninstalling h11-0.14.0:
      Successfully uninstalled h11-0.14.0
  Attempting uninstall: httpcore
    Found existing installation: httpcore 0.17.3
    Uninstalling httpcore-0.17.3:
      Successfully uninstalled httpcore-0.17.3
  Attempting uninstall: httpx
    Found existing installation: httpx 0.24.1
    Uninstalling httpx-0.24.1:
      Successfully uninstalled httpx-0.24.1
  Attempting uninstall: postgrest
    Found existing installation: postgrest 0.15.1
    Uninstalling postgrest-0.15.1:
      Successfully uninstalled postgrest-0.15.1
  Attempting uninstall: supabase
    Found existing installation: supabase 2.3.4
    Uninstalling supabase-2.3.4:
      Successfully uninstalled supabase-2.3.4

Successfully installed h11-0.16.0 httpcore-1.0.9 httpx-0.25.2 postgrest-0.14.0 supabase-2.4.4

2025/10/12 22:54:37.375516 [INFO] Executing instruction: check Procfile
2025/10/12 22:54:37.375554 [INFO] detected Procfile in application source bundle ...
2025/10/12 22:54:37.375560 [INFO] Executing instruction: configure X-Ray
2025/10/12 22:54:37.375564 [INFO] X-Ray is not enabled.
2025/10/12 22:54:37.375566 [INFO] Executing instruction: configure proxy server
2025/10/12 22:54:37.375581 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 22:54:37.384738 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 22:54:37.386975 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 22:54:37.426891 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/12 22:54:37.426918 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 22:54:37.436370 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 22:54:37.443309 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 22:54:37.451843 [INFO] Running command: systemctl stop healthd.service
2025/10/12 22:54:37.512011 [INFO] Running command: systemctl disable healthd.service
2025/10/12 22:54:37.772489 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/12 22:54:37.772652 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:54:38.095627 [INFO] Running command: systemctl reset-failed
2025/10/12 22:54:38.107220 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:54:38.325767 [INFO] Running command: systemctl reset-failed
2025/10/12 22:54:38.332884 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 22:54:38.340556 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 22:54:38.594831 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 22:54:38.603661 [INFO] Running command: systemctl enable healthd.service
2025/10/12 22:54:38.876571 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 22:54:38.876601 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 22:54:38.886959 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 22:54:38.894393 [INFO] Running command: systemctl start healthd.service
2025/10/12 22:54:38.993197 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 22:54:38.994406 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 22:54:38.995649 [INFO] Executing instruction: configure log streaming
2025/10/12 22:54:38.995675 [INFO] log streaming is not enabled
2025/10/12 22:54:38.995678 [INFO] disable log stream
2025/10/12 22:54:38.995688 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 22:54:39.009031 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 22:54:39.020443 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 22:54:39.020461 [INFO] Checking if logs need forced rotation
2025/10/12 22:54:39.020475 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 22:54:39.318297 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 22:54:39.622594 [INFO] Generating rsyslog config from Procfile
2025/10/12 22:54:39.624785 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 22:54:39.867356 [INFO] Executing instruction: PostBuildEbExtension
2025/10/12 22:54:39.867385 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/12 22:54:39.867395 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/12 22:54:40.172163 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/12 22:54:40.172187 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 22:54:40.172284 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 22:54:40.172288 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/12 22:54:40.172302 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/12 22:54:40.172317 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/12 22:54:40.172319 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/12 22:54:40.172323 [INFO] Executing instruction: stop X-Ray
2025/10/12 22:54:40.172326 [INFO] stop X-Ray ...
2025/10/12 22:54:40.172335 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 22:54:40.184980 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 22:54:40.185008 [INFO] Running command: systemctl stop xray.service
2025/10/12 22:54:40.197019 [INFO] Executing instruction: stop proxy
2025/10/12 22:54:40.197045 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 22:54:40.209706 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 22:54:40.209734 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 22:54:40.221482 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 22:54:40.228617 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 22:54:40.237184 [INFO] Running command: systemctl stop nginx.service
2025/10/12 22:54:40.466555 [INFO] Running command: systemctl disable nginx.service
2025/10/12 22:54:40.755186 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:54:41.034097 [INFO] Running command: systemctl reset-failed
2025/10/12 22:54:41.042548 [INFO] Executing instruction: FlipApplication
2025/10/12 22:54:41.042573 [INFO] Fetching environment variables...
2025/10/12 22:54:41.042759 [INFO] Purge old process...
2025/10/12 22:54:41.042782 [INFO] Running command: systemctl stop eb-app.target
2025/10/12 22:54:41.052395 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 22:54:41.062974 [INFO] web.service

2025/10/12 22:54:41.062997 [INFO] deregistering process: web
2025/10/12 22:54:41.063007 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 22:54:41.073706 [INFO] Running command: systemctl is-active web.service
2025/10/12 22:54:41.081239 [INFO] Running command: systemctl disable web.service
2025/10/12 22:54:41.452324 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/12 22:54:41.452411 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:54:41.722987 [INFO] Running command: systemctl reset-failed
2025/10/12 22:54:41.755233 [INFO] Running command: systemctl is-active web.service
2025/10/12 22:54:41.762634 [INFO] Process web has been fully terminated
2025/10/12 22:54:41.762656 [INFO] All processes have been fully terminated
2025/10/12 22:54:41.762660 [INFO] Removing /var/app/current/ if it exists
2025/10/12 22:54:41.763691 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 22:54:41.763713 [INFO] Register application processes...
2025/10/12 22:54:41.763717 [INFO] Registering the proc: web

2025/10/12 22:54:41.763725 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 22:54:41.775551 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:54:42.044278 [INFO] Running command: systemctl reset-failed
2025/10/12 22:54:42.051880 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 22:54:42.059775 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 22:54:42.334105 [INFO] Running command: systemctl start eb-app.target
2025/10/12 22:54:42.343426 [INFO] Running command: systemctl enable web.service
2025/10/12 22:54:42.601236 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 22:54:42.601271 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 22:54:42.612330 [INFO] Running command: systemctl is-active web.service
2025/10/12 22:54:42.620002 [INFO] Running command: systemctl start web.service
2025/10/12 22:54:42.666039 [INFO] Executing instruction: start X-Ray
2025/10/12 22:54:42.666057 [INFO] X-Ray is not enabled.
2025/10/12 22:54:42.666060 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 22:54:42.666077 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 22:54:42.683604 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 22:54:42.683829 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 22:54:42.686532 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 22:54:42.703486 [INFO] Running command: systemctl daemon-reload
2025/10/12 22:54:43.152715 [INFO] Running command: systemctl reset-failed
2025/10/12 22:54:43.164950 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 22:54:43.186963 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 22:54:43.203019 [INFO] Running command: systemctl start nginx.service
2025/10/12 22:54:43.372057 [INFO] Executing instruction: configureSqsd
2025/10/12 22:54:43.372079 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 22:54:43.372084 [INFO] Executing instruction: startSqsd
2025/10/12 22:54:43.372087 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 22:54:43.372091 [INFO] Executing instruction: Track pids in healthd
2025/10/12 22:54:43.372095 [INFO] This is an enhanced health env...
2025/10/12 22:54:43.372107 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 22:54:43.388127 [INFO] nginx.service cfn-hup.service healthd.service

2025/10/12 22:54:43.388162 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 22:54:43.404519 [INFO] web.service

2025/10/12 22:54:43.404765 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/12 22:54:43.404785 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/12 22:54:43.404809 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/12 22:54:43.404818 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/12 22:54:43.404825 [INFO] Executing cleanup logic
2025/10/12 22:54:43.404920 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760309677375,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760309683404,"severity":"INFO"}]}]}

2025/10/12 22:54:43.405991 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 23:01:47.112467 [INFO] Starting...
2025/10/12 23:01:47.112515 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 23:01:47.112535 [INFO] reading event message file
2025/10/12 23:01:47.112851 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 23:01:47.182820 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 23:01:47.468050 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 23:01:47.793659 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 23:01:47.793675 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 23:01:47.793679 [INFO] Engine command: (app-deploy)

2025/10/12 23:01:47.793684 [INFO] Downloading EB Application...
2025/10/12 23:01:47.793688 [INFO] Region: us-east-1
2025/10/12 23:01:47.793690 [INFO] envID: e-r2hnd7bhig
2025/10/12 23:01:47.793692 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 23:01:47.793694 [INFO] accountID: 433676943793
2025/10/12 23:01:47.793697 [INFO] Using manifest file name from command request
2025/10/12 23:01:47.793703 [INFO] Manifest name is : manifest_1760310104466
2025/10/12 23:01:47.793705 [INFO] Download app version manifest
2025/10/12 23:01:47.793892 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760310104466, expected bucket owner: 433676943793
2025/10/12 23:01:47.829970 [INFO] Download successful111bytes downloaded
2025/10/12 23:01:47.830099 [INFO] Trying to read and parse version manifest...
2025/10/12 23:01:47.830164 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251013_100138336944, expected bucket owner: 433676943793
2025/10/12 23:01:47.848642 [INFO] Download successful25215bytes downloaded
2025/10/12 23:01:47.848893 [INFO] Executing instruction: ElectLeader
2025/10/12 23:01:47.848899 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 23:01:47.848901 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 23:01:47.848912 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id a6338d25-1f3d-4b51-b652-e599bf86412d --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 23:01:48.136966 [INFO] Instance is Leader.
2025/10/12 23:01:48.137025 [INFO] Executing instruction: stopSqsd
2025/10/12 23:01:48.137030 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 23:01:48.137034 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 23:01:48.137039 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 23:01:48.137052 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 23:01:48.441582 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 23:01:48.441606 [INFO] Executing instruction: StageApplication
2025/10/12 23:01:48.441609 [INFO] Recreating /var/app/staging/
2025/10/12 23:01:48.441720 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 23:01:48.441738 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 23:01:48.446513 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 23:01:48.447517 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 23:01:48.447538 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 23:01:48.447554 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 23:01:48.447556 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 23:01:48.447561 [INFO] Executing instruction: InstallDependency
2025/10/12 23:01:48.447565 [INFO] checking dependencies file
2025/10/12 23:01:48.447575 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 23:01:48.447584 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 23:01:48.949483 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.25.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.25.2)
Requirement already satisfied: supabase==2.4.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (2.4.4)
Requirement already satisfied: postgrest==0.14.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (0.14.0)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.16.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.0.9)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.25.2->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: gotrue<3.0,>=1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.4.4->-r requirements.txt (line 9)) (2.9.1)
Requirement already satisfied: realtime<2.0.0,>=1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.4.4->-r requirements.txt (line 9)) (1.0.6)
Requirement already satisfied: storage3<0.8.0,>=0.5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.4.4->-r requirements.txt (line 9)) (0.7.7)
Requirement already satisfied: supafunc<0.5.0,>=0.3.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from supabase==2.4.4->-r requirements.txt (line 9)) (0.3.3)
Requirement already satisfied: deprecation<3.0.0,>=2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from postgrest==0.14.0->-r requirements.txt (line 10)) (2.1.0)
Requirement already satisfied: strenum<0.5.0,>=0.4.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from postgrest==0.14.0->-r requirements.txt (line 10)) (0.4.15)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 13)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 13)) (4.67.1)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from deprecation<3.0.0,>=2.1.0->postgrest==0.14.0->-r requirements.txt (line 10)) (25.0)
Requirement already satisfied: h2<5,>=3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.4.4->-r requirements.txt (line 9)) (4.3.0)
Requirement already satisfied: hyperframe<7,>=6.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.4.4->-r requirements.txt (line 9)) (6.1.0)
Requirement already satisfied: hpack<5,>=4.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from h2<5,>=3->httpx[http2]<0.28,>=0.24->gotrue<3.0,>=1.3->supabase==2.4.4->-r requirements.txt (line 9)) (4.1.0)
Requirement already satisfied: python-dateutil<3.0.0,>=2.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from realtime<2.0.0,>=1.0.0->supabase==2.4.4->-r requirements.txt (line 9)) (2.9.0.post0)
Requirement already satisfied: websockets<13,>=11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from realtime<2.0.0,>=1.0.0->supabase==2.4.4->-r requirements.txt (line 9)) (12.0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.8.1->realtime<2.0.0,>=1.0.0->supabase==2.4.4->-r requirements.txt (line 9)) (1.17.0)

2025/10/12 23:01:48.949521 [INFO] Executing instruction: check Procfile
2025/10/12 23:01:48.949566 [INFO] detected Procfile in application source bundle ...
2025/10/12 23:01:48.949573 [INFO] Executing instruction: configure X-Ray
2025/10/12 23:01:48.949579 [INFO] X-Ray is not enabled.
2025/10/12 23:01:48.949582 [INFO] Executing instruction: configure proxy server
2025/10/12 23:01:48.949601 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 23:01:48.958692 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 23:01:48.960726 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 23:01:48.972609 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/12 23:01:48.972641 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 23:01:48.981843 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 23:01:48.989712 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 23:01:48.998670 [INFO] Running command: systemctl stop healthd.service
2025/10/12 23:01:49.091953 [INFO] Running command: systemctl disable healthd.service
2025/10/12 23:01:49.438394 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/12 23:01:49.438591 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:01:49.717528 [INFO] Running command: systemctl reset-failed
2025/10/12 23:01:49.728236 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:01:49.989450 [INFO] Running command: systemctl reset-failed
2025/10/12 23:01:49.996938 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 23:01:50.005900 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 23:01:50.275193 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 23:01:50.284205 [INFO] Running command: systemctl enable healthd.service
2025/10/12 23:01:50.556047 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 23:01:50.556078 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 23:01:50.567054 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 23:01:50.574525 [INFO] Running command: systemctl start healthd.service
2025/10/12 23:01:50.668792 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 23:01:50.670063 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 23:01:50.671228 [INFO] Executing instruction: configure log streaming
2025/10/12 23:01:50.671241 [INFO] log streaming is not enabled
2025/10/12 23:01:50.671244 [INFO] disable log stream
2025/10/12 23:01:50.671258 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 23:01:50.690363 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 23:01:50.710513 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 23:01:50.710538 [INFO] Checking if logs need forced rotation
2025/10/12 23:01:50.710554 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 23:01:51.151933 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 23:01:51.524221 [INFO] Generating rsyslog config from Procfile
2025/10/12 23:01:51.526611 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 23:01:51.686919 [INFO] Executing instruction: PostBuildEbExtension
2025/10/12 23:01:51.686955 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/12 23:01:51.686967 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/12 23:01:52.002656 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/12 23:01:52.002721 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 23:01:52.002816 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 23:01:52.002820 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/12 23:01:52.002834 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/12 23:01:52.002850 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/12 23:01:52.002852 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/12 23:01:52.002857 [INFO] Executing instruction: stop X-Ray
2025/10/12 23:01:52.002859 [INFO] stop X-Ray ...
2025/10/12 23:01:52.002868 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 23:01:52.017073 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 23:01:52.017107 [INFO] Running command: systemctl stop xray.service
2025/10/12 23:01:52.032792 [INFO] Executing instruction: stop proxy
2025/10/12 23:01:52.032838 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 23:01:52.046888 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 23:01:52.046921 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 23:01:52.058900 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 23:01:52.067243 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 23:01:52.077047 [INFO] Running command: systemctl stop nginx.service
2025/10/12 23:01:52.277161 [INFO] Running command: systemctl disable nginx.service
2025/10/12 23:01:52.549199 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:01:52.837333 [INFO] Running command: systemctl reset-failed
2025/10/12 23:01:52.845693 [INFO] Executing instruction: FlipApplication
2025/10/12 23:01:52.845715 [INFO] Fetching environment variables...
2025/10/12 23:01:52.845899 [INFO] Purge old process...
2025/10/12 23:01:52.845921 [INFO] Running command: systemctl stop eb-app.target
2025/10/12 23:01:52.854747 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 23:01:52.864925 [INFO] web.service

2025/10/12 23:01:52.864946 [INFO] deregistering process: web
2025/10/12 23:01:52.864956 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 23:01:52.875001 [INFO] Running command: systemctl is-active web.service
2025/10/12 23:01:52.883225 [INFO] Running command: systemctl disable web.service
2025/10/12 23:01:53.242672 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/12 23:01:53.242757 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:01:53.523318 [INFO] Running command: systemctl reset-failed
2025/10/12 23:01:53.555975 [INFO] Running command: systemctl is-active web.service
2025/10/12 23:01:53.564134 [INFO] Process web has been fully terminated
2025/10/12 23:01:53.564159 [INFO] All processes have been fully terminated
2025/10/12 23:01:53.564164 [INFO] Removing /var/app/current/ if it exists
2025/10/12 23:01:53.565182 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 23:01:53.565203 [INFO] Register application processes...
2025/10/12 23:01:53.565206 [INFO] Registering the proc: web

2025/10/12 23:01:53.565214 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 23:01:53.577105 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:01:53.788774 [INFO] Running command: systemctl reset-failed
2025/10/12 23:01:53.797008 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 23:01:53.804529 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 23:01:54.074325 [INFO] Running command: systemctl start eb-app.target
2025/10/12 23:01:54.084048 [INFO] Running command: systemctl enable web.service
2025/10/12 23:01:54.345582 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 23:01:54.345610 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 23:01:54.356046 [INFO] Running command: systemctl is-active web.service
2025/10/12 23:01:54.364779 [INFO] Running command: systemctl start web.service
2025/10/12 23:01:54.440226 [INFO] Executing instruction: start X-Ray
2025/10/12 23:01:54.440247 [INFO] X-Ray is not enabled.
2025/10/12 23:01:54.440253 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 23:01:54.440277 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 23:01:54.467855 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 23:01:54.468181 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 23:01:54.472828 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 23:01:54.496182 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:01:54.963688 [INFO] Running command: systemctl reset-failed
2025/10/12 23:01:54.975964 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 23:01:54.997082 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 23:01:55.012368 [INFO] Running command: systemctl start nginx.service
2025/10/12 23:01:55.155941 [INFO] Executing instruction: configureSqsd
2025/10/12 23:01:55.155965 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 23:01:55.155969 [INFO] Executing instruction: startSqsd
2025/10/12 23:01:55.155972 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 23:01:55.155976 [INFO] Executing instruction: Track pids in healthd
2025/10/12 23:01:55.155979 [INFO] This is an enhanced health env...
2025/10/12 23:01:55.155993 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 23:01:55.173217 [INFO] cfn-hup.service nginx.service healthd.service

2025/10/12 23:01:55.173277 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 23:01:55.188381 [INFO] web.service

2025/10/12 23:01:55.188735 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/12 23:01:55.188756 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/12 23:01:55.188788 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/12 23:01:55.188792 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/12 23:01:55.188799 [INFO] Executing cleanup logic
2025/10/12 23:01:55.188899 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760310108949,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760310115188,"severity":"INFO"}]}]}

2025/10/12 23:01:55.190036 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 23:04:27.424382 [INFO] Starting...
2025/10/12 23:04:27.424436 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 23:04:27.424461 [INFO] reading event message file
2025/10/12 23:04:27.424829 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 23:04:27.488687 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 23:04:27.780113 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 23:04:28.067559 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 23:04:28.067580 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 23:04:28.067584 [INFO] Engine command: (app-deploy)

2025/10/12 23:04:28.067589 [INFO] Downloading EB Application...
2025/10/12 23:04:28.067592 [INFO] Region: us-east-1
2025/10/12 23:04:28.067595 [INFO] envID: e-r2hnd7bhig
2025/10/12 23:04:28.067598 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 23:04:28.067600 [INFO] accountID: 433676943793
2025/10/12 23:04:28.067603 [INFO] Using manifest file name from command request
2025/10/12 23:04:28.067608 [INFO] Manifest name is : manifest_1760310264919
2025/10/12 23:04:28.067610 [INFO] Download app version manifest
2025/10/12 23:04:28.067792 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760310264919, expected bucket owner: 433676943793
2025/10/12 23:04:28.106794 [INFO] Download successful111bytes downloaded
2025/10/12 23:04:28.106923 [INFO] Trying to read and parse version manifest...
2025/10/12 23:04:28.106993 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251013_100418407864, expected bucket owner: 433676943793
2025/10/12 23:04:28.126887 [INFO] Download successful25630bytes downloaded
2025/10/12 23:04:28.127130 [INFO] Executing instruction: ElectLeader
2025/10/12 23:04:28.127135 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 23:04:28.127138 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 23:04:28.127149 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id bc74e006-4e4e-4a5b-a1d8-6139b32a6fec --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 23:04:28.418452 [INFO] Instance is Leader.
2025/10/12 23:04:28.418500 [INFO] Executing instruction: stopSqsd
2025/10/12 23:04:28.418505 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 23:04:28.418508 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 23:04:28.418510 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 23:04:28.418523 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 23:04:28.728556 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 23:04:28.728579 [INFO] Executing instruction: StageApplication
2025/10/12 23:04:28.728582 [INFO] Recreating /var/app/staging/
2025/10/12 23:04:28.728695 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 23:04:28.728705 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 23:04:28.733810 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 23:04:28.734750 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 23:04:28.734768 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 23:04:28.734784 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 23:04:28.734787 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 23:04:28.734791 [INFO] Executing instruction: InstallDependency
2025/10/12 23:04:28.734796 [INFO] checking dependencies file
2025/10/12 23:04:28.734806 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 23:04:28.734817 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 23:04:29.530465 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Collecting httpx==0.24.1 (from -r requirements.txt (line 8))
  Using cached httpx-0.24.1-py3-none-any.whl.metadata (7.4 kB)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.16.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (2025.10.5)
Collecting httpcore<0.18.0,>=0.15.0 (from httpx==0.24.1->-r requirements.txt (line 8))
  Using cached httpcore-0.17.3-py3-none-any.whl.metadata (18 kB)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (4.67.1)
Collecting h11>=0.8 (from uvicorn==0.24.0->-r requirements.txt (line 2))
  Using cached h11-0.14.0-py3-none-any.whl.metadata (8.2 kB)
Using cached httpx-0.24.1-py3-none-any.whl (75 kB)
Using cached httpcore-0.17.3-py3-none-any.whl (74 kB)
Using cached h11-0.14.0-py3-none-any.whl (58 kB)
Installing collected packages: h11, httpcore, httpx
  Attempting uninstall: h11
    Found existing installation: h11 0.16.0
    Uninstalling h11-0.16.0:
      Successfully uninstalled h11-0.16.0
  Attempting uninstall: httpcore
    Found existing installation: httpcore 1.0.9
    Uninstalling httpcore-1.0.9:
      Successfully uninstalled httpcore-1.0.9
  Attempting uninstall: httpx
    Found existing installation: httpx 0.25.2
    Uninstalling httpx-0.25.2:
      Successfully uninstalled httpx-0.25.2

Successfully installed h11-0.14.0 httpcore-0.17.3 httpx-0.24.1

2025/10/12 23:04:29.530506 [INFO] Executing instruction: check Procfile
2025/10/12 23:04:29.530546 [INFO] detected Procfile in application source bundle ...
2025/10/12 23:04:29.530552 [INFO] Executing instruction: configure X-Ray
2025/10/12 23:04:29.530556 [INFO] X-Ray is not enabled.
2025/10/12 23:04:29.530558 [INFO] Executing instruction: configure proxy server
2025/10/12 23:04:29.530574 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 23:04:29.539623 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 23:04:29.541778 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 23:04:29.585795 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/12 23:04:29.585825 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 23:04:29.596972 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 23:04:29.604498 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 23:04:29.613594 [INFO] Running command: systemctl stop healthd.service
2025/10/12 23:04:29.662628 [INFO] Running command: systemctl disable healthd.service
2025/10/12 23:04:29.927743 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/12 23:04:29.927806 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:04:30.214712 [INFO] Running command: systemctl reset-failed
2025/10/12 23:04:30.225120 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:04:30.544778 [INFO] Running command: systemctl reset-failed
2025/10/12 23:04:30.553809 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 23:04:30.561700 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 23:04:30.796522 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 23:04:30.805362 [INFO] Running command: systemctl enable healthd.service
2025/10/12 23:04:31.052405 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 23:04:31.052443 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 23:04:31.063564 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 23:04:31.071304 [INFO] Running command: systemctl start healthd.service
2025/10/12 23:04:31.114123 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 23:04:31.115386 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 23:04:31.116593 [INFO] Executing instruction: configure log streaming
2025/10/12 23:04:31.116604 [INFO] log streaming is not enabled
2025/10/12 23:04:31.116608 [INFO] disable log stream
2025/10/12 23:04:31.116622 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 23:04:31.133377 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 23:04:31.152812 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 23:04:31.152838 [INFO] Checking if logs need forced rotation
2025/10/12 23:04:31.152861 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 23:04:31.586853 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 23:04:31.976203 [INFO] Generating rsyslog config from Procfile
2025/10/12 23:04:31.978519 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 23:04:32.357883 [INFO] Executing instruction: PostBuildEbExtension
2025/10/12 23:04:32.357911 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/12 23:04:32.357922 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/12 23:04:32.689001 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/12 23:04:32.689037 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 23:04:32.689137 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 23:04:32.689141 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/12 23:04:32.689154 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/12 23:04:32.689168 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/12 23:04:32.689171 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/12 23:04:32.689175 [INFO] Executing instruction: stop X-Ray
2025/10/12 23:04:32.689177 [INFO] stop X-Ray ...
2025/10/12 23:04:32.689186 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 23:04:32.700794 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 23:04:32.700815 [INFO] Running command: systemctl stop xray.service
2025/10/12 23:04:32.713646 [INFO] Executing instruction: stop proxy
2025/10/12 23:04:32.713673 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 23:04:32.726183 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 23:04:32.726212 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 23:04:32.737810 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 23:04:32.745025 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 23:04:32.753728 [INFO] Running command: systemctl stop nginx.service
2025/10/12 23:04:32.926499 [INFO] Running command: systemctl disable nginx.service
2025/10/12 23:04:33.167379 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:04:33.447226 [INFO] Running command: systemctl reset-failed
2025/10/12 23:04:33.455686 [INFO] Executing instruction: FlipApplication
2025/10/12 23:04:33.455709 [INFO] Fetching environment variables...
2025/10/12 23:04:33.455923 [INFO] Purge old process...
2025/10/12 23:04:33.455943 [INFO] Running command: systemctl stop eb-app.target
2025/10/12 23:04:33.465189 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 23:04:33.475162 [INFO] web.service

2025/10/12 23:04:33.475187 [INFO] deregistering process: web
2025/10/12 23:04:33.475199 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 23:04:33.485682 [INFO] Running command: systemctl is-active web.service
2025/10/12 23:04:33.493015 [INFO] Running command: systemctl disable web.service
2025/10/12 23:04:33.783109 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/12 23:04:33.783174 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:04:34.150458 [INFO] Running command: systemctl reset-failed
2025/10/12 23:04:34.158348 [INFO] Running command: systemctl is-active web.service
2025/10/12 23:04:34.165946 [INFO] Process web has been fully terminated
2025/10/12 23:04:34.165971 [INFO] All processes have been fully terminated
2025/10/12 23:04:34.165975 [INFO] Removing /var/app/current/ if it exists
2025/10/12 23:04:34.166780 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 23:04:34.166801 [INFO] Register application processes...
2025/10/12 23:04:34.166805 [INFO] Registering the proc: web

2025/10/12 23:04:34.166812 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 23:04:34.178771 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:04:34.463287 [INFO] Running command: systemctl reset-failed
2025/10/12 23:04:34.472174 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 23:04:34.479986 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 23:04:34.766178 [INFO] Running command: systemctl start eb-app.target
2025/10/12 23:04:34.775470 [INFO] Running command: systemctl enable web.service
2025/10/12 23:04:35.062725 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 23:04:35.062757 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 23:04:35.074534 [INFO] Running command: systemctl is-active web.service
2025/10/12 23:04:35.082274 [INFO] Running command: systemctl start web.service
2025/10/12 23:04:35.179437 [INFO] Executing instruction: start X-Ray
2025/10/12 23:04:35.179461 [INFO] X-Ray is not enabled.
2025/10/12 23:04:35.179466 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 23:04:35.179489 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 23:04:35.207003 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 23:04:35.207375 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 23:04:35.212255 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 23:04:35.234835 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:04:35.672956 [INFO] Running command: systemctl reset-failed
2025/10/12 23:04:35.688419 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 23:04:35.707917 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 23:04:35.722284 [INFO] Running command: systemctl start nginx.service
2025/10/12 23:04:35.874517 [INFO] Executing instruction: configureSqsd
2025/10/12 23:04:35.874536 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 23:04:35.874540 [INFO] Executing instruction: startSqsd
2025/10/12 23:04:35.874543 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 23:04:35.874546 [INFO] Executing instruction: Track pids in healthd
2025/10/12 23:04:35.874550 [INFO] This is an enhanced health env...
2025/10/12 23:04:35.874563 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 23:04:35.890940 [INFO] nginx.service cfn-hup.service healthd.service

2025/10/12 23:04:35.890975 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 23:04:35.907735 [INFO] web.service

2025/10/12 23:04:35.908179 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/12 23:04:35.908202 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/12 23:04:35.908224 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/12 23:04:35.908228 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/12 23:04:35.908235 [INFO] Executing cleanup logic
2025/10/12 23:04:35.908338 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760310269530,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760310275908,"severity":"INFO"}]}]}

2025/10/12 23:04:35.909512 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 23:08:03.166043 [INFO] Starting...
2025/10/12 23:08:03.166088 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 23:08:03.166110 [INFO] reading event message file
2025/10/12 23:08:03.166427 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 23:08:03.276410 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 23:08:03.592923 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 23:08:03.880893 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 23:08:03.880905 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 23:08:03.880908 [INFO] Engine command: (app-deploy)

2025/10/12 23:08:03.880911 [INFO] Downloading EB Application...
2025/10/12 23:08:03.880913 [INFO] Region: us-east-1
2025/10/12 23:08:03.880915 [INFO] envID: e-r2hnd7bhig
2025/10/12 23:08:03.880917 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 23:08:03.880919 [INFO] accountID: 433676943793
2025/10/12 23:08:03.880922 [INFO] Using manifest file name from command request
2025/10/12 23:08:03.880927 [INFO] Manifest name is : manifest_1760310480766
2025/10/12 23:08:03.880929 [INFO] Download app version manifest
2025/10/12 23:08:03.881099 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760310480766, expected bucket owner: 433676943793
2025/10/12 23:08:03.918788 [INFO] Download successful111bytes downloaded
2025/10/12 23:08:03.918918 [INFO] Trying to read and parse version manifest...
2025/10/12 23:08:03.918987 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251013_100754820430, expected bucket owner: 433676943793
2025/10/12 23:08:03.948200 [INFO] Download successful25810bytes downloaded
2025/10/12 23:08:03.949255 [INFO] Executing instruction: ElectLeader
2025/10/12 23:08:03.949802 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 23:08:03.949883 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 23:08:03.949975 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id ee2a5b2d-bfab-4523-8d4c-3cb109d02451 --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 23:08:04.248336 [INFO] Instance is Leader.
2025/10/12 23:08:04.248379 [INFO] Executing instruction: stopSqsd
2025/10/12 23:08:04.248383 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 23:08:04.248386 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 23:08:04.248389 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 23:08:04.248401 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 23:08:04.557594 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 23:08:04.557649 [INFO] Executing instruction: StageApplication
2025/10/12 23:08:04.557652 [INFO] Recreating /var/app/staging/
2025/10/12 23:08:04.557753 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 23:08:04.557762 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 23:08:04.562889 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 23:08:04.563822 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 23:08:04.563843 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 23:08:04.563860 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 23:08:04.563862 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 23:08:04.563870 [INFO] Executing instruction: InstallDependency
2025/10/12 23:08:04.563874 [INFO] checking dependencies file
2025/10/12 23:08:04.563884 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 23:08:04.563893 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 23:08:05.028174 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.24.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.24.1)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.14.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore<0.18.0,>=0.15.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (0.17.3)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (4.67.1)

2025/10/12 23:08:05.028204 [INFO] Executing instruction: check Procfile
2025/10/12 23:08:05.028251 [INFO] detected Procfile in application source bundle ...
2025/10/12 23:08:05.028265 [INFO] Executing instruction: configure X-Ray
2025/10/12 23:08:05.028269 [INFO] X-Ray is not enabled.
2025/10/12 23:08:05.028272 [INFO] Executing instruction: configure proxy server
2025/10/12 23:08:05.028287 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 23:08:05.037496 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 23:08:05.039650 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 23:08:05.051216 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/12 23:08:05.051249 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 23:08:05.060284 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 23:08:05.068639 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 23:08:05.078760 [INFO] Running command: systemctl stop healthd.service
2025/10/12 23:08:05.202518 [INFO] Running command: systemctl disable healthd.service
2025/10/12 23:08:05.488153 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/12 23:08:05.488230 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:08:05.765830 [INFO] Running command: systemctl reset-failed
2025/10/12 23:08:05.777123 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:08:06.054526 [INFO] Running command: systemctl reset-failed
2025/10/12 23:08:06.063718 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 23:08:06.071667 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 23:08:06.365971 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 23:08:06.373905 [INFO] Running command: systemctl enable healthd.service
2025/10/12 23:08:06.657146 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 23:08:06.657179 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 23:08:06.668306 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 23:08:06.675901 [INFO] Running command: systemctl start healthd.service
2025/10/12 23:08:06.748812 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 23:08:06.750556 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 23:08:06.751741 [INFO] Executing instruction: configure log streaming
2025/10/12 23:08:06.751752 [INFO] log streaming is not enabled
2025/10/12 23:08:06.751756 [INFO] disable log stream
2025/10/12 23:08:06.751770 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 23:08:06.771045 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 23:08:06.790676 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 23:08:06.790703 [INFO] Checking if logs need forced rotation
2025/10/12 23:08:06.790733 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 23:08:07.230760 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 23:08:07.623579 [INFO] Generating rsyslog config from Procfile
2025/10/12 23:08:07.625771 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 23:08:07.838912 [INFO] Executing instruction: PostBuildEbExtension
2025/10/12 23:08:07.838945 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/12 23:08:07.838960 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/12 23:08:08.157024 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/12 23:08:08.157051 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 23:08:08.157152 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 23:08:08.157156 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/12 23:08:08.157170 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/12 23:08:08.157185 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/12 23:08:08.157187 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/12 23:08:08.157192 [INFO] Executing instruction: stop X-Ray
2025/10/12 23:08:08.157194 [INFO] stop X-Ray ...
2025/10/12 23:08:08.157206 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 23:08:08.170546 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 23:08:08.170579 [INFO] Running command: systemctl stop xray.service
2025/10/12 23:08:08.185034 [INFO] Executing instruction: stop proxy
2025/10/12 23:08:08.185067 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 23:08:08.199189 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 23:08:08.199220 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 23:08:08.210714 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 23:08:08.218377 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 23:08:08.227213 [INFO] Running command: systemctl stop nginx.service
2025/10/12 23:08:08.465565 [INFO] Running command: systemctl disable nginx.service
2025/10/12 23:08:08.747281 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:08:09.027963 [INFO] Running command: systemctl reset-failed
2025/10/12 23:08:09.036185 [INFO] Executing instruction: FlipApplication
2025/10/12 23:08:09.036208 [INFO] Fetching environment variables...
2025/10/12 23:08:09.036398 [INFO] Purge old process...
2025/10/12 23:08:09.036421 [INFO] Running command: systemctl stop eb-app.target
2025/10/12 23:08:09.045563 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 23:08:09.056198 [INFO] web.service

2025/10/12 23:08:09.056222 [INFO] deregistering process: web
2025/10/12 23:08:09.056232 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 23:08:09.066780 [INFO] Running command: systemctl is-active web.service
2025/10/12 23:08:09.075018 [INFO] Running command: systemctl disable web.service
2025/10/12 23:08:09.443540 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/12 23:08:09.443616 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:08:09.843642 [INFO] Running command: systemctl reset-failed
2025/10/12 23:08:09.852149 [INFO] Running command: systemctl is-active web.service
2025/10/12 23:08:09.860397 [INFO] Process web has been fully terminated
2025/10/12 23:08:09.860455 [INFO] All processes have been fully terminated
2025/10/12 23:08:09.860460 [INFO] Removing /var/app/current/ if it exists
2025/10/12 23:08:09.861667 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 23:08:09.861690 [INFO] Register application processes...
2025/10/12 23:08:09.861694 [INFO] Registering the proc: web

2025/10/12 23:08:09.861702 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 23:08:09.873462 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:08:10.133532 [INFO] Running command: systemctl reset-failed
2025/10/12 23:08:10.141812 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 23:08:10.149816 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 23:08:10.425745 [INFO] Running command: systemctl start eb-app.target
2025/10/12 23:08:10.435441 [INFO] Running command: systemctl enable web.service
2025/10/12 23:08:10.716576 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 23:08:10.716615 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 23:08:10.727833 [INFO] Running command: systemctl is-active web.service
2025/10/12 23:08:10.735354 [INFO] Running command: systemctl start web.service
2025/10/12 23:08:10.805013 [INFO] Executing instruction: start X-Ray
2025/10/12 23:08:10.805032 [INFO] X-Ray is not enabled.
2025/10/12 23:08:10.805035 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 23:08:10.805053 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 23:08:10.827630 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 23:08:10.827894 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 23:08:10.830985 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 23:08:10.846950 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:08:11.137220 [INFO] Running command: systemctl reset-failed
2025/10/12 23:08:11.150716 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 23:08:11.172079 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 23:08:11.187814 [INFO] Running command: systemctl start nginx.service
2025/10/12 23:08:11.354299 [INFO] Executing instruction: configureSqsd
2025/10/12 23:08:11.354318 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 23:08:11.354322 [INFO] Executing instruction: startSqsd
2025/10/12 23:08:11.354326 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 23:08:11.354329 [INFO] Executing instruction: Track pids in healthd
2025/10/12 23:08:11.354333 [INFO] This is an enhanced health env...
2025/10/12 23:08:11.354345 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 23:08:11.371535 [INFO] cfn-hup.service healthd.service nginx.service

2025/10/12 23:08:11.371571 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 23:08:11.387809 [INFO] web.service

2025/10/12 23:08:11.388237 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/12 23:08:11.388261 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/12 23:08:11.388283 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/12 23:08:11.388287 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/12 23:08:11.388294 [INFO] Executing cleanup logic
2025/10/12 23:08:11.388388 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760310485028,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760310491388,"severity":"INFO"}]}]}

2025/10/12 23:08:11.389593 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 23:19:41.661493 [INFO] Starting...
2025/10/12 23:19:41.661538 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 23:19:41.661558 [INFO] reading event message file
2025/10/12 23:19:41.661865 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 23:19:41.735572 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 23:19:42.028911 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 23:19:42.314627 [INFO] checking whether command app-deploy is applicable to this instance...
2025/10/12 23:19:42.314639 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 23:19:42.314642 [INFO] Engine command: (app-deploy)

2025/10/12 23:19:42.314645 [INFO] Downloading EB Application...
2025/10/12 23:19:42.314647 [INFO] Region: us-east-1
2025/10/12 23:19:42.314649 [INFO] envID: e-r2hnd7bhig
2025/10/12 23:19:42.314652 [INFO] envBucket: elasticbeanstalk-us-east-1-433676943793
2025/10/12 23:19:42.314654 [INFO] accountID: 433676943793
2025/10/12 23:19:42.314656 [INFO] Using manifest file name from command request
2025/10/12 23:19:42.314661 [INFO] Manifest name is : manifest_1760311178697
2025/10/12 23:19:42.314663 [INFO] Download app version manifest
2025/10/12 23:19:42.314828 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/versions/manifest_1760311178697, expected bucket owner: 433676943793
2025/10/12 23:19:42.355367 [INFO] Download successful111bytes downloaded
2025/10/12 23:19:42.355536 [INFO] Trying to read and parse version manifest...
2025/10/12 23:19:42.355608 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-433676943793, object: resources/environments/e-r2hnd7bhig/_runtime/_versions/mental-health-llm/app-251013_101931533667, expected bucket owner: 433676943793
2025/10/12 23:19:42.372731 [INFO] Download successful27393bytes downloaded
2025/10/12 23:19:42.372971 [INFO] Executing instruction: ElectLeader
2025/10/12 23:19:42.372976 [INFO] Running leader election for instance i-0a345e60866b3f139...
2025/10/12 23:19:42.372979 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2025/10/12 23:19:42.372988 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id f59fa1b6-aa2e-4a9d-a449-df4159406df5 --listener-id i-0a345e60866b3f139 --region us-east-1
2025/10/12 23:19:42.672187 [INFO] Instance is Leader.
2025/10/12 23:19:42.672240 [INFO] Executing instruction: stopSqsd
2025/10/12 23:19:42.672246 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2025/10/12 23:19:42.672249 [INFO] Executing instruction: PreBuildEbExtension
2025/10/12 23:19:42.672252 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2025/10/12 23:19:42.672267 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2025/10/12 23:19:42.984258 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2025/10/12 23:19:42.984282 [INFO] Executing instruction: StageApplication
2025/10/12 23:19:42.984285 [INFO] Recreating /var/app/staging/
2025/10/12 23:19:42.984385 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2025/10/12 23:19:42.984395 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2025/10/12 23:19:42.989458 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2025/10/12 23:19:42.990428 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2025/10/12 23:19:42.990450 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2025/10/12 23:19:42.990467 [INFO] The dir .platform/hooks/prebuild/ does not exist
2025/10/12 23:19:42.990469 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2025/10/12 23:19:42.990474 [INFO] Executing instruction: InstallDependency
2025/10/12 23:19:42.990478 [INFO] checking dependencies file
2025/10/12 23:19:42.990488 [INFO] Installing dependencies with requirements.txt by using Pip
2025/10/12 23:19:42.990498 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2025/10/12 23:19:43.459030 [INFO] Requirement already satisfied: fastapi==0.104.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (0.104.1)
Requirement already satisfied: uvicorn==0.24.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (0.24.0)
Requirement already satisfied: pydantic==2.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.5.0)
Requirement already satisfied: pydantic-settings==2.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (2.1.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.0.0)
Requirement already satisfied: httpx==0.24.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (0.24.1)
Requirement already satisfied: openai==1.12.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (1.12.0)
Requirement already satisfied: structlog==24.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (24.1.0)
Requirement already satisfied: anyio<4.0.0,>=3.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (3.7.1)
Requirement already satisfied: starlette<0.28.0,>=0.27.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (0.27.0)
Requirement already satisfied: typing-extensions>=4.8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from fastapi==0.104.1->-r requirements.txt (line 1)) (4.15.0)
Requirement already satisfied: annotated-types>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.14.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic==2.5.0->-r requirements.txt (line 3)) (2.14.1)
Requirement already satisfied: click>=7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (8.3.0)
Requirement already satisfied: h11>=0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from uvicorn==0.24.0->-r requirements.txt (line 2)) (0.14.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (2025.10.5)
Requirement already satisfied: httpcore<0.18.0,>=0.15.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (0.17.3)
Requirement already satisfied: idna in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (3.10)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx==0.24.1->-r requirements.txt (line 8)) (1.3.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (1.9.0)
Requirement already satisfied: tqdm>4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from openai==1.12.0->-r requirements.txt (line 11)) (4.67.1)

2025/10/12 23:19:43.459056 [INFO] Executing instruction: check Procfile
2025/10/12 23:19:43.459105 [INFO] detected Procfile in application source bundle ...
2025/10/12 23:19:43.459112 [INFO] Executing instruction: configure X-Ray
2025/10/12 23:19:43.459115 [INFO] X-Ray is not enabled.
2025/10/12 23:19:43.459118 [INFO] Executing instruction: configure proxy server
2025/10/12 23:19:43.459134 [INFO] Recreating /var/proxy/staging/nginx
2025/10/12 23:19:43.468129 [INFO] Executing instruction: configure healthd specific proxy conf
2025/10/12 23:19:43.470213 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 23:19:43.481205 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2025/10/12 23:19:43.481230 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 23:19:43.490043 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 23:19:43.497251 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 23:19:43.506142 [INFO] Running command: systemctl stop healthd.service
2025/10/12 23:19:43.592083 [INFO] Running command: systemctl disable healthd.service
2025/10/12 23:19:43.879009 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2025/10/12 23:19:43.879237 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:19:44.157286 [INFO] Running command: systemctl reset-failed
2025/10/12 23:19:44.168733 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:19:44.444129 [INFO] Running command: systemctl reset-failed
2025/10/12 23:19:44.452527 [INFO] Running command: systemctl is-enabled aws-eb.target
2025/10/12 23:19:44.460379 [INFO] Running command: systemctl enable aws-eb.target
2025/10/12 23:19:44.716008 [INFO] Running command: systemctl start aws-eb.target
2025/10/12 23:19:44.724023 [INFO] Running command: systemctl enable healthd.service
2025/10/12 23:19:44.993289 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2025/10/12 23:19:44.993314 [INFO] Running command: systemctl show -p PartOf healthd.service
2025/10/12 23:19:45.003584 [INFO] Running command: systemctl is-active healthd.service
2025/10/12 23:19:45.010905 [INFO] Running command: systemctl start healthd.service
2025/10/12 23:19:45.072844 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2025/10/12 23:19:45.074005 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2025/10/12 23:19:45.075109 [INFO] Executing instruction: configure log streaming
2025/10/12 23:19:45.075118 [INFO] log streaming is not enabled
2025/10/12 23:19:45.075121 [INFO] disable log stream
2025/10/12 23:19:45.075130 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2025/10/12 23:19:45.092877 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2025/10/12 23:19:45.111663 [INFO] Executing instruction: GetToggleForceRotate
2025/10/12 23:19:45.111689 [INFO] Checking if logs need forced rotation
2025/10/12 23:19:45.111704 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 23:19:45.551253 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 23:19:45.923146 [INFO] Generating rsyslog config from Procfile
2025/10/12 23:19:45.925322 [INFO] Running command: systemctl restart rsyslog.service
2025/10/12 23:19:46.076317 [INFO] Executing instruction: PostBuildEbExtension
2025/10/12 23:19:46.076356 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/10/12 23:19:46.076367 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2025/10/12 23:19:46.387231 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/10/12 23:19:46.387257 [INFO] Executing instruction: CleanEbExtensions
2025/10/12 23:19:46.387350 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/10/12 23:19:46.387359 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/10/12 23:19:46.387375 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/10/12 23:19:46.387390 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/10/12 23:19:46.387392 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/10/12 23:19:46.387396 [INFO] Executing instruction: stop X-Ray
2025/10/12 23:19:46.387399 [INFO] stop X-Ray ...
2025/10/12 23:19:46.387407 [INFO] Running command: systemctl show -p PartOf xray.service
2025/10/12 23:19:46.401626 [WARN] stopProcess Warning: process xray is not registered 
2025/10/12 23:19:46.401653 [INFO] Running command: systemctl stop xray.service
2025/10/12 23:19:46.416248 [INFO] Executing instruction: stop proxy
2025/10/12 23:19:46.416274 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/10/12 23:19:46.430380 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/10/12 23:19:46.430468 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 23:19:46.442356 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 23:19:46.450346 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 23:19:46.459274 [INFO] Running command: systemctl stop nginx.service
2025/10/12 23:19:46.686483 [INFO] Running command: systemctl disable nginx.service
2025/10/12 23:19:46.964622 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:19:47.245769 [INFO] Running command: systemctl reset-failed
2025/10/12 23:19:47.253860 [INFO] Executing instruction: FlipApplication
2025/10/12 23:19:47.253884 [INFO] Fetching environment variables...
2025/10/12 23:19:47.254062 [INFO] Purge old process...
2025/10/12 23:19:47.254084 [INFO] Running command: systemctl stop eb-app.target
2025/10/12 23:19:47.263583 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 23:19:47.273607 [INFO] web.service

2025/10/12 23:19:47.273627 [INFO] deregistering process: web
2025/10/12 23:19:47.273646 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 23:19:47.284199 [INFO] Running command: systemctl is-active web.service
2025/10/12 23:19:47.291704 [INFO] Running command: systemctl disable web.service
2025/10/12 23:19:47.636870 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2025/10/12 23:19:47.636963 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:19:47.995974 [INFO] Running command: systemctl reset-failed
2025/10/12 23:19:48.036030 [INFO] Running command: systemctl is-active web.service
2025/10/12 23:19:48.044003 [INFO] Process web has been fully terminated
2025/10/12 23:19:48.044026 [INFO] All processes have been fully terminated
2025/10/12 23:19:48.044031 [INFO] Removing /var/app/current/ if it exists
2025/10/12 23:19:48.045102 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/10/12 23:19:48.045124 [INFO] Register application processes...
2025/10/12 23:19:48.045128 [INFO] Registering the proc: web

2025/10/12 23:19:48.045135 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 23:19:48.056610 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:19:48.303497 [INFO] Running command: systemctl reset-failed
2025/10/12 23:19:48.312014 [INFO] Running command: systemctl is-enabled eb-app.target
2025/10/12 23:19:48.319837 [INFO] Running command: systemctl enable eb-app.target
2025/10/12 23:19:48.594192 [INFO] Running command: systemctl start eb-app.target
2025/10/12 23:19:48.603467 [INFO] Running command: systemctl enable web.service
2025/10/12 23:19:48.916194 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/10/12 23:19:48.916225 [INFO] Running command: systemctl show -p PartOf web.service
2025/10/12 23:19:48.927441 [INFO] Running command: systemctl is-active web.service
2025/10/12 23:19:48.934806 [INFO] Running command: systemctl start web.service
2025/10/12 23:19:48.991256 [INFO] Executing instruction: start X-Ray
2025/10/12 23:19:48.991293 [INFO] X-Ray is not enabled.
2025/10/12 23:19:48.991299 [INFO] Executing instruction: start proxy with new configuration
2025/10/12 23:19:48.991334 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/10/12 23:19:49.019053 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/10/12 23:19:49.019377 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/10/12 23:19:49.023958 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 23:19:49.047111 [INFO] Running command: systemctl daemon-reload
2025/10/12 23:19:49.509126 [INFO] Running command: systemctl reset-failed
2025/10/12 23:19:49.522534 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/10/12 23:19:49.545124 [INFO] Running command: systemctl is-active nginx.service
2025/10/12 23:19:49.560574 [INFO] Running command: systemctl start nginx.service
2025/10/12 23:19:49.727748 [INFO] Executing instruction: configureSqsd
2025/10/12 23:19:49.727766 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/10/12 23:19:49.727771 [INFO] Executing instruction: startSqsd
2025/10/12 23:19:49.727774 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/10/12 23:19:49.727778 [INFO] Executing instruction: Track pids in healthd
2025/10/12 23:19:49.727782 [INFO] This is an enhanced health env...
2025/10/12 23:19:49.727794 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/10/12 23:19:49.744424 [INFO] healthd.service nginx.service cfn-hup.service

2025/10/12 23:19:49.744456 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/10/12 23:19:49.760968 [INFO] web.service

2025/10/12 23:19:49.761211 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/10/12 23:19:49.761327 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/10/12 23:19:49.761351 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/10/12 23:19:49.761355 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/10/12 23:19:49.761361 [INFO] Executing cleanup logic
2025/10/12 23:19:49.761473 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1760311183459,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1760311189761,"severity":"INFO"}]}]}

2025/10/12 23:19:49.762634 [INFO] Platform Engine finished execution on command: app-deploy

2025/10/12 23:20:41.846097 [INFO] Starting...
2025/10/12 23:20:41.846147 [INFO] Starting EBPlatform-PlatformEngine
2025/10/12 23:20:41.846172 [INFO] reading event message file
2025/10/12 23:20:41.846675 [INFO] Engine received EB command cfn-hup-exec

2025/10/12 23:20:41.907462 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBAutoScalingGroup --region us-east-1
2025/10/12 23:20:42.209299 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:433676943793:stack/awseb-e-r2hnd7bhig-stack/ce9eeb90-a727-11f0-a6a4-12975c8374b3 -r AWSEBBeanstalkMetadata --region us-east-1
2025/10/12 23:20:42.505155 [INFO] checking whether command bundle-log is applicable to this instance...
2025/10/12 23:20:42.505168 [INFO] this command is applicable to the instance, thus instance should execute command
2025/10/12 23:20:42.505170 [INFO] Engine command: (bundle-log)

2025/10/12 23:20:42.505216 [INFO] Executing instruction: GetBundleLogs
2025/10/12 23:20:42.505219 [INFO] Bundle Logs...
